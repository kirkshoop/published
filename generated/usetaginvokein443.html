<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="mpark/wg21" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2020-09-10" />
  <title>redefine properties in P0443</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f6f8fa; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span. { } /* Normal */
      code span.al { color: #ff0000; } /* Alert */
      code span.an { } /* Annotation */
      code span.at { } /* Attribute */
      code span.bn { color: #9f6807; } /* BaseN */
      code span.bu { color: #9f6807; } /* BuiltIn */
      code span.cf { color: #00607c; } /* ControlFlow */
      code span.ch { color: #9f6807; } /* Char */
      code span.cn { } /* Constant */
      code span.co { color: #008000; font-style: italic; } /* Comment */
      code span.cv { color: #008000; font-style: italic; } /* CommentVar */
      code span.do { color: #008000; } /* Documentation */
      code span.dt { color: #00607c; } /* DataType */
      code span.dv { color: #9f6807; } /* DecVal */
      code span.er { color: #ff0000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #9f6807; } /* Float */
      code span.fu { } /* Function */
      code span.im { } /* Import */
      code span.in { color: #008000; } /* Information */
      code span.kw { color: #00607c; } /* Keyword */
      code span.op { color: #af1915; } /* Operator */
      code span.ot { } /* Other */
      code span.pp { color: #6f4e37; } /* Preprocessor */
      code span.re { } /* RegionMarker */
      code span.sc { color: #9f6807; } /* SpecialChar */
      code span.ss { color: #9f6807; } /* SpecialString */
      code span.st { color: #9f6807; } /* String */
      code span.va { } /* Variable */
      code span.vs { color: #9f6807; } /* VerbatimString */
      code span.wa { color: #008000; font-weight: bold; } /* Warning */
      code.diff {color: #898887}
      code.diff span.va {color: #006e28}
      code.diff span.st {color: #bf0303}
  </style>
  <style type="text/css">
body {
margin: 5em;
font-family: serif;

hyphens: auto;
line-height: 1.35;
}
div.wrapper {
max-width: 60em;
margin: auto;
}
ul {
list-style-type: none;
padding-left: 2em;
margin-top: -0.2em;
margin-bottom: -0.2em;
}
a {
text-decoration: none;
color: #4183C4;
}
a.hidden_link {
text-decoration: none;
color: inherit;
}
li {
margin-top: 0.6em;
margin-bottom: 0.6em;
}
h1, h2, h3, h4 {
position: relative;
line-height: 1;
}
a.self-link {
position: absolute;
top: 0;
left: calc(-1 * (3.5rem - 26px));
width: calc(3.5rem - 26px);
height: 2em;
text-align: center;
border: none;
transition: opacity .2s;
opacity: .5;
font-family: sans-serif;
font-weight: normal;
font-size: 83%;
}
a.self-link:hover { opacity: 1; }
a.self-link::before { content: "§"; }
ul > li:before {
content: "\2014";
position: absolute;
margin-left: -1.5em;
}
:target { background-color: #C9FBC9; }
:target .codeblock { background-color: #C9FBC9; }
:target ul { background-color: #C9FBC9; }
.abbr_ref { float: right; }
.folded_abbr_ref { float: right; }
:target .folded_abbr_ref { display: none; }
:target .unfolded_abbr_ref { float: right; display: inherit; }
.unfolded_abbr_ref { display: none; }
.secnum { display: inline-block; min-width: 35pt; }
.header-section-number { display: inline-block; min-width: 35pt; }
.annexnum { display: block; }
div.sourceLinkParent {
float: right;
}
a.sourceLink {
position: absolute;
opacity: 0;
margin-left: 10pt;
}
a.sourceLink:hover {
opacity: 1;
}
a.itemDeclLink {
position: absolute;
font-size: 75%;
text-align: right;
width: 5em;
opacity: 0;
}
a.itemDeclLink:hover { opacity: 1; }
span.marginalizedparent {
position: relative;
left: -5em;
}
li span.marginalizedparent { left: -7em; }
li ul > li span.marginalizedparent { left: -9em; }
li ul > li ul > li span.marginalizedparent { left: -11em; }
li ul > li ul > li ul > li span.marginalizedparent { left: -13em; }
div.footnoteNumberParent {
position: relative;
left: -4.7em;
}
a.marginalized {
position: absolute;
font-size: 75%;
text-align: right;
width: 5em;
}
a.enumerated_item_num {
position: relative;
left: -3.5em;
display: inline-block;
margin-right: -3em;
text-align: right;
width: 3em;
}
div.para { margin-bottom: 0.6em; margin-top: 0.6em; text-align: justify; }
div.section { text-align: justify; }
div.sentence { display: inline; }
span.indexparent {
display: inline;
position: relative;
float: right;
right: -1em;
}
a.index {
position: absolute;
display: none;
}
a.index:before { content: "⟵"; }

a.index:target {
display: inline;
}
.indexitems {
margin-left: 2em;
text-indent: -2em;
}
div.itemdescr {
margin-left: 3em;
}
.bnf {
font-family: serif;
margin-left: 40pt;
margin-top: 0.5em;
margin-bottom: 0.5em;
}
.ncbnf {
font-family: serif;
margin-top: 0.5em;
margin-bottom: 0.5em;
margin-left: 40pt;
}
.ncsimplebnf {
font-family: serif;
font-style: italic;
margin-top: 0.5em;
margin-bottom: 0.5em;
margin-left: 40pt;
background: inherit; 
}
span.textnormal {
font-style: normal;
font-family: serif;
white-space: normal;
display: inline-block;
}
span.rlap {
display: inline-block;
width: 0px;
}
span.descr { font-style: normal; font-family: serif; }
span.grammarterm { font-style: italic; }
span.term { font-style: italic; }
span.terminal { font-family: monospace; font-style: normal; }
span.nonterminal { font-style: italic; }
span.tcode { font-family: monospace; font-style: normal; }
span.textbf { font-weight: bold; }
span.textsc { font-variant: small-caps; }
a.nontermdef { font-style: italic; font-family: serif; }
span.emph { font-style: italic; }
span.techterm { font-style: italic; }
span.mathit { font-style: italic; }
span.mathsf { font-family: sans-serif; }
span.mathrm { font-family: serif; font-style: normal; }
span.textrm { font-family: serif; }
span.textsl { font-style: italic; }
span.mathtt { font-family: monospace; font-style: normal; }
span.mbox { font-family: serif; font-style: normal; }
span.ungap { display: inline-block; width: 2pt; }
span.textit { font-style: italic; }
span.texttt { font-family: monospace; }
span.tcode_in_codeblock { font-family: monospace; font-style: normal; }
span.phantom { color: white; }

span.math { font-style: normal; }
span.mathblock {
display: block;
margin-left: auto;
margin-right: auto;
margin-top: 1.2em;
margin-bottom: 1.2em;
text-align: center;
}
span.mathalpha {
font-style: italic;
}
span.synopsis {
font-weight: bold;
margin-top: 0.5em;
display: block;
}
span.definition {
font-weight: bold;
display: block;
}
.codeblock {
margin-left: 1.2em;
line-height: 127%;
}
.outputblock {
margin-left: 1.2em;
line-height: 127%;
}
div.itemdecl {
margin-top: 2ex;
}
code.itemdeclcode {
white-space: pre;
display: block;
}
span.textsuperscript {
vertical-align: super;
font-size: smaller;
line-height: 0;
}
.footnotenum { vertical-align: super; font-size: smaller; line-height: 0; }
.footnote {
font-size: small;
margin-left: 2em;
margin-right: 2em;
margin-top: 0.6em;
margin-bottom: 0.6em;
}
div.minipage {
display: inline-block;
margin-right: 3em;
}
div.numberedTable {
text-align: center;
margin: 2em;
}
div.figure {
text-align: center;
margin: 2em;
}
table {
border: 1px solid black;
border-collapse: collapse;
margin-left: auto;
margin-right: auto;
margin-top: 0.8em;
text-align: left;
hyphens: none; 
}
td, th {
padding-left: 1em;
padding-right: 1em;
vertical-align: top;
}
td.empty {
padding: 0px;
padding-left: 1px;
}
td.left {
text-align: left;
}
td.right {
text-align: right;
}
td.center {
text-align: center;
}
td.justify {
text-align: justify;
}
td.border {
border-left: 1px solid black;
}
tr.rowsep, td.cline {
border-top: 1px solid black;
}
tr.even, tr.odd {
border-bottom: 1px solid black;
}
tr.capsep {
border-top: 3px solid black;
border-top-style: double;
}
tr.header {
border-bottom: 3px solid black;
border-bottom-style: double;
}
th {
border-bottom: 1px solid black;
}
span.centry {
font-weight: bold;
}
div.table {
display: block;
margin-left: auto;
margin-right: auto;
text-align: center;
width: 90%;
}
span.indented {
display: block;
margin-left: 2em;
margin-bottom: 1em;
margin-top: 1em;
}
ol.enumeratea { list-style-type: none; background: inherit; }
ol.enumerate { list-style-type: none; background: inherit; }

code.sourceCode > span { display: inline; }
</style>
  <link href="data:image/x-icon;base64,AAABAAIAEBAAAAEAIABoBAAAJgAAACAgAAABACAAqBAAAI4EAAAoAAAAEAAAACAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAVoJEAN6CRADegkQAWIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wCCRAAAgkQAAIJEAACCRAAsgkQAvoJEAP+CRAD/gkQA/4JEAP+CRADAgkQALoJEAACCRAAAgkQAAP///wD///8AgkQAAIJEABSCRACSgkQA/IJEAP99PQD/dzMA/3czAP99PQD/gkQA/4JEAPyCRACUgkQAFIJEAAD///8A////AHw+AFiBQwDqgkQA/4BBAP9/PxP/uZd6/9rJtf/bybX/upd7/39AFP+AQQD/gkQA/4FDAOqAQgBc////AP///wDKklv4jlEa/3o7AP+PWC//8+3o///////////////////////z7un/kFox/35AAP+GRwD/mVYA+v///wD///8A0Zpk+NmibP+0d0T/8evj///////+/fv/1sKz/9bCs//9/fr//////+/m2/+NRwL/nloA/5xYAPj///8A////ANKaZPjRmGH/5cKh////////////k149/3UwAP91MQD/lmQ//86rhv+USg3/m1YA/5hSAP+bVgD4////AP///wDSmmT4zpJY/+/bx///////8+TV/8mLT/+TVx//gkIA/5lVAP+VTAD/x6B//7aEVv/JpH7/s39J+P///wD///8A0ppk+M6SWP/u2sf///////Pj1f/Nj1T/2KFs/8mOUv+eWhD/lEsA/8aee/+0glT/x6F7/7J8Rvj///8A////ANKaZPjRmGH/48Cf///////+/v7/2qt//82PVP/OkFX/37KJ/86siv+USg7/mVQA/5hRAP+bVgD4////AP///wDSmmT40ppk/9CVXP/69O////////7+/v/x4M//8d/P//7+/f//////9u7n/6tnJf+XUgD/nFgA+P///wD///8A0ppk+NKaZP/RmWL/1qNy//r07///////////////////////+vXw/9akdP/Wnmn/y5FY/6JfFvj///8A////ANKaZFTSmmTo0ppk/9GYYv/Ql1//5cWm//Hg0P/x4ND/5cWm/9GXYP/RmGH/0ppk/9KaZOjVnmpY////AP///wDSmmQA0ppkEtKaZI7SmmT60ppk/9CWX//OkVb/zpFW/9CWX//SmmT/0ppk/NKaZJDSmmQS0ppkAP///wD///8A0ppkANKaZADSmmQA0ppkKtKaZLrSmmT/0ppk/9KaZP/SmmT/0ppkvNKaZCrSmmQA0ppkANKaZAD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkUtKaZNzSmmTc0ppkVNKaZADSmmQA0ppkANKaZADSmmQA////AP5/AAD4HwAA4AcAAMADAACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAMADAADgBwAA+B8AAP5/AAAoAAAAIAAAAEAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AP///wCCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAAyCRACMgkQA6oJEAOqCRACQgkQAEIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wD///8A////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRABigkQA5oJEAP+CRAD/gkQA/4JEAP+CRADqgkQAZoJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAAD///8A////AP///wD///8AgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAA4gkQAwoJEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQAxIJEADyCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAP///wD///8A////AP///wCCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAWgkQAmIJEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAJyCRAAYgkQAAIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wD///8A////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAdIJEAPCCRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAPSCRAB4gkQAAIJEAACCRAAAgkQAAIJEAAD///8A////AP///wD///8AgkQAAIJEAACCRAAAgkQASoJEANKCRAD/gkQA/4JEAP+CRAD/g0YA/39AAP9zLgD/bSQA/2shAP9rIQD/bSQA/3MuAP9/PwD/g0YA/4JEAP+CRAD/gkQA/4JEAP+CRADUgkQAToJEAACCRAAAgkQAAP///wD///8A////AP///wB+PwAAgkUAIoJEAKiCRAD/gkQA/4JEAP+CRAD/hEcA/4BBAP9sIwD/dTAA/5RfKv+viF7/vp56/76ee/+wiF7/lWAr/3YxAP9sIwD/f0AA/4RHAP+CRAD/gkQA/4JEAP+CRAD/gkQArIJEACaBQwAA////AP///wD///8A////AIBCAEBzNAD6f0EA/4NFAP+CRAD/gkQA/4VIAP92MwD/bSUA/6N1Tv/ezsL/////////////////////////////////38/D/6V3Uv9uJgD/dTEA/4VJAP+CRAD/gkQA/4JEAP+BQwD/fUAA/4FDAEj///8A////AP///wD///8AzJRd5qBlKf91NgD/dDUA/4JEAP+FSQD/cy4A/3YyAP/PuKP//////////////////////////////////////////////////////9K7qP94NQD/ciwA/4VJAP+CRAD/fkEA/35BAP+LSwD/mlYA6v///wD///8A////AP///wDdpnL/4qx3/8KJUv+PUhf/cTMA/3AsAP90LgD/4dK+/////////////////////////////////////////////////////////////////+TYxf91MAD/dTIA/31CAP+GRwD/llQA/6FcAP+gWwD8////AP///wD///8A////ANGZY/LSm2X/4ap3/92mcP+wdT3/byQA/8mwj////////////////////////////////////////////////////////////////////////////+LYxv9zLgP/jUoA/59bAP+hXAD/nFgA/5xYAPL///8A////AP///wD///8A0ppk8tKaZP/RmWL/1p9q/9ubXv/XqXj////////////////////////////7+fD/vZyG/6BxS/+gcUr/vJuE//r37f//////////////////////3MOr/5dQBf+dVQD/nVkA/5xYAP+cWAD/nFgA8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/SmWP/yohJ//jo2P//////////////////////4NTG/4JDFf9lGAD/bSQA/20kAP9kGAD/fz8S/+Xb0f//////5NG9/6txN/+LOgD/m1QA/51aAP+cWAD/m1cA/5xYAP+cWADy////AP///wD///8A////ANKaZPLSmmT/0ppk/8+TWf/Unmv//v37//////////////////////+TWRr/VwsA/35AAP+ERgD/g0UA/4JGAP9lHgD/kFga/8KXX/+TRwD/jT4A/49CAP+VTQD/n10A/5xYAP+OQQD/lk4A/55cAPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/y4tO/92yiP//////////////////////8NnE/8eCQP+rcTT/ez0A/3IyAP98PgD/gEMA/5FSAP+USwD/jj8A/5lUAP+JNwD/yqV2/694Mf+HNQD/jkAA/82rf/+laBj/jT4A8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/LiUr/4byY///////////////////////gupX/0I5P/+Wuev/Lklz/l1sj/308AP+QSwD/ol0A/59aAP+aVQD/k0oA/8yoh///////+fXv/6pwO//Lp3v///////Pr4f+oay7y////AP///wD///8A////ANKaZPLSmmT/0ppk/8uJSv/hvJj//////////////////////+G7l//Jhkb/0ppk/96nc//fqXX/x4xO/6dkFP+QSQD/llEA/5xXAP+USgD/yaOA///////38uv/qG05/8ijdv//////8efb/6ZpLPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/zIxO/9yxh///////////////////////7dbA/8iEQf/Sm2X/0Zlj/9ScZv/eqHf/2KJv/7yAQf+XTgD/iToA/5lSAP+JNgD/yKFv/611LP+HNQD/jT8A/8qmeP+kZRT/jT4A8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/Pk1n/1J5q//78+//////////////////+/fv/1aFv/8iEQv/Tm2b/0ppl/9GZY//Wn2z/1pZc/9eldf/Bl2b/kUcA/4w9AP+OQAD/lUwA/59eAP+cWQD/jT8A/5ZOAP+eXADy////AP///wD///8A////ANKaZPLSmmT/0ppk/9KZY//KiEn/8d/P///////////////////////47+f/05tm/8iCP//KiEj/yohJ/8eCP//RmGH//vfy///////n1sP/rXQ7/4k4AP+TTAD/nVoA/5xYAP+cVwD/nFgA/5xYAPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/0ptl/8uLTf/aq37////////////////////////////+/fz/6c2y/961jv/etY7/6Myx//78+v//////////////////////3MWv/5xXD/+ORAD/mFQA/51ZAP+cWAD/nFgA8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/SmmT/0ppk/8mFRP/s1b//////////////////////////////////////////////////////////////////////////////+PD/0JFU/7NzMv+WUQD/kUsA/5tXAP+dWQDy////AP///wD///8A////ANKaZP/SmmT/0ppk/9KaZP/Sm2X/z5NZ/8yMT//z5NX/////////////////////////////////////////////////////////////////9Ofa/8yNUP/UmGH/36p5/8yTWv+qaSD/kksA/5ROAPz///8A////AP///wD///8A0ppk5NKaZP/SmmT/0ppk/9KaZP/TnGf/zY9T/82OUv/t1sD//////////////////////////////////////////////////////+7Yw//OkFX/zI5R/9OcZ//SmmP/26V0/9ymdf/BhUf/ol8R6P///wD///8A////AP///wDSmmQ80ppk9tKaZP/SmmT/0ppk/9KaZP/TnGj/zpFW/8qJSv/dson/8uHS//////////////////////////////////Lj0//etIv/y4lL/86QVf/TnGj/0ppk/9KaZP/RmWP/05xn/9ymdfjUnWdC////AP///wD///8A////ANKaZADSmmQc0ppkotKaZP/SmmT/0ppk/9KaZP/Tm2b/0Zli/8qJSf/NjlH/16Z3/+G8mP/myKr/5siq/+G8mP/Xp3f/zY5S/8qISf/RmGH/05tm/9KaZP/SmmT/0ppk/9KaZP/SmmSm0pljINWdaQD///8A////AP///wD///8A0ppkANKaZADSmmQA0ppkQtKaZMrSmmT/0ppk/9KaZP/SmmT/0ptl/9GYYf/Nj1P/y4lL/8qISP/KiEj/y4lK/82PU//RmGH/0ptl/9KaZP/SmmT/0ppk/9KaZP/SmmTO0ppkRtKaZADSmmQA0ppkAP///wD///8A////AP///wDSmmQA0ppkANKaZADSmmQA0ppkANKaZGzSmmTu0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmTw0ppkcNKaZADSmmQA0ppkANKaZADSmmQA////AP///wD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZBLSmmSQ0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppklNKaZBTSmmQA0ppkANKaZADSmmQA0ppkANKaZAD///8A////AP///wD///8A0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQy0ppkutKaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppkvtKaZDbSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkAP///wD///8A////AP///wDSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkXNKaZODSmmT/0ppk/9KaZP/SmmT/0ppk5NKaZGDSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA////AP///wD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkBtKaZIbSmmTo0ppk6tKaZIrSmmQK0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZAD///8A////AP/8P///+B///+AH//+AAf//AAD//AAAP/AAAA/gAAAHwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA+AAAAfwAAAP/AAAP/8AAP//gAH//+AH///4H////D//" rel="icon" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  
</head>
<body>
<div class="wrapper">
<header id="title-block-header">
<h1 class="title" style="text-align:center">redefine properties in P0443</h1>

<table style="border:none;float:right">
  <tr>
    <td>Document #:</td>
    <td>D2220R0</td>
  </tr>
  <tr>
    <td>Date:</td>
    <td>2020-09-10</td>
  </tr>
  <tr>
    <td style="vertical-align:top">Project:</td>
    <td>Programming Language C++</td>
  </tr>
  <tr>
    <td style="vertical-align:top">Audience:</td>
    <td>
      LEWG Library Evolution<br>
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top">Reply-to:</td>
    <td>
      Kirk Shoop<br>&lt;<a href="mailto:kirk.shoop@gmail.com" class="email">kirk.shoop@gmail.com</a>&gt;<br>
    </td>
  </tr>
</table>

</header>
<div style="clear:both">
<div id="TOC" role="doc-toc">
<h1 id="toctitle">Contents</h1>
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction<span></span></a></li>
<li><a href="#motivation"><span class="toc-section-number">2</span> Motivation<span></span></a>
<ul>
<li><a href="#a-lack-of-understanding"><span class="toc-section-number">2.1</span> a lack of understanding<span></span></a></li>
<li><a href="#requirements-that-motivated-the-properties-in-p0443r13---executors"><span class="toc-section-number">2.2</span> requirements that motivated the properties in <span class="citation" data-cites="P0443R13">[<span>P0443R13</span>]</span> - <em>executors</em><span></span></a></li>
<li><a href="#satisfying-the-requirements"><span class="toc-section-number">2.3</span> satisfying the requirements<span></span></a></li>
<li><a href="#p1393r0---properties-contains-a-lot-that-is-not-required"><span class="toc-section-number">2.4</span> <span class="citation" data-cites="P1393R0">[<span>P1393R0</span>]</span> - <em>properties</em> contains a lot that is not required<span></span></a></li>
<li><a href="#p1895r0---tag_invoke-will-compose-additional-functionality"><span class="toc-section-number">2.5</span> <span class="citation" data-cites="P1895R0">[<span>P1895R0</span>]</span> - <em><code class="sourceCode default">tag_invoke</code></em> will compose additional functionality<span></span></a></li>
<li><a href="#compare-the-mechanisms-defined-in-p1393r0---properties-and-p1895r0---tag_invoke"><span class="toc-section-number">2.6</span> Compare the mechanisms defined in <span class="citation" data-cites="P1393R0">[<span>P1393R0</span>]</span> - <em>properties</em> and <span class="citation" data-cites="P1895R0">[<span>P1895R0</span>]</span> - <em><code class="sourceCode default">tag_invoke</code></em><span></span></a>
<ul>
<li><a href="#similarities"><span class="toc-section-number">2.6.1</span> Similarities<span></span></a></li>
<li><a href="#definitions-and-usage"><span class="toc-section-number">2.6.2</span> Definitions and Usage<span></span></a></li>
</ul></li>
<li><a href="#behavioral-properties-are-values-and-implement-type-erasure"><span class="toc-section-number">2.7</span> Behavioral properties are values and implement type-erasure<span></span></a></li>
<li><a href="#stdexecutionallocator_t"><span class="toc-section-number">2.8</span> std::execution::allocator_t&lt;&gt;<span></span></a></li>
</ul></li>
<li><a href="#changes"><span class="toc-section-number">3</span> Changes<span></span></a>
<ul>
<li><a href="#naming-customization-points"><span class="toc-section-number">3.1</span> Naming customization points<span></span></a></li>
<li><a href="#remove-dependencies-on-prefer"><span class="toc-section-number">3.2</span> remove dependencies on prefer<span></span></a>
<ul>
<li><a href="#implementation"><span class="toc-section-number">3.2.1</span> Implementation<span></span></a></li>
</ul></li>
<li><a href="#remove-any_executor"><span class="toc-section-number">3.3</span> remove <code class="sourceCode default">any_executor</code><span></span></a></li>
<li><a href="#move-2.4.2-struct-prefer_only-to-p1393r0---properties"><span class="toc-section-number">3.4</span> move <em>2.4.2 Struct prefer_only</em> to <span class="citation" data-cites="P1393R0">[<span>P1393R0</span>]</span> - <em>properties</em><span></span></a></li>
<li><a href="#modify-section-2.2.11.1-associated-execution-context-property"><span class="toc-section-number">3.5</span> Modify section <em>2.2.11.1 Associated execution context property</em><span></span></a></li>
<li><a href="#add-section-behavioural-tag-values"><span class="toc-section-number">3.6</span> Add section <em>? Behavioural tag values</em><span></span></a></li>
<li><a href="#add-section-get-blocking-behaviour-tag-function"><span class="toc-section-number">3.7</span> Add section <em>? Get blocking behaviour tag function</em><span></span></a></li>
<li><a href="#add-section-change-blocking-behaviour-tag-function"><span class="toc-section-number">3.8</span> Add section <em>? Change blocking behaviour tag function</em><span></span></a></li>
<li><a href="#modify-section-2.2.12.1-blocking-properties"><span class="toc-section-number">3.9</span> Modify section <em>2.2.12.1 Blocking properties</em><span></span></a></li>
<li><a href="#modify-section-2.2.12.1.1-blocking_talways_t-customization-points"><span class="toc-section-number">3.10</span> Modify section <em>2.2.12.1.1 blocking_t::always_t customization points</em><span></span></a></li>
<li><a href="#add-section-get-relationship-behaviour-tag-function"><span class="toc-section-number">3.11</span> Add section <em>? Get relationship behaviour tag function</em><span></span></a></li>
<li><a href="#add-section-change-relationship-behaviour-tag-function"><span class="toc-section-number">3.12</span> Add section <em>? Change relationship behaviour tag function</em><span></span></a></li>
<li><a href="#modify-section-2.2.12.3-properties-to-indicate-if-submitted-tasks-represent-continuations"><span class="toc-section-number">3.13</span> Modify section <em>2.2.12.3 Properties to indicate if submitted tasks represent continuations</em><span></span></a></li>
<li><a href="#add-section-get-outstanding-work-behaviour-tag-function"><span class="toc-section-number">3.14</span> Add section <em>? Get outstanding work behaviour tag function</em><span></span></a></li>
<li><a href="#add-section-change-outstanding-work-behaviour-tag-function"><span class="toc-section-number">3.15</span> Add section <em>? Change outstanding work behaviour tag function</em><span></span></a></li>
<li><a href="#modify-section-2.2.12.4-properties-to-indicate-likely-task-submission-in-the-future"><span class="toc-section-number">3.16</span> Modify section <em>2.2.12.4 Properties to indicate likely task submission in the future</em><span></span></a></li>
<li><a href="#add-section-get-mapping-behaviour-tag-function"><span class="toc-section-number">3.17</span> Add section <em>? Get mapping behaviour tag function</em><span></span></a></li>
<li><a href="#add-section-change-mapping-behaviour-tag-function"><span class="toc-section-number">3.18</span> Add section <em>? Change mapping behaviour tag function</em><span></span></a></li>
<li><a href="#modify-section-2.2.12.6-properties-for-mapping-of-execution-on-to-threads"><span class="toc-section-number">3.19</span> Modify section <em>2.2.12.6 Properties for mapping of execution on to threads</em><span></span></a></li>
<li><a href="#add-section-get-allocator-tag-function"><span class="toc-section-number">3.20</span> Add section <em>? Get allocator tag function</em><span></span></a></li>
<li><a href="#add-section-change-allocator-tag-function"><span class="toc-section-number">3.21</span> Add section <em>? Change allocator tag function</em><span></span></a></li>
<li><a href="#modify-section-2.5.2-class-static_thread_pool"><span class="toc-section-number">3.22</span> Modify section <em>2.5.2 Class <code class="sourceCode default">static_thread_pool</code></em><span></span></a></li>
<li><a href="#modify-section-2.5.2.4-scheduler-creation"><span class="toc-section-number">3.23</span> Modify section <em>2.5.2.4 Scheduler creation</em><span></span></a></li>
<li><a href="#modify-section-2.5.2.5-executor-creation"><span class="toc-section-number">3.24</span> Modify section <em>2.5.2.5 Executor creation</em><span></span></a></li>
<li><a href="#modify-section-2.5.3-static_thread_pool-scheduler-types"><span class="toc-section-number">3.25</span> Modify section <em>2.5.3 <code class="sourceCode default">static_thread_pool</code> scheduler types</em><span></span></a></li>
<li><a href="#modify-section-2.5.3.3-operations"><span class="toc-section-number">3.26</span> Modify section <em>2.5.3.3 Operations</em><span></span></a></li>
<li><a href="#modify-section-2.5.3.4-comparisons"><span class="toc-section-number">3.27</span> Modify section <em>2.5.3.4 Comparisons</em><span></span></a></li>
<li><a href="#modify-section-2.5.3.6-sender-creation"><span class="toc-section-number">3.28</span> Modify section <em>2.5.3.6 Sender creation</em><span></span></a></li>
<li><a href="#modify-section-2.5.4-static_thread_pool-sender-types"><span class="toc-section-number">3.29</span> Modify section <em>2.5.4 <code class="sourceCode default">static_thread_pool</code> sender types</em><span></span></a></li>
<li><a href="#modify-section-2.5.4.3-operations"><span class="toc-section-number">3.30</span> Modify section <em>2.5.4.3 Operations</em><span></span></a></li>
<li><a href="#modify-section-2.5.4.4-comparisons"><span class="toc-section-number">3.31</span> Modify section <em>2.5.4.4 Comparisons</em><span></span></a></li>
<li><a href="#modify-section-2.5.5-static_thread_pool-executor-types"><span class="toc-section-number">3.32</span> Modify section <em>2.5.5 <code class="sourceCode default">static_thread_pool</code> executor types</em><span></span></a></li>
<li><a href="#modify-section-2.5.5.3-operations"><span class="toc-section-number">3.33</span> Modify section <em>2.5.5.3 Operations</em><span></span></a></li>
<li><a href="#modify-section-2.5.5.4-comparisons"><span class="toc-section-number">3.34</span> Modify section <em>2.5.5.4 Comparisons</em><span></span></a></li>
<li><a href="#modify-section-1.2-usage-example"><span class="toc-section-number">3.35</span> Modify section <em>1.2 Usage Example</em><span></span></a></li>
<li><a href="#modify-section-1.3-executors-execute-work"><span class="toc-section-number">3.36</span> Modify section <em>1.3 Executors Execute Work</em><span></span></a></li>
<li><a href="#modify-section-2.1.2-header-synopsis"><span class="toc-section-number">3.37</span> Modify section <em>2.1.2 Header <execution> synopsis</em><span></span></a></li>
</ul></li>
<li><a href="#bibliography"><span class="toc-section-number">4</span> References<span></span></a></li>
</ul>
</div>
<h1 data-number="1" id="introduction" data-number="1"><span class="header-section-number">1</span> Introduction<a href="#introduction" class="self-link"></a></h1>
<blockquote>
<p>This subclause describes components supporting an extensible customization mechanism, currently used most prominently by the execution support library <em><span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - A General Property Customization Mechanism</em></p>
</blockquote>
<p><em><span class="citation" data-cites="P1895R0">[<a href="#ref-P1895R0" role="doc-biblioref">P1895R0</a>]</span> - A general pattern for supporting customisable functions</em> is being considered as the mechanism that will be used to implement <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em>. It is also intended to be used to implement basis function CPOs like <code class="sourceCode default">execute()</code> and algorithm CPOs like <code class="sourceCode default">transform()</code></p>
<p>The properties mechanism was designed for use in executors and was split out of <span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>executors</em> because it would be used for far more than executors once it was in the standard. Several properties are defined for executors.</p>
<p>The opinion of this paper is that <span class="citation" data-cites="P1895R0">[<a href="#ref-P1895R0" role="doc-biblioref">P1895R0</a>]</span> - <em><code class="sourceCode default">tag_invoke</code></em> provides a more idiomatic model for customization in C++ than <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em>.</p>
<p>This paper will demonstrate changes to <span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>executors</em>, that would define the properties as tag_invoke functions, so that the mechanisms can be compared.</p>
<p>The changes in this paper are narrowly intended to explore how this type of customization should be expressed in the standard library. The semantics of the properties, as approved by SG1, are not changed.</p>
<p>The changes in this paper are implemented in a fork of asio <a href="https://github.com/kirkshoop/asio/tree/properties">github</a></p>
<h1 data-number="2" id="motivation" data-number="2"><span class="header-section-number">2</span> Motivation<a href="#motivation" class="self-link"></a></h1>
<h2 data-number="2.1" id="a-lack-of-understanding" data-number="2.1"><span class="header-section-number">2.1</span> a lack of understanding<a href="#a-lack-of-understanding" class="self-link"></a></h2>
<p>A huge amount of committee time has been spent trying to understand what properties are and how to define a good property and how to implement a property correctly and how to use a property correctly. A lot of that discussion continues to be between authors of the papers. Some have low confidence that properties are understood.</p>
<h2 data-number="2.2" id="requirements-that-motivated-the-properties-in-p0443r13---executors" data-number="2.2"><span class="header-section-number">2.2</span> requirements that motivated the properties in <span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>executors</em><a href="#requirements-that-motivated-the-properties-in-p0443r13---executors" class="self-link"></a></h2>
<table>
<caption>requirements</caption>
<colgroup>
<col style="width: 50%"></col>
<col style="width: 50%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>Requirement</strong>
</div></th>
<th><div style="text-align:center">
<strong>Definition</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Extensible</strong></td>
<td>users are able to define their own</td>
</tr>
<tr class="even">
<td><strong>Survivable</strong></td>
<td>passing objects around does not lose information</td>
</tr>
<tr class="odd">
<td><strong>Forwardable</strong></td>
<td>it is possible to write a catch-all that forwards to a contained object</td>
</tr>
<tr class="even">
<td><strong>Overridable</strong></td>
<td>it is possible to modify or block forwarding</td>
</tr>
<tr class="odd">
<td><strong>Defaultable</strong> and <strong>Ignorable</strong></td>
<td>must be able to define a default when not customized and ignore when not customized</td>
</tr>
</tbody>
</table>
<p>(from: <a href="https://github.com/executors/executors/issues/191">github</a>)</p>
<h2 data-number="2.3" id="satisfying-the-requirements" data-number="2.3"><span class="header-section-number">2.3</span> satisfying the requirements<a href="#satisfying-the-requirements" class="self-link"></a></h2>
<table>
<caption>how the requirements are satisfied</caption>
<colgroup>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>Requirement</strong>
</div></th>
<th><div style="text-align:center">
<strong><code class="sourceCode default">tag_invoke</code></strong>
</div></th>
<th><div style="text-align:center">
<strong>Properties</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Extensible</strong></td>
<td>define a new tag function type in a namespace</td>
<td>define a new traits struct in a new namespace</td>
</tr>
<tr class="even">
<td><strong>Survivable</strong></td>
<td>defined as overloads of the <code class="sourceCode default">tag_invoke()</code> function</td>
<td>defined as overloads of <code class="sourceCode default">require()</code>, <code class="sourceCode default">require_concept()</code>, <code class="sourceCode default">prefer()</code>, and <code class="sourceCode default">query()</code> functions</td>
</tr>
<tr class="odd">
<td><strong>Forwardable</strong></td>
<td>a <code class="sourceCode default">tag_invoke()</code> function that does not constrain the namespaced tag function argument</td>
<td><code class="sourceCode default">require()</code>, <code class="sourceCode default">require_concept()</code>, <code class="sourceCode default">prefer()</code>, and <code class="sourceCode default">query()</code> functions that do not constrain the namespaced tag struct argument</td>
</tr>
<tr class="even">
<td><strong>Overridable</strong></td>
<td>a <code class="sourceCode default">tag_invoke()</code> function constrained to a specific namespaced tag function</td>
<td><code class="sourceCode default">require()</code>, <code class="sourceCode default">require_concept()</code>, <code class="sourceCode default">prefer()</code>, and <code class="sourceCode default">query()</code> functions constrained to a specific namespaced tag struct</td>
</tr>
<tr class="odd">
<td><strong>Defaultable</strong> and <strong>Ignorable</strong></td>
<td>the namespaced tag function type has an overload of <code class="sourceCode default">operator()</code> constrained with <code class="sourceCode default">tag_invocable&lt;..&gt; == false</code></td>
<td>the namespaced tag struct overloads <code class="sourceCode default">require()</code>, <code class="sourceCode default">require_concept()</code>, <code class="sourceCode default">prefer()</code>, and <code class="sourceCode default">query()</code> hidden friend functions with the target unconstrained and constrained with <code class="sourceCode default">can_require&lt;..&gt;</code>, <code class="sourceCode default">can_require_concept&lt;..&gt;</code>, <code class="sourceCode default">can_prefer&lt;..&gt;</code>, and <code class="sourceCode default">can_query&lt;..&gt; == false</code></td>
</tr>
</tbody>
</table>
<h2 data-number="2.4" id="p1393r0---properties-contains-a-lot-that-is-not-required" data-number="2.4"><span class="header-section-number">2.4</span> <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em> contains a lot that is not required<a href="#p1393r0---properties-contains-a-lot-that-is-not-required" class="self-link"></a></h2>
<p>Properties has features that were not in the motivating requirements.</p>
<p><strong>Meaning</strong>: A fixed set of functions are defined that operate on properties and each of these functions has a fixed meaning across all properties. The search for meaning, when pairing each property with each function in the fixed set, consumes a lot of committee time.</p>
<p><strong>Polymorphism</strong>: A property defines what return type to use when type-erasing the fixed set of functions that operate on properties. In practice, the author of a property is unlikely to choose a polymorphic type that all users of that property will find satisfying. Also, each concept is expected to author a polymorphic type that implements that concept and supports forwarding of a specified set of properties. Of course, property authors may not be the authors of the concepts in which they traffic. Finally, when a property supports multiple concepts, like all the concepts in <span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>executors</em>, it is unreasonable to provide a polymorphic type that satisfies all the concepts.</p>
<p><strong>Traits</strong>: A property is a struct of traits members. A lot of those members control the <strong>Meaning</strong> and <strong>Polymorphism</strong> features.</p>
<h4 data-number="2.4.0.1" id="meaning" data-number="2.4.0.1"><span class="header-section-number">2.4.0.1</span> Meaning<a href="#meaning" class="self-link"></a></h4>
<p>In <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em> functions are defined to have the same meaning across all properties. Each property selects the meanings that are valid.</p>
<blockquote>
<p>NOTE: these meanings cannot be enforced across all properties.</p>
</blockquote>
<p>The relevant section in <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em>:</p>
<blockquote>
<p>.. each property imposes certain requirements on that object’s behavior or exposes some attribute of that object. As well as modifying the behavior of an object, properties can be applied to an object to enforce the presence of an interface, potentially resulting in an object of a new type that satisfies some concept associated with that property.</p>
</blockquote>
<p>Authors of <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em> have verbally stated various contracts implied by properties for each of require/prefer/query. I do not see any description or enforcement of those contracts in the current paper.</p>
<p>In particular, the excerpt above states that require/prefer/query/require_concept are allowed to mutate the object. This does not match my understanding of the intent of the authors and seems particularly egregious for query. I would expect for all require/prefer/require_concept expressions to only allow const l-value or non-const r-value target objects. query would only allow const l-value target objects. Perhaps this is an oversight and will be remedied in a subsequent revision.</p>
<table>
<caption>best guess at meanings for each of the properties functions</caption>
<colgroup>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>function</strong>
</div></th>
<th><div style="text-align:center">
<strong>meaning</strong>
</div></th>
<th><div style="text-align:center">
<strong>trait members</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code class="sourceCode default">require</code></td>
<td>make a new instance of the target instance that satisfies the supplied property <em>iff</em> the target instance does not satisfy the supplied property, otherwise return the original target instance unchanged</td>
<td><code class="sourceCode default">is_requirable</code>, <code class="sourceCode default">polymorphic_wrapper_type</code></td>
</tr>
<tr class="even">
<td><code class="sourceCode default">prefer</code></td>
<td>make a new instance of the target instance that satisfies the supplied property <em>iff</em> the supplied property is supported by the target and the target instance does not satisfy the supplied property, otherwise return the original target instance unchanged</td>
<td><code class="sourceCode default">is_preferable</code>, <code class="sourceCode default">polymorphic_wrapper_type</code></td>
</tr>
<tr class="odd">
<td><code class="sourceCode default">require_concept</code></td>
<td>make a new instance of a type that satisfies a concept determined by the supplied property <em>iff</em> the target instance does not satisfy the concept determined by the supplied property, otherwise return the original target instance unchanged</td>
<td><code class="sourceCode default">is_requirable_concept</code>, <code class="sourceCode default">polymorphic_wrapper_type</code></td>
</tr>
<tr class="even">
<td><code class="sourceCode default">query</code></td>
<td>return the value of the supplied property that this target instance satisfies</td>
<td><code class="sourceCode default">polymorphic_query_result_type</code>, <code class="sourceCode default">static_query_v</code>, <code class="sourceCode default">value()</code></td>
</tr>
</tbody>
</table>
<h4 data-number="2.4.0.2" id="traits" data-number="2.4.0.2"><span class="header-section-number">2.4.0.2</span> Traits<a href="#traits" class="self-link"></a></h4>
<table>
<caption>traits to define polymorphism, applicability, and the set of functions (meanings) supported for each property</caption>
<colgroup>
<col style="width: 41%"></col>
<col style="width: 58%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>trait member</strong>
</div></th>
<th><div style="text-align:center">
<strong>meaning</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code class="sourceCode default">is_applicable_property_v&lt;T&gt;</code></td>
<td><code class="sourceCode default">true</code> <em>iff</em> <code class="sourceCode default">T</code> is allowed to support this property. In <span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>executors</em> this is always derived from concepts</td>
</tr>
<tr class="even">
<td><code class="sourceCode default">is_requirable_concept</code></td>
<td><code class="sourceCode default">true</code> <em>iff</em> this property can be used with <code class="sourceCode default">require_concept()</code></td>
</tr>
<tr class="odd">
<td><code class="sourceCode default">is_requirable</code></td>
<td><code class="sourceCode default">true</code> <em>iff</em> this property can be used with <code class="sourceCode default">require()</code></td>
</tr>
<tr class="even">
<td><code class="sourceCode default">is_preferable</code></td>
<td><code class="sourceCode default">true</code> <em>iff</em> this property can be used with <code class="sourceCode default">prefer()</code></td>
</tr>
<tr class="odd">
<td><code class="sourceCode default">static_query_v&lt;T&gt;</code></td>
<td>accesses the value that would be returned from a call to <code class="sourceCode default">query()</code> that is targeted on T <em>iff</em> the value has been made available at compile-time.</td>
</tr>
<tr class="even">
<td><code class="sourceCode default">value()</code></td>
<td>provides a value that will be compared to <code class="sourceCode default">static_query_v&lt;T&gt;</code> to “determine whether invoking require or require_concept would result in an identity transformation.” - <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em></td>
</tr>
<tr class="odd">
<td><code class="sourceCode default">polymorphic_wrapper_type&lt;</code> <code class="sourceCode default">SupportableProperties...&gt;</code></td>
<td>defines the polymorphic type for a specific concept. The concept-specific expressions are built-in (like <code class="sourceCode default">execute()</code> for <code class="sourceCode default">any_executor&lt;&gt;</code>)</td>
</tr>
<tr class="even">
<td><code class="sourceCode default">polymorphic_query_result_type</code></td>
<td>defines the result type for <code class="sourceCode default">query</code> when used by any <code class="sourceCode default">polymorphic_wrapper_type&lt;SupportableProperties...&gt;</code> that has the property in <code class="sourceCode default">SupportableProperties...</code>. A wrapper, similar to <code class="sourceCode default">prefer_only&lt;&gt;</code>, must be used to modify the property to override <code class="sourceCode default">polymorphic_query_result_type</code></td>
</tr>
</tbody>
</table>
<p>In addition to the traits, <code class="sourceCode default">prefer_only&lt;&gt;</code> is a wrapper that is used to modify a property so that only <code class="sourceCode default">prefer</code> is allowed. This allows a <code class="sourceCode default">polymorphic_wrapper_type&lt;SupportableProperties...&gt;</code>, that has the modified property in <code class="sourceCode default">SupportableProperties...</code>, to allow a target that does not support that property to be type-erased.</p>
<h2 data-number="2.5" id="p1895r0---tag_invoke-will-compose-additional-functionality" data-number="2.5"><span class="header-section-number">2.5</span> <span class="citation" data-cites="P1895R0">[<a href="#ref-P1895R0" role="doc-biblioref">P1895R0</a>]</span> - <em><code class="sourceCode default">tag_invoke</code></em> will compose additional functionality<a href="#p1895r0---tag_invoke-will-compose-additional-functionality" class="self-link"></a></h2>
<p><code class="sourceCode default">tag_invoke</code> is a mechanism to simplify the creation of new CPOs and to satisfy the requirements that motivated the properties mechanism.</p>
<p><strong>Meaning</strong>: When a new CPO is defined using <code class="sourceCode default">tag_invoke</code>, the meaning is declared in the name of the CPO, just like any other function. names can be built with all of the prefixes and suffixes already in use <code class="sourceCode default">get_</code>, <code class="sourceCode default">is_</code>, <code class="sourceCode default">make_</code>, <code class="sourceCode default">_if</code>, etc.. or without <code class="sourceCode default">empty()</code>, <code class="sourceCode default">clear()</code>, etc..</p>
<p><strong>Polymorphism</strong>: When a new CPO is defined using <code class="sourceCode default">tag_invoke</code>, there is no need to define or implement the polymorphic types. polymorphism is a separate concern with a separate mechanism that is in terms of <code class="sourceCode default">tag_invoke()</code>. This ability to build additional functionality, with composition and layering and without changes to the core spec, is considered an advantage.</p>
<p>polymorphism-per-function allows any CPO that supports <code class="sourceCode default">tag_invoke()</code> to be added to a vtable, including functions like <code class="sourceCode default">execute()</code> that participate in a concept</p>
<p>polymorphism-per-function allows any CPO that supports <code class="sourceCode default">tag_invoke()</code> to be added to a vtable with a user-specified result type (<code class="sourceCode default">variant&lt;..&gt;</code> or <code class="sourceCode default">MyTypeErasedResult</code>).</p>
<p>polymorphism-per-function-overload allows any CPO that supports <code class="sourceCode default">tag_invoke()</code> to be added to a vtable multiple times with differing argument types.</p>
<p><strong>Traits</strong>: When a new CPO is defined using <code class="sourceCode default">tag_invoke</code>, there is no need to define traits to assign meaning or define polymorphism or applicability. std::invocable&lt;CPO, target, Args…&gt; is the test for applicability. The name assigns meaning. Polymorphism is a separate concern.</p>
<h2 data-number="2.6" id="compare-the-mechanisms-defined-in-p1393r0---properties-and-p1895r0---tag_invoke" data-number="2.6"><span class="header-section-number">2.6</span> Compare the mechanisms defined in <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em> and <span class="citation" data-cites="P1895R0">[<a href="#ref-P1895R0" role="doc-biblioref">P1895R0</a>]</span> - <em><code class="sourceCode default">tag_invoke</code></em><a href="#compare-the-mechanisms-defined-in-p1393r0---properties-and-p1895r0---tag_invoke" class="self-link"></a></h2>
<h3 data-number="2.6.1" id="similarities" data-number="2.6.1"><span class="header-section-number">2.6.1</span> Similarities<a href="#similarities" class="self-link"></a></h3>
<table>
<caption>comparison of similarities</caption>
<colgroup>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>topic</strong>
</div></th>
<th><div style="text-align:center">
<strong><span class="citation" data-cites="P1895R0">[<a href="#ref-P1895R0" role="doc-biblioref">P1895R0</a>]</span> - <em><code class="sourceCode default">tag_invoke</code></em></strong>
</div></th>
<th><div style="text-align:center">
<strong><span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em></strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>finite list of globally reserved names</td>
<td><code class="sourceCode default">tag_invoke</code></td>
<td><code class="sourceCode default">require</code>, <code class="sourceCode default">prefer</code>, <code class="sourceCode default">query</code>, <code class="sourceCode default">static_query</code>, and <code class="sourceCode default">require_concept</code></td>
</tr>
<tr class="even">
<td>defined as a namespaced</td>
<td>function object</td>
<td>type</td>
</tr>
<tr class="odd">
<td>find customizations by ADL</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr class="even">
<td>isolate namespaced definitions from ADL concerns</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr class="odd">
<td>transparent forwarding</td>
<td>yes</td>
<td>yes</td>
</tr>
</tbody>
</table>
<blockquote>
<p>NOTE: even with the ADL protections provided by these mechanisms, we have found that each customization defined for these mechanisms must carefully constrain the contexts for which the customization is considered. <em>see <a href="https://twitter.com/kirkshoop/status/1250546552952614913">twitter</a> “… build times for the linked expression from 10min to 10s …”</em>|</p>
</blockquote>
<h3 data-number="2.6.2" id="definitions-and-usage" data-number="2.6.2"><span class="header-section-number">2.6.2</span> Definitions and Usage<a href="#definitions-and-usage" class="self-link"></a></h3>
<table>
<caption>definition mechanisms of tag_invoke functions and properties traits</caption>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>property</strong>
</div></th>
<th><div style="text-align:center">
<strong>tag_invoke functions</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">struct</span> my_property</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="op">{</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="kw">template</span><span class="op">&lt;</span><span class="kw">class</span><span class="op">...</span> Ps<span class="op">&gt;</span> </span>
<span id="cb1-4"><a href="#cb1-4"></a>    <span class="kw">static</span> <span class="kw">constexpr</span> <span class="dt">bool</span> </span>
<span id="cb1-5"><a href="#cb1-5"></a>      is_applicable_property_v;</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a>  <span class="co">/* optional */</span> </span>
<span id="cb1-8"><a href="#cb1-8"></a>  <span class="kw">static</span> <span class="kw">constexpr</span> <span class="dt">bool</span> </span>
<span id="cb1-9"><a href="#cb1-9"></a>    is_requirable_concept <span class="op">=</span> <span class="co">/* ... */</span>;</span>
<span id="cb1-10"><a href="#cb1-10"></a>  </span>
<span id="cb1-11"><a href="#cb1-11"></a>  <span class="co">/* optional */</span> </span>
<span id="cb1-12"><a href="#cb1-12"></a>  <span class="kw">static</span> <span class="kw">constexpr</span> <span class="dt">bool</span> </span>
<span id="cb1-13"><a href="#cb1-13"></a>    is_requirable <span class="op">=</span> <span class="co">/* ... */</span>;</span>
<span id="cb1-14"><a href="#cb1-14"></a>  </span>
<span id="cb1-15"><a href="#cb1-15"></a>  <span class="co">/* optional */</span> </span>
<span id="cb1-16"><a href="#cb1-16"></a>  <span class="kw">static</span> <span class="kw">constexpr</span> <span class="dt">bool</span> </span>
<span id="cb1-17"><a href="#cb1-17"></a>    is_preferable <span class="op">=</span> <span class="co">/* ... */</span>;</span>
<span id="cb1-18"><a href="#cb1-18"></a></span>
<span id="cb1-19"><a href="#cb1-19"></a>  <span class="co">/* optional */</span> </span>
<span id="cb1-20"><a href="#cb1-20"></a>  <span class="kw">template</span><span class="op">&lt;</span><span class="kw">class</span><span class="op">...</span> Ps<span class="op">&gt;</span> </span>
<span id="cb1-21"><a href="#cb1-21"></a>    <span class="kw">class</span> polymorphic_wrapper_type;</span>
<span id="cb1-22"><a href="#cb1-22"></a></span>
<span id="cb1-23"><a href="#cb1-23"></a>  <span class="co">/* optional */</span> </span>
<span id="cb1-24"><a href="#cb1-24"></a>  <span class="kw">using</span> </span>
<span id="cb1-25"><a href="#cb1-25"></a>    polymorphic_query_result_type <span class="op">=</span> <span class="co">/*..*/</span>;</span>
<span id="cb1-26"><a href="#cb1-26"></a></span>
<span id="cb1-27"><a href="#cb1-27"></a>  <span class="co">/* optional */</span> </span>
<span id="cb1-28"><a href="#cb1-28"></a>  <span class="kw">template</span><span class="op">&lt;</span><span class="kw">class</span> T<span class="op">&gt;</span></span>
<span id="cb1-29"><a href="#cb1-29"></a>    <span class="kw">static</span> <span class="kw">constexpr</span> <span class="co">/* ... */</span> </span>
<span id="cb1-30"><a href="#cb1-30"></a>      static_query_v <span class="op">=</span> <span class="co">/* ... */</span>;</span>
<span id="cb1-31"><a href="#cb1-31"></a></span>
<span id="cb1-32"><a href="#cb1-32"></a>  <span class="co">/* optional */</span> </span>
<span id="cb1-33"><a href="#cb1-33"></a>  <span class="kw">static</span> <span class="kw">constexpr</span> <span class="co">/* ... */</span> </span>
<span id="cb1-34"><a href="#cb1-34"></a>    value<span class="op">()</span> <span class="kw">const</span> <span class="op">{</span> <span class="cf">return</span> <span class="co">/* ... */</span>; <span class="op">}</span></span>
<span id="cb1-35"><a href="#cb1-35"></a><span class="op">}</span>;</span></code></pre></div></td>
<td><div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">inline</span> <span class="kw">constexpr</span> <span class="kw">struct</span> my_function_fn <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="kw">template</span><span class="op">&lt;</span><span class="kw">typename</span><span class="op">...</span> Tn<span class="op">&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="kw">auto</span> <span class="kw">operator</span><span class="op">()(</span>Tn<span class="op">&amp;&amp;...</span> tn<span class="op">)</span> <span class="kw">const</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="kw">noexcept</span><span class="op">(</span><span class="kw">noexcept</span><span class="op">(</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>      tbd<span class="op">::</span>tag_invoke<span class="op">(*</span><span class="kw">this</span>, <span class="op">(</span>Tn<span class="op">&amp;&amp;)</span>tn<span class="op">...)))</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>    <span class="op">-&gt;</span> <span class="kw">decltype</span><span class="op">(</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>      tbd<span class="op">::</span>tag_invoke<span class="op">(*</span><span class="kw">this</span>, <span class="op">(</span>Tn<span class="op">&amp;&amp;)</span>tn<span class="op">...))</span> <span class="op">{</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>    <span class="cf">return</span> </span>
<span id="cb2-9"><a href="#cb2-9"></a>      tbd<span class="op">::</span>tag_invoke<span class="op">(*</span><span class="kw">this</span>, <span class="op">(</span>Tn<span class="op">&amp;&amp;)</span>tn<span class="op">...)</span>;</span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="op">}</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="op">}</span> my_function<span class="op">{}</span>;</span></code></pre></div></td>
</tr>
</tbody>
</table>
<table>
<caption>usage of existing properties vs. tag_invoke (example from <span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>executors</em>)</caption>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>properties</strong>
</div></th>
<th><div style="text-align:center">
<strong>tag_invoke functions</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1"></a><span class="co">// obtain an executor</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>executor <span class="kw">auto</span> ex <span class="op">=</span> <span class="op">...</span>;</span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">// require the execute operation to block</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>executor <span class="kw">auto</span> blocking_ex <span class="op">=</span> </span>
<span id="cb3-6"><a href="#cb3-6"></a>  std<span class="op">::</span>require<span class="op">(</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>    ex, execution<span class="op">::</span>blocking<span class="op">.</span>always<span class="op">)</span>;</span>
<span id="cb3-8"><a href="#cb3-8"></a></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">// prefer to execute with a particular </span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">// priority p</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>executor <span class="kw">auto</span> blocking_ex_with_priority <span class="op">=</span> </span>
<span id="cb3-12"><a href="#cb3-12"></a>  std<span class="op">::</span>prefer<span class="op">(</span></span>
<span id="cb3-13"><a href="#cb3-13"></a>    blocking_ex, execution<span class="op">::</span>priority<span class="op">(</span>p<span class="op">))</span>;</span>
<span id="cb3-14"><a href="#cb3-14"></a></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">// execute my blocking, possibly prioritized </span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">// work</span></span>
<span id="cb3-17"><a href="#cb3-17"></a>execution<span class="op">::</span>execute<span class="op">(</span></span>
<span id="cb3-18"><a href="#cb3-18"></a>  blocking_ex_with_priority, work<span class="op">)</span>;</span></code></pre></div></td>
<td><div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">// obtain an executor</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>executor <span class="kw">auto</span> ex <span class="op">=</span> <span class="op">...</span>;</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">// require the execute operation to block </span></span>
<span id="cb4-5"><a href="#cb4-5"></a>executor <span class="kw">auto</span> blocking_ex <span class="op">=</span> </span>
<span id="cb4-6"><a href="#cb4-6"></a>  execution<span class="op">::</span>make_with_blocking<span class="op">(</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>    ex, execution<span class="op">::</span>always_blocking<span class="op">)</span>;</span>
<span id="cb4-8"><a href="#cb4-8"></a></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">// prefer to execute with a particular </span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">// priority p</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>executor <span class="kw">auto</span> blocking_ex_with_priority <span class="op">=</span> </span>
<span id="cb4-12"><a href="#cb4-12"></a>  tbd<span class="op">::</span>prefer<span class="op">(</span>execution<span class="op">::</span>make_with_priority, </span>
<span id="cb4-13"><a href="#cb4-13"></a>    blocking_ex, p<span class="op">)</span>;</span>
<span id="cb4-14"><a href="#cb4-14"></a></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co">// execute my blocking, possibly prioritized</span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="co">// work</span></span>
<span id="cb4-17"><a href="#cb4-17"></a>execution<span class="op">::</span>execute<span class="op">(</span></span>
<span id="cb4-18"><a href="#cb4-18"></a>  blocking_ex_with_priority, work<span class="op">)</span>;</span></code></pre></div></td>
</tr>
</tbody>
</table>
<table>
<caption>forwarding of arbitrary properties vs. tag_invoke (example from <span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>executors</em>)</caption>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>properties</strong>
</div></th>
<th><div style="text-align:center">
<strong>tag_invoke functions</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><div class="sourceCode" id="cb5"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">...</span> SupportedProperties<span class="op">&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw">struct</span> Any <span class="op">{</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">class</span> Property<span class="op">&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  Property<span class="op">::</span>polymorphic_wrapper_type<span class="op">&lt;</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>    SupportedProperties<span class="op">...&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>  require_concept<span class="op">(</span>Property p<span class="op">)</span> <span class="kw">const</span> <span class="op">{</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>    <span class="cf">return</span> </span>
<span id="cb5-8"><a href="#cb5-8"></a>      Property<span class="op">::</span>polymorphic_wrapper_type<span class="op">&lt;</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>        SupportedProperties<span class="op">...&gt;{</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>          std<span class="op">::</span>require<span class="op">(</span>t_, p<span class="op">)</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>        <span class="op">}</span>;</span>
<span id="cb5-12"><a href="#cb5-12"></a>  <span class="op">}</span></span>
<span id="cb5-13"><a href="#cb5-13"></a></span>
<span id="cb5-14"><a href="#cb5-14"></a>  <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">class</span> Property<span class="op">&gt;</span></span>
<span id="cb5-15"><a href="#cb5-15"></a>  Any require<span class="op">(</span>Property p<span class="op">)</span> <span class="kw">const</span> <span class="op">{</span></span>
<span id="cb5-16"><a href="#cb5-16"></a>    <span class="cf">return</span> Any<span class="op">{</span>std<span class="op">::</span>require<span class="op">(</span>t_, p<span class="op">)}</span>;</span>
<span id="cb5-17"><a href="#cb5-17"></a>  <span class="op">}</span></span>
<span id="cb5-18"><a href="#cb5-18"></a></span>
<span id="cb5-19"><a href="#cb5-19"></a>  <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">class</span> Property<span class="op">&gt;</span></span>
<span id="cb5-20"><a href="#cb5-20"></a>  Any prefer<span class="op">(</span>Property p<span class="op">)</span> <span class="kw">const</span> <span class="op">{</span></span>
<span id="cb5-21"><a href="#cb5-21"></a>    <span class="cf">return</span> Any<span class="op">{</span>std<span class="op">::</span>require<span class="op">(</span>t_, p<span class="op">)}</span>;</span>
<span id="cb5-22"><a href="#cb5-22"></a>  <span class="op">}</span></span>
<span id="cb5-23"><a href="#cb5-23"></a></span>
<span id="cb5-24"><a href="#cb5-24"></a>  <span class="kw">template</span> <span class="op">&lt;</span><span class="kw">class</span> Property<span class="op">&gt;</span></span>
<span id="cb5-25"><a href="#cb5-25"></a>  <span class="kw">typename</span> </span>
<span id="cb5-26"><a href="#cb5-26"></a>    Property<span class="op">::</span>polymorphic_query_result_type </span>
<span id="cb5-27"><a href="#cb5-27"></a>  query<span class="op">(</span>Property p<span class="op">)</span> <span class="kw">const</span> <span class="op">{</span></span>
<span id="cb5-28"><a href="#cb5-28"></a>    <span class="cf">return</span> std<span class="op">::</span>query<span class="op">(</span>t_, p<span class="op">)}</span>;</span>
<span id="cb5-29"><a href="#cb5-29"></a>  <span class="op">}</span></span>
<span id="cb5-30"><a href="#cb5-30"></a><span class="op">}</span>;</span></code></pre></div></td>
<td><div class="sourceCode" id="cb6"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">...</span> Cpos<span class="op">&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="kw">struct</span> Any <span class="op">{</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="kw">template</span><span class="op">&lt;</span><span class="kw">typename</span> Tag, <span class="kw">typename</span> Tn<span class="op">...&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="kw">friend</span> <span class="kw">auto</span> tag_invoke<span class="op">(</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>    Tag tag, </span>
<span id="cb6-6"><a href="#cb6-6"></a>    <span class="kw">const</span> Any<span class="op">&amp;</span> self, </span>
<span id="cb6-7"><a href="#cb6-7"></a>    Tn<span class="op">&amp;&amp;...</span> tn<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>    <span class="cf">return</span> tbd<span class="op">::</span>tag_invoke<span class="op">(</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>      tag, self<span class="op">.</span>t_, <span class="op">(</span>Tn<span class="op">&amp;&amp;)</span>tn<span class="op">...)</span>;</span>
<span id="cb6-10"><a href="#cb6-10"></a>  <span class="op">}</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="op">}</span>;</span></code></pre></div></td>
</tr>
</tbody>
</table>
<table>
<caption>customizing known properties vs. tag_invoke (example from <span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>executors</em>)</caption>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>properties</strong>
</div></th>
<th><div style="text-align:center">
<strong>tag_invoke functions</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><div class="sourceCode" id="cb7"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">struct</span> C <span class="op">{</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="kw">auto</span> require<span class="op">(</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>    <span class="kw">const</span> execution<span class="op">::</span>allocator_t<span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;&amp;</span> a</span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="op">)</span> <span class="kw">const</span>;</span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="kw">template</span><span class="op">&lt;</span><span class="kw">class</span> PAlloc<span class="op">&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="kw">auto</span> require<span class="op">(</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>    <span class="kw">const</span> execution<span class="op">::</span>allocator_t<span class="op">&lt;</span>PAlloc<span class="op">&gt;&amp;</span> a</span>
<span id="cb7-8"><a href="#cb7-8"></a>  <span class="op">)</span> <span class="kw">const</span>;</span>
<span id="cb7-9"><a href="#cb7-9"></a></span>
<span id="cb7-10"><a href="#cb7-10"></a>  <span class="kw">auto</span> query<span class="op">(</span>execution<span class="op">::</span>context_t</span>
<span id="cb7-11"><a href="#cb7-11"></a>  <span class="op">)</span> <span class="kw">const</span> <span class="kw">noexcept</span>;</span>
<span id="cb7-12"><a href="#cb7-12"></a>  <span class="kw">auto</span> query<span class="op">(</span>execution<span class="op">::</span>allocator_t<span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span></span>
<span id="cb7-13"><a href="#cb7-13"></a>  <span class="op">)</span> <span class="kw">const</span> <span class="kw">noexcept</span>;</span>
<span id="cb7-14"><a href="#cb7-14"></a>  <span class="kw">template</span><span class="op">&lt;</span><span class="kw">class</span> ProtoAllocator<span class="op">&gt;</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>  <span class="kw">auto</span> query<span class="op">(</span></span>
<span id="cb7-16"><a href="#cb7-16"></a>    execution<span class="op">::</span>allocator_t<span class="op">&lt;</span>ProtoAllocator<span class="op">&gt;</span></span>
<span id="cb7-17"><a href="#cb7-17"></a>  <span class="op">)</span> <span class="kw">const</span> <span class="kw">noexcept</span>;</span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="op">}</span>;</span></code></pre></div></td>
<td><div class="sourceCode" id="cb8"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">struct</span> C <span class="op">{</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="kw">template</span><span class="op">&lt;</span>allocator A<span class="op">&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="kw">friend</span> <span class="kw">auto</span> tag_invoke<span class="op">(</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>    tbd<span class="op">::</span>make_with_allocator tag, </span>
<span id="cb8-5"><a href="#cb8-5"></a>    <span class="kw">const</span> C<span class="op">&amp;</span> self, </span>
<span id="cb8-6"><a href="#cb8-6"></a>    A<span class="op">&amp;&amp;</span> a<span class="op">)</span> <span class="op">{</span><span class="co">/*..*/</span><span class="op">}</span></span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="kw">friend</span> <span class="kw">auto</span> tag_invoke<span class="op">(</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>    execution<span class="op">::</span>get_context tag, </span>
<span id="cb8-10"><a href="#cb8-10"></a>    <span class="kw">const</span> C<span class="op">&amp;</span> self<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span><span class="co">/*..*/</span><span class="op">}</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>  <span class="kw">friend</span> <span class="kw">auto</span> tag_invoke<span class="op">(</span></span>
<span id="cb8-12"><a href="#cb8-12"></a>    tbd<span class="op">::</span>get_allocator tag, </span>
<span id="cb8-13"><a href="#cb8-13"></a>    <span class="kw">const</span> C<span class="op">&amp;</span> self<span class="op">)</span> <span class="kw">noexcept</span> <span class="op">{</span><span class="co">/*..*/</span><span class="op">}</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="op">}</span>;</span></code></pre></div></td>
</tr>
</tbody>
</table>
<h2 data-number="2.7" id="behavioral-properties-are-values-and-implement-type-erasure" data-number="2.7"><span class="header-section-number">2.7</span> Behavioral properties are values and implement type-erasure<a href="#behavioral-properties-are-values-and-implement-type-erasure" class="self-link"></a></h2>
<p><span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>executors</em> defines several properties that model <em>behvioural-properties</em>. blocking, mapping, relationship, outstanding_work all model <em>behvioural-properties</em>.</p>
<p><span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>2.2.12 Behavioral properties</em> defines a pattern of using behaviour properties nested in a group property type. All of the properties are value types that model <em>equality-comparable</em>. The group property is additionally a type-eraser that can be constructed from any of the nested behaviour properties.</p>
<p>The implementation in asio uses an integer to represent which nested behaviour property value was used to construct a particular group property value.</p>
<p>This is a novel pattern. It is unclear whether it would be possible to add new nested properties to the standard over time. It is unclear how a user or library would be able to add additional nested properties without changing the standard. It is unclear what the ABI impact of a new nested property would have on the type-erasing group properties.</p>
<h2 data-number="2.8" id="stdexecutionallocator_t" data-number="2.8"><span class="header-section-number">2.8</span> std::execution::allocator_t&lt;&gt;<a href="#stdexecutionallocator_t" class="self-link"></a></h2>
<p>Questions arise out of the allocator property.</p>
<p>What does it mean to <code class="sourceCode default">require(t, std::execution::allocator(my_allocator))</code>?</p>
<p>options:</p>
<ol type="1">
<li>mutate <code class="sourceCode default">t</code> and force it to reallocate the contents with the specified allocator</li>
<li>copy <code class="sourceCode default">t</code> and allocate the contents of the copy with the specified allocator</li>
<li>construct a new ‘default’ <code class="sourceCode default">T</code> so that it will use the specified allocator</li>
<li><code class="sourceCode default">T</code> is a reference type and constructs a new reference that uses the specified allocator locally. The target of the reference is not changed or notified.</li>
</ol>
<p>Only case 4 has been explored. An executor is a reference to an execution context. Case 4 would not be appropriate for a <code class="sourceCode default">vector&lt;&gt;</code> and this use <code class="sourceCode default">require(vector&lt;&gt;, allocator)</code>, has not been explored.</p>
<p>What does it mean to <code class="sourceCode default">query(myvector, std::execution::allocator)</code>?</p>
<ol type="1">
<li>compile error because <code class="sourceCode default">std::execution::allocator::is_applicable_property&lt;T&gt;</code> requires <code class="sourceCode default">executor&lt;T&gt;</code> to be true?</li>
<li>call <code class="sourceCode default">T::get_allocator()</code> if it exists?</li>
</ol>
<p>It is unclear that such a general property as <code class="sourceCode default">allocator_t</code> should be namespaced in <code class="sourceCode default">std::execution</code> and restricted to only work when <code class="sourceCode default">T</code> is an executor.</p>
<h1 data-number="3" id="changes" data-number="3"><span class="header-section-number">3</span> Changes<a href="#changes" class="self-link"></a></h1>
<h2 data-number="3.1" id="naming-customization-points" data-number="3.1"><span class="header-section-number">3.1</span> Naming customization points<a href="#naming-customization-points" class="self-link"></a></h2>
<p>Changing the existing properties in <span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>executors</em> into tag_invoke functions will involve renaming and refactoring them.</p>
<p>tag_invoke CPO’s are designed and named as any other function is named. properties have a different naming model in that the name must compose with the fixed set of functions defined in <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em>.</p>
<blockquote>
<p>Note: I did not find a way in <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em> to disable <code class="sourceCode default">query</code> for a property. Thus the two-property options listed below define <code class="sourceCode default">query</code> for both properties and it is sometimes unclear what query would mean for one of the properties.</p>
</blockquote>
<p>To convey the difference, here are two familiar patterns from the standard library and some options for defining them as properties.</p>
<p><strong>Pattern A</strong>: the <code class="sourceCode default">c.empty()</code> and <code class="sourceCode default">c.clear()</code> methods on a container, like vector. To be customizable, these might be defined as the tag_invoke functions <code class="sourceCode default">is_empty(c)</code> and <code class="sourceCode default">clear(c)</code>. Two options for how these functions could be expressed as properties are shown. The single property version is how the existing properties are structured.</p>
<table>
<caption>naming is_empty() and clear() tag_invoke functions vs. a single property named empty</caption>
<colgroup>
<col style="width: 18%"></col>
<col style="width: 27%"></col>
<col style="width: 18%"></col>
<col style="width: 18%"></col>
<col style="width: 18%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>function</strong>
</div></th>
<th style="text-align: right;"></th>
<th><div style="text-align:center">
<strong>query</strong>
</div></th>
<th><div style="text-align:center">
<strong>requires</strong>
</div></th>
<th><div style="text-align:center">
<strong>prefer</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code class="sourceCode default">is_empty(t)</code> &amp; <code class="sourceCode default">clear(t)</code></td>
<td style="text-align: right;">vs</td>
<td><code class="sourceCode default">query(t,</code> <code class="sourceCode default">empty)</code></td>
<td><code class="sourceCode default">requires(t,</code> <code class="sourceCode default">empty)</code></td>
<td><code class="sourceCode default">prefer(t,</code> <code class="sourceCode default">empty)</code></td>
</tr>
</tbody>
</table>
<table>
<caption>naming is_empty() and clear() functions vs. is_empty and clear properties</caption>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>function</strong>
</div></th>
<th style="text-align: right;"></th>
<th><div style="text-align:center">
<strong>query</strong>
</div></th>
<th><div style="text-align:center">
<strong>requires</strong>
</div></th>
<th><div style="text-align:center">
<strong>prefer</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code class="sourceCode default">is_empty(t)</code></td>
<td style="text-align: right;">vs</td>
<td><code class="sourceCode default">query(t,</code> <code class="sourceCode default">is_empty)</code></td>
<td>x</td>
<td>x</td>
</tr>
<tr class="even">
<td><code class="sourceCode default">clear(t)</code></td>
<td style="text-align: right;">vs</td>
<td><code class="sourceCode default">query(t,</code> <code class="sourceCode default">clear)</code></td>
<td><code class="sourceCode default">requires(t,</code> <code class="sourceCode default">clear)</code></td>
<td><code class="sourceCode default">prefer(t,</code> <code class="sourceCode default">clear)</code></td>
</tr>
</tbody>
</table>
<p><strong>Pattern B</strong>: the <code class="sourceCode default">c.get_allocator()</code> method and <code class="sourceCode default">C(allocator)</code> constructor on a container, like <code class="sourceCode default">vector&lt;&gt;</code>. To be customizable, these might be defined as the tag_invoke functions <code class="sourceCode default">get_allocator(c)</code> and <code class="sourceCode default">make_with_allocator(c, a)</code>. Two options for how this function and constructor could be expressed as properties are shown. The single property version is how the existing properties are structured.</p>
<table>
<caption>naming get_allocator() and make_with_allocator() functions vs. a single property named allocator</caption>
<colgroup>
<col style="width: 18%"></col>
<col style="width: 27%"></col>
<col style="width: 18%"></col>
<col style="width: 18%"></col>
<col style="width: 18%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>function</strong>
</div></th>
<th style="text-align: right;"></th>
<th><div style="text-align:center">
<strong>query</strong>
</div></th>
<th><div style="text-align:center">
<strong>requires</strong>
</div></th>
<th><div style="text-align:center">
<strong>prefer</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code class="sourceCode default">get_allocator(t)</code> &amp; <code class="sourceCode default">make_with_allocator(</code> <code class="sourceCode default">t, a)</code></td>
<td style="text-align: right;">vs</td>
<td><code class="sourceCode default">query(t,</code> <code class="sourceCode default">allocator)</code></td>
<td><code class="sourceCode default">requires(t,</code> <code class="sourceCode default">allocator(a))</code></td>
<td><code class="sourceCode default">prefer(t,</code> <code class="sourceCode default">allocator(a))</code></td>
</tr>
</tbody>
</table>
<table>
<caption>naming get_allocator() and make_with_allocator() functions vs. get_allocator and with_allocator properties</caption>
<colgroup>
<col style="width: 18%"></col>
<col style="width: 27%"></col>
<col style="width: 18%"></col>
<col style="width: 18%"></col>
<col style="width: 18%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>function</strong>
</div></th>
<th style="text-align: right;"></th>
<th><div style="text-align:center">
<strong>query</strong>
</div></th>
<th><div style="text-align:center">
<strong>requires</strong>
</div></th>
<th><div style="text-align:center">
<strong>prefer</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code class="sourceCode default">get_allocator(t)</code></td>
<td style="text-align: right;">vs</td>
<td><code class="sourceCode default">query(t,</code> <code class="sourceCode default">get_allocator)</code></td>
<td>x</td>
<td>x</td>
</tr>
<tr class="even">
<td><code class="sourceCode default">make_with_allocator(</code> <code class="sourceCode default">t, a)</code></td>
<td style="text-align: right;">vs</td>
<td><code class="sourceCode default">query(t,</code> <code class="sourceCode default">with_allocator(a))</code></td>
<td><code class="sourceCode default">requires(t,</code> <code class="sourceCode default">with_allocator(a))</code></td>
<td><code class="sourceCode default">prefer(t,</code> <code class="sourceCode default">with_allocator(a))</code></td>
</tr>
</tbody>
</table>
<h2 data-number="3.2" id="remove-dependencies-on-prefer" data-number="3.2"><span class="header-section-number">3.2</span> remove dependencies on prefer<a href="#remove-dependencies-on-prefer" class="self-link"></a></h2>
<p><code class="sourceCode default">prefer</code> is intended to simplify the boilerplate needed to apply a function only if it is supported by the target.</p>
<p>This support does not need to be included in tag_invoke. It can be implemented in terms of <code class="sourceCode default">tag_invoke</code>. This ability to build additional functionality, with composition and layering and without changes to the core spec, is considered an advantage.</p>
<table>
<caption>prefer usage comparison</caption>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>properties</strong>
</div></th>
<th><div style="text-align:center">
<strong>tag_invoke functions</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><div class="sourceCode" id="cb9"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb9-1"><a href="#cb9-1"></a>executor <span class="kw">auto</span> blocking_ex_with_priority <span class="op">=</span> </span>
<span id="cb9-2"><a href="#cb9-2"></a>  std<span class="op">::</span>prefer<span class="op">(</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>    blocking_ex, execution<span class="op">::</span>priority<span class="op">(</span>p<span class="op">))</span>;</span></code></pre></div></td>
<td><div class="sourceCode" id="cb10"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1"></a>executor <span class="kw">auto</span> blocking_ex_with_priority <span class="op">=</span> </span>
<span id="cb10-2"><a href="#cb10-2"></a>  tbd<span class="op">::</span>prefer<span class="op">(</span>execution<span class="op">::</span>make_with_priority, </span>
<span id="cb10-3"><a href="#cb10-3"></a>    blocking_ex, p<span class="op">)</span>;</span></code></pre></div></td>
</tr>
</tbody>
</table>
<h3 data-number="3.2.1" id="implementation" data-number="3.2.1"><span class="header-section-number">3.2.1</span> Implementation<a href="#implementation" class="self-link"></a></h3>
<p>Here is an implementation of the prefer CPO in terms of tag_invoke.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">inline</span> <span class="kw">constexpr</span> <span class="kw">struct</span> prefer_fn <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="co">// allow target to customize prefer</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="kw">template</span><span class="op">&lt;</span><span class="kw">typename</span> Tag, <span class="kw">typename</span><span class="op">...</span> Tn<span class="op">&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="kw">auto</span> <span class="kw">operator</span><span class="op">()(</span>Tag<span class="op">&amp;&amp;</span> tag, Tn<span class="op">&amp;&amp;...</span> tn<span class="op">)</span> <span class="kw">const</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>    <span class="kw">noexcept</span><span class="op">(</span><span class="kw">noexcept</span><span class="op">(</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>      tbd<span class="op">::</span>tag_invoke<span class="op">(*</span><span class="kw">this</span>, tag, <span class="op">(</span>Tn<span class="op">&amp;&amp;)</span>tn<span class="op">...)))</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>    <span class="op">-&gt;</span> <span class="kw">decltype</span><span class="op">(</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>      tbd<span class="op">::</span>tag_invoke<span class="op">(*</span><span class="kw">this</span>, tag, <span class="op">(</span>Tn<span class="op">&amp;&amp;)</span>tn<span class="op">...))</span> <span class="op">{</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>    <span class="cf">return</span> </span>
<span id="cb11-10"><a href="#cb11-10"></a>      tbd<span class="op">::</span>tag_invoke<span class="op">(*</span><span class="kw">this</span>, tag, <span class="op">(</span>Tn<span class="op">&amp;&amp;)</span>tn<span class="op">...)</span>;</span>
<span id="cb11-11"><a href="#cb11-11"></a>  <span class="op">}</span></span>
<span id="cb11-12"><a href="#cb11-12"></a>  <span class="co">// allow target to customize Tag</span></span>
<span id="cb11-13"><a href="#cb11-13"></a>  <span class="kw">template</span><span class="op">&lt;</span><span class="kw">typename</span> Tag, <span class="kw">typename</span><span class="op">...</span> Tn<span class="op">&gt;</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>    require <span class="op">!</span>tbd<span class="op">::</span>tag_invocable<span class="op">&lt;</span>prefer_fn, Tag, Tn<span class="op">...&gt;</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>  <span class="kw">auto</span> <span class="kw">operator</span><span class="op">()(</span>Tag<span class="op">&amp;&amp;</span> tag, Tn<span class="op">&amp;&amp;...</span> tn<span class="op">)</span> <span class="kw">const</span></span>
<span id="cb11-16"><a href="#cb11-16"></a>    <span class="kw">noexcept</span><span class="op">(</span><span class="kw">noexcept</span><span class="op">(</span></span>
<span id="cb11-17"><a href="#cb11-17"></a>      tbd<span class="op">::</span>tag_invoke<span class="op">(</span>tag, <span class="op">(</span>Tn<span class="op">&amp;&amp;)</span>tn<span class="op">...)))</span></span>
<span id="cb11-18"><a href="#cb11-18"></a>    <span class="op">-&gt;</span> <span class="kw">decltype</span><span class="op">(</span></span>
<span id="cb11-19"><a href="#cb11-19"></a>      tbd<span class="op">::</span>tag_invoke<span class="op">(</span>tag, <span class="op">(</span>Tn<span class="op">&amp;&amp;)</span>tn<span class="op">...))</span> <span class="op">{</span></span>
<span id="cb11-20"><a href="#cb11-20"></a>    <span class="cf">return</span> </span>
<span id="cb11-21"><a href="#cb11-21"></a>      tbd<span class="op">::</span>tag_invoke<span class="op">(</span>tag, <span class="op">(</span>Tn<span class="op">&amp;&amp;)</span>tn<span class="op">...)</span>;</span>
<span id="cb11-22"><a href="#cb11-22"></a>  <span class="op">}</span></span>
<span id="cb11-23"><a href="#cb11-23"></a>  <span class="co">// Fallback to return target unchanged when the target does not </span></span>
<span id="cb11-24"><a href="#cb11-24"></a>  <span class="co">// customize prefer or Tag</span></span>
<span id="cb11-25"><a href="#cb11-25"></a>  <span class="kw">template</span><span class="op">&lt;</span><span class="kw">typename</span> Tag, <span class="kw">typename</span> T0, <span class="kw">typename</span><span class="op">...</span> Tn<span class="op">&gt;</span></span>
<span id="cb11-26"><a href="#cb11-26"></a>    require <span class="op">!</span>tbd<span class="op">::</span>tag_invocable<span class="op">&lt;</span>prefer_fn, Tag, T0, Tn<span class="op">...&gt;</span> <span class="op">&amp;&amp;</span></span>
<span id="cb11-27"><a href="#cb11-27"></a>            <span class="op">!</span>tbd<span class="op">::</span>tag_invocable<span class="op">&lt;</span>Tag, T0, Tn<span class="op">...&gt;</span></span>
<span id="cb11-28"><a href="#cb11-28"></a>  <span class="kw">auto</span> <span class="kw">operator</span><span class="op">()(</span>Tag<span class="op">&amp;&amp;</span>, T0<span class="op">&amp;&amp;</span> t0, Tn<span class="op">&amp;&amp;...)</span> <span class="kw">const</span></span>
<span id="cb11-29"><a href="#cb11-29"></a>    <span class="kw">noexcept</span></span>
<span id="cb11-30"><a href="#cb11-30"></a>    <span class="op">-&gt;</span> T0 <span class="op">{</span></span>
<span id="cb11-31"><a href="#cb11-31"></a>    <span class="cf">return</span> t0;</span>
<span id="cb11-32"><a href="#cb11-32"></a>  <span class="op">}</span></span>
<span id="cb11-33"><a href="#cb11-33"></a><span class="op">}</span> prefer<span class="op">{}</span>;</span></code></pre></div>
<h2 data-number="3.3" id="remove-any_executor" data-number="3.3"><span class="header-section-number">3.3</span> remove <code class="sourceCode default">any_executor</code><a href="#remove-any_executor" class="self-link"></a></h2>
<p>The <code class="sourceCode default">any_executor</code> type is a polymorphic wrapper for an executor. <code class="sourceCode default">any_executor</code> is tightly integrated with properties. This integration allows a user-specified list of properties to be forwarded through to the wrapped executor. Each property defines a polymorphic type for the result of <code class="sourceCode default">query</code> and a polymorphic wrapper type for the result of <code class="sourceCode default">require</code>.</p>
<p>In <span class="citation" data-cites="P1895R0">[<a href="#ref-P1895R0" role="doc-biblioref">P1895R0</a>]</span> - <em><code class="sourceCode default">tag_invoke</code></em>, type-erasure is described such that multiple overloads of any tag_invoke function can be forwarded to a wrapped object. There is no distinction between queries and algorithms and concept basis functions, all use the same mechanism to build a vtable on a generic implementation. This allows a single type <code class="sourceCode default">any_unique</code>, <code class="sourceCode default">any_ref</code>, user-defined-type-eraser, etc.. to represent any concept that can be defined in terms of tag_invoke expressions.</p>
<p>Given the <code class="sourceCode default">any_unique</code> implementation referenced in <span class="citation" data-cites="P1895R0">[<a href="#ref-P1895R0" role="doc-biblioref">P1895R0</a>]</span> - <em><code class="sourceCode default">tag_invoke</code></em> (<em>see</em> <a href="https://godbolt.org/z/3TvO4f">godbolt</a>), the following definition of <code class="sourceCode default">any_executor_unique</code> would provide an implementation that, with the other changes in this paper, would enable polymorphic wrapping for the executor concept and any other tag_invoke function overloads added to the list.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> Function<span class="op">&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="kw">using</span> execute_o <span class="op">=</span> std<span class="op">::</span>tag_t<span class="op">&lt;</span>tbd<span class="op">::</span>overload<span class="op">&lt;</span><span class="dt">void</span><span class="op">(</span>this_<span class="op">&amp;&amp;</span>, Function<span class="op">)&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="op">(</span>execution<span class="op">::</span>execute<span class="op">)&gt;</span>;</span>
<span id="cb12-4"><a href="#cb12-4"></a></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">...</span> OverloadN<span class="op">&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="kw">using</span> any_executor_unique <span class="op">=</span> any_unique<span class="op">&lt;</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>  execute_o<span class="op">&lt;</span>std<span class="op">::</span>function<span class="op">&gt;</span>,</span>
<span id="cb12-8"><a href="#cb12-8"></a>  execute_o<span class="op">&lt;</span><span class="dt">void</span><span class="op">(*)()&gt;</span>,</span>
<span id="cb12-9"><a href="#cb12-9"></a>  OverloadN<span class="op">...&gt;</span>;</span></code></pre></div>
<p>There is also an implementation of <code class="sourceCode default">any_ref</code> in a fork of asio (<em>see</em> <a href="https://github.com/kirkshoop/asio/tree/properties">github</a>). This branch allows <code class="sourceCode default">any_executor_ref</code> to be defined as.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">...</span> OverloadN<span class="op">&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="kw">using</span> any_executor_ref <span class="op">=</span> asio<span class="op">::</span>tag_invokes<span class="op">::</span>any_ref<span class="op">&lt;</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  execute_o_t<span class="op">&lt;</span>std<span class="op">::</span>function<span class="op">&gt;</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>  execute_o_t<span class="op">&lt;</span><span class="dt">void</span><span class="op">(*)()&gt;</span>,</span>
<span id="cb13-5"><a href="#cb13-5"></a>  OverloadN<span class="op">...&gt;</span>;</span></code></pre></div>
<p>Some codebases have their own polymorphic function wrapper (such as <code class="sourceCode default">folly::Function</code>). This approach allows that wrapper to be punched through without converting it to a <code class="sourceCode default">std::function</code> by creating an overload of execute for <code class="sourceCode default">folly::Function</code> that has a separate vtable entry.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">...</span> OverloadN<span class="op">&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw">using</span> folly_any_executor_ref <span class="op">=</span> any_executor_ref<span class="op">&lt;</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>  execute_o_t<span class="op">&lt;</span>folly<span class="op">::</span>Function<span class="op">&gt;</span>,</span>
<span id="cb14-4"><a href="#cb14-4"></a>  OverloadN<span class="op">...&gt;</span>;</span></code></pre></div>
<p>overloading of the tag_invoke functions that this paper proposes, to replace the properties defined in <span class="citation" data-cites="P0443R13">[<a href="#ref-P0443R13" role="doc-biblioref">P0443R13</a>]</span> - <em>executors</em>, is supported the same way as the basis function overloads.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span><span class="op">...</span> OverloadN<span class="op">&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="kw">using</span> my_any_executor_ref <span class="op">=</span> any_executor_ref<span class="op">&lt;</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>  execution<span class="op">::</span>get_blocking_o_t<span class="op">&lt;&gt;</span>,</span>
<span id="cb15-4"><a href="#cb15-4"></a>  execution<span class="op">::</span>make_with_blocking_o_t<span class="op">&lt;</span></span>
<span id="cb15-5"><a href="#cb15-5"></a>    any_executor_ref<span class="op">&lt;</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>      execution<span class="op">::</span>get_blocking_o_t<span class="op">&lt;&gt;&gt;</span>,</span>
<span id="cb15-7"><a href="#cb15-7"></a>    <span class="kw">decltype</span><span class="op">(</span>execution<span class="op">::</span>always_blocking<span class="op">)</span></span>
<span id="cb15-8"><a href="#cb15-8"></a>  <span class="op">&gt;</span>,</span>
<span id="cb15-9"><a href="#cb15-9"></a>  execution<span class="op">::</span>make_with_blocking_o_t<span class="op">&lt;</span></span>
<span id="cb15-10"><a href="#cb15-10"></a>    any_executor_ref<span class="op">&lt;</span></span>
<span id="cb15-11"><a href="#cb15-11"></a>      execution<span class="op">::</span>get_blocking_o_t<span class="op">&lt;&gt;&gt;</span>,</span>
<span id="cb15-12"><a href="#cb15-12"></a>    <span class="kw">decltype</span><span class="op">(</span>execution<span class="op">::</span>never_blocking<span class="op">)</span></span>
<span id="cb15-13"><a href="#cb15-13"></a>  <span class="op">&gt;</span>,</span>
<span id="cb15-14"><a href="#cb15-14"></a>  OverloadN<span class="op">...&gt;</span>;</span></code></pre></div>
<p>This paper will not try to define the <code class="sourceCode default">any_unique</code>, <code class="sourceCode default">any_ref</code>, or <code class="sourceCode default">any_executor</code> types in wording. Instead this paper will remove <code class="sourceCode default">any_executor</code> so that it can be defined in terms of <code class="sourceCode default">any_unique</code>/<code class="sourceCode default">any_ref</code>/etc.. when available and by user defined type-erasure until general type-erasure ships in the standard.</p>
<h2 data-number="3.4" id="move-2.4.2-struct-prefer_only-to-p1393r0---properties" data-number="3.4"><span class="header-section-number">3.4</span> move <em>2.4.2 Struct prefer_only</em> to <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span> - <em>properties</em><a href="#move-2.4.2-struct-prefer_only-to-p1393r0---properties" class="self-link"></a></h2>
<p><code class="sourceCode default">prefer_only</code> is part of the polymorphic support for properties in general. There is nothing executor specific about this type.</p>
<h2 data-number="3.5" id="modify-section-2.2.11.1-associated-execution-context-property" data-number="3.5"><span class="header-section-number">3.5</span> Modify section <em>2.2.11.1 Associated execution context property</em><a href="#modify-section-2.2.11.1-associated-execution-context-property" class="self-link"></a></h2>
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Associated execution context <span class="rm" style="color: #bf0303"><del>property</del></span><span class="add" style="color: #006e28"><ins>tag function</ins></span></p>
<div>
<div class="sourceCode" id="cb16"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb16-1"><a href="#cb16-1"></a><span class="st">-struct context_t</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="st">-{</span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="st">-  template &lt;class T&gt;</span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="st">-    static constexpr bool is_applicable_property_v = executor&lt;T&gt;;</span></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="st">-</span></span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="st">-  static constexpr bool is_requirable = false;</span></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="st">-  static constexpr bool is_preferable = false;</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="st">-</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="st">-  using polymorphic_query_result_type = any;</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="st">-</span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="st">-  template&lt;class Executor&gt;</span></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="st">-    static constexpr decltype(auto) static_query_v</span></span>
<span id="cb16-13"><a href="#cb16-13"></a><span class="st">-      = Executor::query(context_t());</span></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="st">-};</span></span>
<span id="cb16-15"><a href="#cb16-15"></a><span class="va">+inline constexpr struct get_context_t {</span></span>
<span id="cb16-16"><a href="#cb16-16"></a><span class="va">+  template&lt;typename T&gt;</span></span>
<span id="cb16-17"><a href="#cb16-17"></a><span class="va">+  auto constexpr operator()(const T&amp; t) const</span></span>
<span id="cb16-18"><a href="#cb16-18"></a><span class="va">+    noexcept(noexcept(</span></span>
<span id="cb16-19"><a href="#cb16-19"></a><span class="va">+      tbd::tag_invoke(*this, t)))</span></span>
<span id="cb16-20"><a href="#cb16-20"></a><span class="va">+    -&gt; decltype(</span></span>
<span id="cb16-21"><a href="#cb16-21"></a><span class="va">+      tbd::tag_invoke(*this, t)) {</span></span>
<span id="cb16-22"><a href="#cb16-22"></a><span class="va">+    return </span></span>
<span id="cb16-23"><a href="#cb16-23"></a><span class="va">+      tbd::tag_invoke(*this, t);</span></span>
<span id="cb16-24"><a href="#cb16-24"></a><span class="va">+  }</span></span>
<span id="cb16-25"><a href="#cb16-25"></a><span class="va">+} get_context{};</span></span></code></pre></div>
</div>
<p>The <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">context_t</code></span> property can be used only with <span><code class="sourceCode default">query</code></span>, which</del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">get_context(e)</code></span> function</ins></span> returns the execution context associated with the <span class="rm" style="color: #bf0303"><del>executor.</del></span><span class="add" style="color: #006e28"><ins>executor <span><code class="sourceCode default">e</code></span>.</ins></span></p>
<p>The value returned from <span class="rm" style="color: #bf0303"><del>std::query(e, context_t)</del></span><span class="add" style="color: #006e28"><ins>get_context(e)</ins></span>, where <code class="sourceCode default">e</code> is an executor, shall not change between invocations <span class="add" style="color: #006e28"><ins>unless the executor is assigned another executor with a different context</ins></span>.</p>
<h2 data-number="3.6" id="add-section-behavioural-tag-values" data-number="3.6"><span class="header-section-number">3.6</span> Add section <em>? Behavioural tag values</em><a href="#add-section-behavioural-tag-values" class="self-link"></a></h2>
<div class="add" style="color: #006e28">
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> <em>Behavioural tag values</em></p>
<p>Behavioural tag values define a set of mutually-exclusive values that describe a behaviour.</p>
<p>Unless otherwise specified, behavioural tag values conform to the following specification.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode default cpp"><code class="sourceCode default"><span id="cb17-1"><a href="#cb17-1"></a>inline constexpr struct <em>behaviour</em>_<em>group</em>_t {</span>
<span id="cb17-2"><a href="#cb17-2"></a>  friend constexpr bool operator==(</span>
<span id="cb17-3"><a href="#cb17-3"></a>      const <em>behaviour</em>_<em>group</em>_t&amp;, const <em>behaviour</em>_<em>group</em>_t&amp;)</span>
<span id="cb17-4"><a href="#cb17-4"></a>  {</span>
<span id="cb17-5"><a href="#cb17-5"></a>    return true;</span>
<span id="cb17-6"><a href="#cb17-6"></a>  }</span>
<span id="cb17-7"><a href="#cb17-7"></a>  friend constexpr bool operator!=(</span>
<span id="cb17-8"><a href="#cb17-8"></a>      const <em>behaviour</em>_<em>group</em>_t&amp;, const <em>behaviour</em>_<em>group</em>_t&amp;)</span>
<span id="cb17-9"><a href="#cb17-9"></a>  {</span>
<span id="cb17-10"><a href="#cb17-10"></a>    return false;</span>
<span id="cb17-11"><a href="#cb17-11"></a>  }</span>
<span id="cb17-12"><a href="#cb17-12"></a>} <em>behaviour</em>_<em>group</em> {};</span></code></pre></div>
<p>The result of <code class="sourceCode default">get_<em>group</em></code> for the value of an object’s behavioral tag value shall not change between invocations unless the object is assigned another object with a different value of that behavioral tag value.</p>
</div>
<hr />
<h2 data-number="3.7" id="add-section-get-blocking-behaviour-tag-function" data-number="3.7"><span class="header-section-number">3.7</span> Add section <em>? Get blocking behaviour tag function</em><a href="#add-section-get-blocking-behaviour-tag-function" class="self-link"></a></h2>
<div class="add" style="color: #006e28">
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Get blocking behaviour tag function</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode default cpp"><code class="sourceCode default"><span id="cb18-1"><a href="#cb18-1"></a>inline constexpr struct get_blocking_t {</span>
<span id="cb18-2"><a href="#cb18-2"></a>  template&lt;typename T&gt;</span>
<span id="cb18-3"><a href="#cb18-3"></a>  auto constexpr operator()(const T&amp; t) const</span>
<span id="cb18-4"><a href="#cb18-4"></a>    noexcept(noexcept(</span>
<span id="cb18-5"><a href="#cb18-5"></a>      tbd::tag_invoke(*this, t)))</span>
<span id="cb18-6"><a href="#cb18-6"></a>    -&gt; decltype(</span>
<span id="cb18-7"><a href="#cb18-7"></a>      tbd::tag_invoke(*this, t)) {</span>
<span id="cb18-8"><a href="#cb18-8"></a>    return </span>
<span id="cb18-9"><a href="#cb18-9"></a>      tbd::tag_invoke(*this, t);</span>
<span id="cb18-10"><a href="#cb18-10"></a>  }</span>
<span id="cb18-11"><a href="#cb18-11"></a>} get_blocking{};</span></code></pre></div>
<p>The <code class="sourceCode default">get_blocking(e)</code> function returns the blocking tag value that describes the behaviour of the execution functions on object <code class="sourceCode default">e</code>.</p>
<p>The value returned from <code class="sourceCode default">get_blocking(e)</code>, where <code class="sourceCode default">e</code> is an object, shall not change between invocations unless <code class="sourceCode default">e</code> is assigned another object with a different blocking tag value.</p>
<p>For some subexpression <code class="sourceCode default">e</code>, let <code class="sourceCode default">E</code> be a type such that <code class="sourceCode default">decltype((e))</code> is <code class="sourceCode default">E</code>. The expression <code class="sourceCode default">execution::get_blocking(e)</code> is expression-equivalent to:</p>
<ul>
<li><p><code class="sourceCode default">tbd::tag_invoke(get_blocking, e)</code>, if that expression is valid.</p></li>
<li><p>Otherwise, <code class="sourceCode default">execution::get_blocking(e)</code> is ill-formed.</p></li>
</ul>

</div>
<h2 data-number="3.8" id="add-section-change-blocking-behaviour-tag-function" data-number="3.8"><span class="header-section-number">3.8</span> Add section <em>? Change blocking behaviour tag function</em><a href="#add-section-change-blocking-behaviour-tag-function" class="self-link"></a></h2>
<div class="add" style="color: #006e28">
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Change blocking behaviour tag function</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode default cpp"><code class="sourceCode default"><span id="cb19-1"><a href="#cb19-1"></a>inline constexpr struct make_with_blocking_t {</span>
<span id="cb19-2"><a href="#cb19-2"></a>  template&lt;typename T, typename B&gt;</span>
<span id="cb19-3"><a href="#cb19-3"></a>  auto constexpr operator()(const T&amp; t, B&amp;&amp; b) const</span>
<span id="cb19-4"><a href="#cb19-4"></a>    noexcept(noexcept(</span>
<span id="cb19-5"><a href="#cb19-5"></a>      tbd::tag_invoke(*this, t, (B&amp;&amp;)b)))</span>
<span id="cb19-6"><a href="#cb19-6"></a>    -&gt; decltype(</span>
<span id="cb19-7"><a href="#cb19-7"></a>      tbd::tag_invoke(*this, t, (B&amp;&amp;)b)) {</span>
<span id="cb19-8"><a href="#cb19-8"></a>    return </span>
<span id="cb19-9"><a href="#cb19-9"></a>      tbd::tag_invoke(*this, t, (B&amp;&amp;)b);</span>
<span id="cb19-10"><a href="#cb19-10"></a>  }</span>
<span id="cb19-11"><a href="#cb19-11"></a>} make_with_blocking{};</span></code></pre></div>
<p>For some subexpressions <code class="sourceCode default">e</code> and <code class="sourceCode default">b</code>, let <code class="sourceCode default">E</code> be a type such that <code class="sourceCode default">decltype((e))</code> is <code class="sourceCode default">E</code>, and let <code class="sourceCode default">B</code> be a type such that <code class="sourceCode default">decltype((b))</code> is <code class="sourceCode default">B</code>. The expression <code class="sourceCode default">execution::make_with_blocking(e, b)</code> is expression-equivalent to:</p>
<ul>
<li><p><code class="sourceCode default">tbd::tag_invoke(make_with_blocking, e, b)</code>, if that expression is valid.</p></li>
<li><p>Otherwise, <code class="sourceCode default">execution::make_with_blocking(e, b)</code> is ill-formed.</p></li>
</ul>
<p><strong>Returns:</strong> A value <code class="sourceCode default">t1</code> of type <code class="sourceCode default">T1</code> that holds a copy of <code class="sourceCode default">t</code>. <code class="sourceCode default">T1</code> provides an overload of <code class="sourceCode default">tag_invoke</code> such that <code class="sourceCode default">make_with_blocking(t1, b)</code> returns a copy of <code class="sourceCode default">t1</code>, an overload of <code class="sourceCode default">tag_invoke</code> such that <code class="sourceCode default">get_blocking(t1)</code> returns <code class="sourceCode default">b</code>, and execution functions derived from <code class="sourceCode default">T1</code> shall block the calling thread until the submitted functions have finished execution.</p>
</div>
<h2 data-number="3.9" id="modify-section-2.2.12.1-blocking-properties" data-number="3.9"><span class="header-section-number">3.9</span> Modify section <em>2.2.12.1 Blocking properties</em><a href="#modify-section-2.2.12.1-blocking-properties" class="self-link"></a></h2>
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Blocking <span class="rm" style="color: #bf0303"><del>properties</del></span><span class="add" style="color: #006e28"><ins>behavioural tag values</ins></span></p>
<p>The <span class="rm" style="color: #bf0303"><del>blocking_t property</del></span><span class="add" style="color: #006e28"><ins>following tag values</ins></span> describe<span class="rm" style="color: #bf0303"><del>s</del></span> what guarantees executors provide about the blocking behavior of their execution functions.</p>
<p><span class="rm" style="color: #bf0303"><del>blocking_t provides nested property types and objects as described below.</del></span> <span class="add" style="color: #006e28"><ins>Behavioural tag value types and objects are provided as described below.</ins></span></p>
<table>
<colgroup>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong><span class="rm" style="color: #bf0303"><del>Nested Property</del></span><span class="add" style="color: #006e28"><ins>Tag Value</ins></span> Type</strong>
</div></th>
<th><div style="text-align:center">
<strong><span class="rm" style="color: #bf0303"><del>Nested Property</del></span><span class="add" style="color: #006e28"><ins>Tag Value</ins></span> Object Name</strong>
</div></th>
<th><div style="text-align:center">
<strong>Requirements</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">blocking_t::possibly_t</code></span></del></span> <span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">possibly_blocking_t</code></span></ins></span></td>
<td><span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">blocking.possibly</code></span></del></span> <span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">possibly_blocking</code></span></ins></span></td>
<td>Invocation of an executor’s execution function may block pending completion of one or more invocations of the submitted function object.</td>
</tr>
<tr class="even">
<td><span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">blocking_t::always_t</code></span></del></span> <span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">always_blocking_t</code></span></ins></span></td>
<td><span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">blocking.always</code></span></del></span> <span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">always_blocking</code></span></ins></span></td>
<td>Invocation of an executor’s execution function shall block until completion of all invocations of submitted function object.</td>
</tr>
<tr class="odd">
<td><span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">blocking_t::never_t</code></span></del></span> <span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">always_never_t</code></span></ins></span></td>
<td><span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">blocking.never</code></span></del></span> <span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">never_blocking</code></span></ins></span></td>
<td>Invocation of an executor’s execution function shall not block pending completion of the invocations of the submitted function object.</td>
</tr>
</tbody>
</table>
<h2 data-number="3.10" id="modify-section-2.2.12.1.1-blocking_talways_t-customization-points" data-number="3.10"><span class="header-section-number">3.10</span> Modify section <em>2.2.12.1.1 blocking_t::always_t customization points</em><a href="#modify-section-2.2.12.1.1-blocking_talways_t-customization-points" class="self-link"></a></h2>
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> the <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">blocking_t::always_t</code></span> customization points</del></span><span class="add" style="color: #006e28"><ins>always_blocking tag value</ins></span></p>
<p>In addition to conforming to the above specification, the <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">blocking_t::always_t</code></span> property</del></span><span class="add" style="color: #006e28"><ins>always_blocking tag value</ins></span> provides the following customization:</p>
<div>
<div class="sourceCode" id="cb20"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb20-1"><a href="#cb20-1"></a><span class="st">-struct always_t</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="st">-{</span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="st">-  static constexpr bool is_requirable = true;</span></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="st">-  static constexpr bool is_preferable = false;</span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="st">-</span></span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="st">-  template &lt;class T&gt;</span></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="st">-    static constexpr bool is_applicable_property_v = executor&lt;T&gt;;</span></span>
<span id="cb20-8"><a href="#cb20-8"></a><span class="st">-</span></span>
<span id="cb20-9"><a href="#cb20-9"></a><span class="st">-  template&lt;class Executor&gt;</span></span>
<span id="cb20-10"><a href="#cb20-10"></a><span class="st">-    friend see-below require(Executor ex, blocking_t::always_t);</span></span>
<span id="cb20-11"><a href="#cb20-11"></a><span class="st">-};</span></span>
<span id="cb20-12"><a href="#cb20-12"></a><span class="va">+inline constexpr struct always_blocking_t {</span></span>
<span id="cb20-13"><a href="#cb20-13"></a><span class="va">+  friend constexpr bool operator==(</span></span>
<span id="cb20-14"><a href="#cb20-14"></a><span class="va">+      const always_blocking_t&amp;, const always_blocking_t&amp;)</span></span>
<span id="cb20-15"><a href="#cb20-15"></a><span class="va">+  {</span></span>
<span id="cb20-16"><a href="#cb20-16"></a><span class="va">+    return true;</span></span>
<span id="cb20-17"><a href="#cb20-17"></a><span class="va">+  }</span></span>
<span id="cb20-18"><a href="#cb20-18"></a><span class="va">+  friend constexpr bool operator!=(</span></span>
<span id="cb20-19"><a href="#cb20-19"></a><span class="va">+      const always_blocking_t&amp;, const always_blocking_t&amp;)</span></span>
<span id="cb20-20"><a href="#cb20-20"></a><span class="va">+  {</span></span>
<span id="cb20-21"><a href="#cb20-21"></a><span class="va">+    return false;</span></span>
<span id="cb20-22"><a href="#cb20-22"></a><span class="va">+  }</span></span>
<span id="cb20-23"><a href="#cb20-23"></a><span class="va">+  template&lt;class Executor&gt;</span></span>
<span id="cb20-24"><a href="#cb20-24"></a><span class="va">+    friend see-below constexpr tag_invoke(</span></span>
<span id="cb20-25"><a href="#cb20-25"></a><span class="va">+      execution::make_with_blocking_t, </span></span>
<span id="cb20-26"><a href="#cb20-26"></a><span class="va">+      const Executor&amp; ex, </span></span>
<span id="cb20-27"><a href="#cb20-27"></a><span class="va">+      always_blocking_t);</span></span>
<span id="cb20-28"><a href="#cb20-28"></a><span class="va">+} always_blocking{};</span></span></code></pre></div>
</div>
<p>If the executor has the blocking_adaptation_t::allowed_t property, this customization uses an adapter to implement the <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">blocking_t::always_t</code></span> property</del></span><span class="add" style="color: #006e28"><ins>always_blocking_t tag</ins></span>.</p>
<div>
<div class="sourceCode" id="cb21"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb21-1"><a href="#cb21-1"></a><span class="st">-template&lt;class Executor&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="st">-  friend see-below require(Executor ex, blocking_t::always_t);</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="va">+template&lt;class Executor&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="va">+  friend see-below tag_invoke(</span></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="va">+    execution::make_with_blocking_t, </span></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="va">+    const Executor&amp; ex, </span></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="va">+    always_blocking_t);</span></span></code></pre></div>
</div>
<p>Returns: A value e1 of type E1 that holds a copy of ex. E1 provides an overload of <span class="rm" style="color: #bf0303"><del>require</del></span><span class="add" style="color: #006e28"><ins>tag_invoke</ins></span> such that <span class="rm" style="color: #bf0303"><del>e1.require</del></span><span class="add" style="color: #006e28"><ins>make_with_blocking</ins></span>(<span class="rm" style="color: #bf0303"><del>blocking.always</del></span><span class="add" style="color: #006e28"><ins>e1, always_blocking</ins></span>) returns a copy of e1, an overload of <span class="rm" style="color: #bf0303"><del>query</del></span><span class="add" style="color: #006e28"><ins>tag_invoke</ins></span> such that <span class="rm" style="color: #bf0303"><del>query</del></span><span class="add" style="color: #006e28"><ins>get_blocking</ins></span>(e1<span class="rm" style="color: #bf0303"><del>,blocking</del></span>) returns <span class="rm" style="color: #bf0303"><del>blocking.always</del></span><span class="add" style="color: #006e28"><ins>always_blocking</ins></span>, and <span class="rm" style="color: #bf0303"><del>functions execute and bulk_execute</del></span><span class="add" style="color: #006e28"><ins>execution functions derived from <span><code class="sourceCode default">T1</code></span></ins></span> shall block the calling thread until the submitted functions have finished execution. <span class="rm" style="color: #bf0303"><del>e1 has the same executor properties as ex, except for the addition of the blocking_t::always_t property, and removal of blocking_t::never_t and blocking_t::possibly_t properties if present.</del></span></p>
<p>Remarks: This function shall not participate in overload resolution unless blocking_adaptation_t::static_query_v<Executor> is blocking_adaptation.allowed.</p>
<hr />
<h2 data-number="3.11" id="add-section-get-relationship-behaviour-tag-function" data-number="3.11"><span class="header-section-number">3.11</span> Add section <em>? Get relationship behaviour tag function</em><a href="#add-section-get-relationship-behaviour-tag-function" class="self-link"></a></h2>
<div class="add" style="color: #006e28">
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Get relationship behaviour tag function</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode default cpp"><code class="sourceCode default"><span id="cb22-1"><a href="#cb22-1"></a>inline constexpr struct get_relationship_t {</span>
<span id="cb22-2"><a href="#cb22-2"></a>  template&lt;typename T&gt;</span>
<span id="cb22-3"><a href="#cb22-3"></a>  auto constexpr operator()(const T&amp; t) const</span>
<span id="cb22-4"><a href="#cb22-4"></a>    noexcept(noexcept(</span>
<span id="cb22-5"><a href="#cb22-5"></a>      tbd::tag_invoke(*this, t)))</span>
<span id="cb22-6"><a href="#cb22-6"></a>    -&gt; decltype(</span>
<span id="cb22-7"><a href="#cb22-7"></a>      tbd::tag_invoke(*this, t)) {</span>
<span id="cb22-8"><a href="#cb22-8"></a>    return </span>
<span id="cb22-9"><a href="#cb22-9"></a>      tbd::tag_invoke(*this, t);</span>
<span id="cb22-10"><a href="#cb22-10"></a>  }</span>
<span id="cb22-11"><a href="#cb22-11"></a>} get_relationship{};</span></code></pre></div>
<p>The <code class="sourceCode default">get_relationship(e)</code> function returns the relationship tag value that describes the behaviour of the execution functions on object <code class="sourceCode default">e</code>.</p>
<p>The value returned from <code class="sourceCode default">get_relationship(e)</code>, where <code class="sourceCode default">e</code> is an object, shall not change between invocations unless <code class="sourceCode default">e</code> is assigned another object with a different relationship tag value.</p>
<p>For some subexpression <code class="sourceCode default">e</code>, let <code class="sourceCode default">E</code> be a type such that <code class="sourceCode default">decltype((e))</code> is <code class="sourceCode default">E</code>. The expression <code class="sourceCode default">execution::get_relationship(e)</code> is expression-equivalent to:</p>
<ul>
<li><p><code class="sourceCode default">tbd::tag_invoke(get_relationship, e)</code>, if that expression is valid.</p></li>
<li><p>Otherwise, <code class="sourceCode default">execution::get_relationship(e)</code> is ill-formed.</p></li>
</ul>

</div>
<h2 data-number="3.12" id="add-section-change-relationship-behaviour-tag-function" data-number="3.12"><span class="header-section-number">3.12</span> Add section <em>? Change relationship behaviour tag function</em><a href="#add-section-change-relationship-behaviour-tag-function" class="self-link"></a></h2>
<div class="add" style="color: #006e28">
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Change relationship behaviour tag function</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode default cpp"><code class="sourceCode default"><span id="cb23-1"><a href="#cb23-1"></a>inline constexpr struct make_with_relationship_t {</span>
<span id="cb23-2"><a href="#cb23-2"></a>  template&lt;typename T, typename R&gt;</span>
<span id="cb23-3"><a href="#cb23-3"></a>  auto constexpr operator()(const T&amp; t, R&amp;&amp; r) const</span>
<span id="cb23-4"><a href="#cb23-4"></a>    noexcept(noexcept(</span>
<span id="cb23-5"><a href="#cb23-5"></a>      tbd::tag_invoke(*this, t, (R&amp;&amp;)r)))</span>
<span id="cb23-6"><a href="#cb23-6"></a>    -&gt; decltype(</span>
<span id="cb23-7"><a href="#cb23-7"></a>      tbd::tag_invoke(*this, t, (R&amp;&amp;)r)) {</span>
<span id="cb23-8"><a href="#cb23-8"></a>    return </span>
<span id="cb23-9"><a href="#cb23-9"></a>      tbd::tag_invoke(*this, t, (R&amp;&amp;)r);</span>
<span id="cb23-10"><a href="#cb23-10"></a>  }</span>
<span id="cb23-11"><a href="#cb23-11"></a>} make_with_relationship{};</span></code></pre></div>
<p>For some subexpressions <code class="sourceCode default">e</code> and <code class="sourceCode default">r</code>, let <code class="sourceCode default">E</code> be a type such that <code class="sourceCode default">decltype((e))</code> is <code class="sourceCode default">E</code>, and let <code class="sourceCode default">R</code> be a type such that <code class="sourceCode default">decltype((r))</code> is <code class="sourceCode default">R</code>. The expression <code class="sourceCode default">execution::make_with_relationship(e, r)</code> is expression-equivalent to:</p>
<ul>
<li><p><code class="sourceCode default">tbd::tag_invoke(make_with_relationship, e, r)</code>, if that expression is valid.</p></li>
<li><p>Otherwise, <code class="sourceCode default">execution::make_with_relationship(e, r)</code> is ill-formed.</p></li>
</ul>
<p><strong>Returns:</strong> A value <code class="sourceCode default">t1</code> of type <code class="sourceCode default">T1</code> that holds a copy of <code class="sourceCode default">t</code>. <code class="sourceCode default">T1</code> provides an overload of <code class="sourceCode default">tag_invoke</code> such that <code class="sourceCode default">make_with_relationship(t1, r)</code> returns a copy of <code class="sourceCode default">t1</code>, an overload of <code class="sourceCode default">tag_invoke</code> such that <code class="sourceCode default">get_relationship(t1)</code> returns <code class="sourceCode default">r</code>.</p>
</div>
<h2 data-number="3.13" id="modify-section-2.2.12.3-properties-to-indicate-if-submitted-tasks-represent-continuations" data-number="3.13"><span class="header-section-number">3.13</span> Modify section <em>2.2.12.3 Properties to indicate if submitted tasks represent continuations</em><a href="#modify-section-2.2.12.3-properties-to-indicate-if-submitted-tasks-represent-continuations" class="self-link"></a></h2>
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> <span class="rm" style="color: #bf0303"><del>Properties</del></span> <span class="add" style="color: #006e28"><ins>Tag values</ins></span> to indicate if submitted tasks represent continuations</p>
<p>The <span class="rm" style="color: #bf0303"><del>relationship_t property</del></span><span class="add" style="color: #006e28"><ins>following tag values</ins></span> allow<span class="rm" style="color: #bf0303"><del>s</del></span> users of executors to indicate that submitted tasks represent continuations.</p>
<p><span class="rm" style="color: #bf0303"><del>relationship_t provides nested property types and objects as indicated below.</del></span> <span class="add" style="color: #006e28"><ins>Behavioural tag value types and objects are provided as described below.</ins></span></p>
<table>
<colgroup>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong><span class="rm" style="color: #bf0303"><del>Nested Property</del></span><span class="add" style="color: #006e28"><ins>Tag Value</ins></span> Type</strong>
</div></th>
<th><div style="text-align:center">
<strong><span class="rm" style="color: #bf0303"><del>Nested Property</del></span><span class="add" style="color: #006e28"><ins>Tag Value</ins></span> Object Name</strong>
</div></th>
<th><div style="text-align:center">
<strong>Requirements</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="rm" style="color: #bf0303"><del>relationship_t::fork_t</del></span> <span class="add" style="color: #006e28"><ins>fork_relationship_t</ins></span></td>
<td><span class="rm" style="color: #bf0303"><del>relationship.fork</del></span> <span class="add" style="color: #006e28"><ins>fork_relationship</ins></span></td>
<td><span class="rm" style="color: #bf0303"><del>Function objects</del></span><span class="add" style="color: #006e28"><ins>Tasks</ins></span> submitted <span class="rm" style="color: #bf0303"><del>through the executor</del></span> do not represent continuations of the <span class="rm" style="color: #bf0303"><del>caller</del></span><span class="add" style="color: #006e28"><ins>running task</ins></span>. <span class="add" style="color: #006e28"><ins>This is a hint to order newly submitted tasks independently of the running task.</ins></span></td>
</tr>
<tr class="even">
<td><span class="rm" style="color: #bf0303"><del>relationship_t::continuation_t</del></span> <span class="add" style="color: #006e28"><ins>continuation_relationship_t</ins></span></td>
<td><span class="rm" style="color: #bf0303"><del>relationship.continuation</del></span> <span class="add" style="color: #006e28"><ins>continuation_relationship</ins></span></td>
<td><span class="rm" style="color: #bf0303"><del>Function objects</del></span><span class="add" style="color: #006e28"><ins>Tasks</ins></span> submitted <span class="rm" style="color: #bf0303"><del>through the executor</del></span> represent continuations of the <span class="rm" style="color: #bf0303"><del>caller</del></span><span class="add" style="color: #006e28"><ins>running task</ins></span>. <span class="rm" style="color: #bf0303"><del>Invocation of newly submitted tasks may be deferred until the caller completes.</del></span> <span class="add" style="color: #006e28"><ins>This is a hint to order newly submitted tasks after the running task.</ins></span></td>
</tr>
</tbody>
</table>
<hr />
<h2 data-number="3.14" id="add-section-get-outstanding-work-behaviour-tag-function" data-number="3.14"><span class="header-section-number">3.14</span> Add section <em>? Get outstanding work behaviour tag function</em><a href="#add-section-get-outstanding-work-behaviour-tag-function" class="self-link"></a></h2>
<div class="add" style="color: #006e28">
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Get outstanding work behaviour tag function</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode default cpp"><code class="sourceCode default"><span id="cb24-1"><a href="#cb24-1"></a>inline constexpr struct get_outstanding_work_t {</span>
<span id="cb24-2"><a href="#cb24-2"></a>  template&lt;typename T&gt;</span>
<span id="cb24-3"><a href="#cb24-3"></a>  auto constexpr operator()(const T&amp; t) const</span>
<span id="cb24-4"><a href="#cb24-4"></a>    noexcept(noexcept(</span>
<span id="cb24-5"><a href="#cb24-5"></a>      tbd::tag_invoke(*this, t)))</span>
<span id="cb24-6"><a href="#cb24-6"></a>    -&gt; decltype(</span>
<span id="cb24-7"><a href="#cb24-7"></a>      tbd::tag_invoke(*this, t)) {</span>
<span id="cb24-8"><a href="#cb24-8"></a>    return </span>
<span id="cb24-9"><a href="#cb24-9"></a>      tbd::tag_invoke(*this, t);</span>
<span id="cb24-10"><a href="#cb24-10"></a>  }</span>
<span id="cb24-11"><a href="#cb24-11"></a>} get_outstanding_work{};</span></code></pre></div>
<p>The <code class="sourceCode default">get_outstanding_work(e)</code> function returns the outstanding work tag value that describes the behaviour of the execution functions on object <code class="sourceCode default">e</code>.</p>
<p>The value returned from <code class="sourceCode default">get_outstanding_work(e)</code>, where <code class="sourceCode default">e</code> is an object, shall not change between invocations unless <code class="sourceCode default">e</code> is assigned another object with a different outstanding work tag value.</p>
<p>For some subexpression <code class="sourceCode default">e</code>, let <code class="sourceCode default">E</code> be a type such that <code class="sourceCode default">decltype((e))</code> is <code class="sourceCode default">E</code>. The expression <code class="sourceCode default">execution::get_outstanding_work(e)</code> is expression-equivalent to:</p>
<ul>
<li><p><code class="sourceCode default">tbd::tag_invoke(get_outstanding_work, e)</code>, if that expression is valid.</p></li>
<li><p>Otherwise, <code class="sourceCode default">execution::get_outstanding_work(e)</code> is ill-formed.</p></li>
</ul>

</div>
<h2 data-number="3.15" id="add-section-change-outstanding-work-behaviour-tag-function" data-number="3.15"><span class="header-section-number">3.15</span> Add section <em>? Change outstanding work behaviour tag function</em><a href="#add-section-change-outstanding-work-behaviour-tag-function" class="self-link"></a></h2>
<div class="add" style="color: #006e28">
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Change outstanding work behaviour tag function</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode default cpp"><code class="sourceCode default"><span id="cb25-1"><a href="#cb25-1"></a>inline constexpr struct make_with_outstanding_work_t {</span>
<span id="cb25-2"><a href="#cb25-2"></a>  template&lt;typename T, typename O&gt;</span>
<span id="cb25-3"><a href="#cb25-3"></a>  auto constexpr operator()(const T&amp; t, O&amp;&amp; o) const</span>
<span id="cb25-4"><a href="#cb25-4"></a>    noexcept(noexcept(</span>
<span id="cb25-5"><a href="#cb25-5"></a>      tbd::tag_invoke(*this, t, (O&amp;&amp;)o)))</span>
<span id="cb25-6"><a href="#cb25-6"></a>    -&gt; decltype(</span>
<span id="cb25-7"><a href="#cb25-7"></a>      tbd::tag_invoke(*this, t, (O&amp;&amp;)o)) {</span>
<span id="cb25-8"><a href="#cb25-8"></a>    return </span>
<span id="cb25-9"><a href="#cb25-9"></a>      tbd::tag_invoke(*this, t, (O&amp;&amp;)o);</span>
<span id="cb25-10"><a href="#cb25-10"></a>  }</span>
<span id="cb25-11"><a href="#cb25-11"></a>} make_with_outstanding_work{};</span></code></pre></div>
<p>For some subexpressions <code class="sourceCode default">e</code> and <code class="sourceCode default">o</code>, let <code class="sourceCode default">E</code> be a type such that <code class="sourceCode default">decltype((e))</code> is <code class="sourceCode default">E</code>, and let <code class="sourceCode default">O</code> be a type such that <code class="sourceCode default">decltype((o))</code> is <code class="sourceCode default">O</code>. The expression <code class="sourceCode default">execution::make_with_outstanding_work(e, o)</code> is expression-equivalent to:</p>
<ul>
<li><p><code class="sourceCode default">tbd::tag_invoke(make_with_outstanding_work, e, o)</code>, if that expression is valid.</p></li>
<li><p>Otherwise, <code class="sourceCode default">execution::make_with_outstanding_work(e, o)</code> is ill-formed.</p></li>
</ul>
<p><strong>Returns:</strong> A value <code class="sourceCode default">t1</code> of type <code class="sourceCode default">T1</code> that holds a copy of <code class="sourceCode default">t</code>. <code class="sourceCode default">T1</code> provides an overload of <code class="sourceCode default">tag_invoke</code> such that <code class="sourceCode default">make_with_outstanding_work(t1, o)</code> returns a copy of <code class="sourceCode default">t1</code>, an overload of <code class="sourceCode default">tag_invoke</code> such that <code class="sourceCode default">get_outstanding_work(t1)</code> returns <code class="sourceCode default">o</code>.</p>
</div>
<h2 data-number="3.16" id="modify-section-2.2.12.4-properties-to-indicate-likely-task-submission-in-the-future" data-number="3.16"><span class="header-section-number">3.16</span> Modify section <em>2.2.12.4 Properties to indicate likely task submission in the future</em><a href="#modify-section-2.2.12.4-properties-to-indicate-likely-task-submission-in-the-future" class="self-link"></a></h2>
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> <span class="rm" style="color: #bf0303"><del>Properties</del></span> <span class="add" style="color: #006e28"><ins>Tag values</ins></span> to indicate likely task submission in the future</p>
<p>The <span class="rm" style="color: #bf0303"><del>outstanding_work_t property</del></span> <span class="add" style="color: #006e28"><ins>following tag values</ins></span> allow<span class="rm" style="color: #bf0303"><del>s</del></span> users <span class="rm" style="color: #bf0303"><del>of executors</del></span> to indicate that task submission is likely in the future.</p>
<p><span class="rm" style="color: #bf0303"><del>outstanding_work_t provides nested property types and objects as indicated below.</del></span> <span class="add" style="color: #006e28"><ins>Behavioural tag value types and objects are provided as described below.</ins></span></p>
<table>
<colgroup>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong><span class="rm" style="color: #bf0303"><del>Nested Property</del></span><span class="add" style="color: #006e28"><ins>Tag Value</ins></span> Type</strong>
</div></th>
<th><div style="text-align:center">
<strong><span class="rm" style="color: #bf0303"><del>Nested Property</del></span><span class="add" style="color: #006e28"><ins>Tag Value</ins></span> Object Name</strong>
</div></th>
<th><div style="text-align:center">
<strong>Requirements</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="rm" style="color: #bf0303"><del>outstanding_work_t::untracked_t</del></span> <span class="add" style="color: #006e28"><ins>untracked_outstanding_work_t</ins></span></td>
<td><span class="rm" style="color: #bf0303"><del>outstanding_work.untracked</del></span> <span class="add" style="color: #006e28"><ins>untracked_outstanding_work</ins></span></td>
<td>The existence of the <span class="rm" style="color: #bf0303"><del>executor</del></span> object does not indicate any likely future submission of a <span class="rm" style="color: #bf0303"><del>function object</del></span><span class="add" style="color: #006e28"><ins>task</ins></span>.</td>
</tr>
<tr class="even">
<td><span class="rm" style="color: #bf0303"><del>outstanding_work_t::tracked_t</del></span> <span class="add" style="color: #006e28"><ins>tracked_outstanding_work_t</ins></span></td>
<td><span class="rm" style="color: #bf0303"><del>outstanding_work.tracked</del></span> <span class="add" style="color: #006e28"><ins>tracked_outstanding_work</ins></span></td>
<td>The existence of the <span class="rm" style="color: #bf0303"><del>executor</del></span> object represents an indication of likely future submission of a <span class="rm" style="color: #bf0303"><del>function object</del></span><span class="add" style="color: #006e28"><ins>task</ins></span>. The <span class="rm" style="color: #bf0303"><del>executor</del></span><span class="add" style="color: #006e28"><ins>object</ins></span> <span class="rm" style="color: #bf0303"><del>or its associated execution context</del></span> may choose to maintain <span class="rm" style="color: #bf0303"><del>execution</del></span> resources in anticipation of this submission.</td>
</tr>
</tbody>
</table>
<div class="add" style="color: #006e28">
<p><span class="note"><span>[ <em>Note:</em> </span>This behaviour is equivalent to selecting whether an object acts as a <code class="sourceCode default">shared_ptr&lt;&gt;</code> or as a <code class="sourceCode default">weak_ptr&lt;&gt;</code> to some internal resources<span> — <em>end note</em> ]</span></span></p>
</div>
<p><span class="note"><span>[ <em>Note:</em> </span><span class="rm" style="color: #bf0303"><del>The outstanding_work_t::tracked_t and outstanding_work_t::untracked_t properties are used to communicate to the associated execution context intended future work submission on the executor</del></span> <span class="add" style="color: #006e28"><ins>The untracked_outstanding_work_t and tracked_outstanding_work_t tag value types are used to communicate to the object any intended future work submission on the object</ins></span>. The intended effect of the <span class="rm" style="color: #bf0303"><del>properties</del></span> <span class="add" style="color: #006e28"><ins>tag values</ins></span> is <span class="add" style="color: #006e28"><ins>to change</ins></span> the behavior of <span class="rm" style="color: #bf0303"><del>execution context’s</del></span> <span class="add" style="color: #006e28"><ins>the object’s</ins></span> facilities for awaiting outstanding work; specifically whether it considers the existance of the <span class="rm" style="color: #bf0303"><del>executor</del></span> object with the <span class="rm" style="color: #bf0303"><del>outstanding_work_t::tracked_t property enabled</del></span> <span class="add" style="color: #006e28"><ins>tracked_outstanding_work_t tag value type selected,</ins></span> outstanding work when deciding what to wait on. However this will be largely defined by the <span class="rm" style="color: #bf0303"><del>execution context</del></span> implementation <span class="add" style="color: #006e28"><ins>of the object</ins></span>. It is intended that the <span class="rm" style="color: #bf0303"><del>execution context</del></span> <span class="add" style="color: #006e28"><ins>object</ins></span> will define its wait facilities and on-destruction behaviour and provide an interface for querying this. An initial work towards this is included in <span class="citation" data-cites="P0737R0">[<a href="#ref-P0737R0" role="doc-biblioref">P0737R0</a>]</span>.<span> — <em>end note</em> ]</span></span></p>
<hr />
<h2 data-number="3.17" id="add-section-get-mapping-behaviour-tag-function" data-number="3.17"><span class="header-section-number">3.17</span> Add section <em>? Get mapping behaviour tag function</em><a href="#add-section-get-mapping-behaviour-tag-function" class="self-link"></a></h2>
<div class="add" style="color: #006e28">
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Get mapping behaviour tag function</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode default cpp"><code class="sourceCode default"><span id="cb26-1"><a href="#cb26-1"></a>inline constexpr struct get_mapping_t {</span>
<span id="cb26-2"><a href="#cb26-2"></a>  template&lt;typename T&gt;</span>
<span id="cb26-3"><a href="#cb26-3"></a>  auto constexpr operator()(const T&amp; t) const</span>
<span id="cb26-4"><a href="#cb26-4"></a>    noexcept(noexcept(</span>
<span id="cb26-5"><a href="#cb26-5"></a>      tbd::tag_invoke(*this, t)))</span>
<span id="cb26-6"><a href="#cb26-6"></a>    -&gt; decltype(</span>
<span id="cb26-7"><a href="#cb26-7"></a>      tbd::tag_invoke(*this, t)) {</span>
<span id="cb26-8"><a href="#cb26-8"></a>    return </span>
<span id="cb26-9"><a href="#cb26-9"></a>      tbd::tag_invoke(*this, t);</span>
<span id="cb26-10"><a href="#cb26-10"></a>  }</span>
<span id="cb26-11"><a href="#cb26-11"></a>} get_mapping{};</span></code></pre></div>
<p>The <code class="sourceCode default">get_mapping(e)</code> function returns the mapping tag value that describes the behaviour of the execution functions on object <code class="sourceCode default">e</code>.</p>
<p>The value returned from <code class="sourceCode default">get_mapping(e)</code>, where <code class="sourceCode default">e</code> is an object, shall not change between invocations unless <code class="sourceCode default">e</code> is assigned another object with a different relationship tag value.</p>
<p>For some subexpression <code class="sourceCode default">e</code>, let <code class="sourceCode default">E</code> be a type such that <code class="sourceCode default">decltype((e))</code> is <code class="sourceCode default">E</code>. The expression <code class="sourceCode default">execution::get_mapping(e)</code> is expression-equivalent to:</p>
<ul>
<li><p><code class="sourceCode default">tbd::tag_invoke(get_mapping, e)</code>, if that expression is valid.</p></li>
<li><p>Otherwise, <code class="sourceCode default">execution::get_mapping(e)</code> is ill-formed.</p></li>
</ul>

</div>
<h2 data-number="3.18" id="add-section-change-mapping-behaviour-tag-function" data-number="3.18"><span class="header-section-number">3.18</span> Add section <em>? Change mapping behaviour tag function</em><a href="#add-section-change-mapping-behaviour-tag-function" class="self-link"></a></h2>
<div class="add" style="color: #006e28">
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Change mapping behaviour tag function</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode default cpp"><code class="sourceCode default"><span id="cb27-1"><a href="#cb27-1"></a>inline constexpr struct make_with_mapping_t {</span>
<span id="cb27-2"><a href="#cb27-2"></a>  template&lt;typename T, typename M&gt;</span>
<span id="cb27-3"><a href="#cb27-3"></a>  auto constexpr operator()(const T&amp; t, M&amp;&amp; m) const</span>
<span id="cb27-4"><a href="#cb27-4"></a>    noexcept(noexcept(</span>
<span id="cb27-5"><a href="#cb27-5"></a>      tbd::tag_invoke(*this, t, (M&amp;&amp;)m)))</span>
<span id="cb27-6"><a href="#cb27-6"></a>    -&gt; decltype(</span>
<span id="cb27-7"><a href="#cb27-7"></a>      tbd::tag_invoke(*this, t, (M&amp;&amp;)m)) {</span>
<span id="cb27-8"><a href="#cb27-8"></a>    return </span>
<span id="cb27-9"><a href="#cb27-9"></a>      tbd::tag_invoke(*this, t, (M&amp;&amp;)m);</span>
<span id="cb27-10"><a href="#cb27-10"></a>  }</span>
<span id="cb27-11"><a href="#cb27-11"></a>} make_with_mapping{};</span></code></pre></div>
<p>For some subexpressions <code class="sourceCode default">e</code> and <code class="sourceCode default">m</code>, let <code class="sourceCode default">E</code> be a type such that <code class="sourceCode default">decltype((e))</code> is <code class="sourceCode default">E</code>, and let <code class="sourceCode default">M</code> be a type such that <code class="sourceCode default">decltype((m))</code> is <code class="sourceCode default">M</code>. The expression <code class="sourceCode default">execution::make_with_mapping(e, m)</code> is expression-equivalent to:</p>
<ul>
<li><p><code class="sourceCode default">tbd::tag_invoke(make_with_mapping, e, m)</code>, if that expression is valid.</p></li>
<li><p>Otherwise, <code class="sourceCode default">execution::make_with_mapping(e, m)</code> is ill-formed.</p></li>
</ul>
<p><strong>Returns:</strong> A value <code class="sourceCode default">t1</code> of type <code class="sourceCode default">T1</code> that holds a copy of <code class="sourceCode default">t</code>. <code class="sourceCode default">T1</code> provides an overload of <code class="sourceCode default">tag_invoke</code> such that <code class="sourceCode default">make_with_mapping(t1, m)</code> returns a copy of <code class="sourceCode default">t1</code>, an overload of <code class="sourceCode default">tag_invoke</code> such that <code class="sourceCode default">get_mapping(t1)</code> returns <code class="sourceCode default">m</code>.</p>
</div>
<h2 data-number="3.19" id="modify-section-2.2.12.6-properties-for-mapping-of-execution-on-to-threads" data-number="3.19"><span class="header-section-number">3.19</span> Modify section <em>2.2.12.6 Properties for mapping of execution on to threads</em><a href="#modify-section-2.2.12.6-properties-for-mapping-of-execution-on-to-threads" class="self-link"></a></h2>
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> <span class="rm" style="color: #bf0303"><del>Properties</del></span> <span class="add" style="color: #006e28"><ins>Tag values</ins></span> for mapping of execution on to threads</p>
<p>The <span class="rm" style="color: #bf0303"><del>mapping_t property</del></span> <span class="add" style="color: #006e28"><ins>following tag values</ins></span> describe<span class="rm" style="color: #bf0303"><del>s</del></span> what guarantees <span class="rm" style="color: #bf0303"><del>executors</del></span> <span class="add" style="color: #006e28"><ins>an object</ins></span> provide<span class="add" style="color: #006e28"><ins>s</ins></span> about the mapping of execution agents onto threads of execution.</p>
<p><span class="rm" style="color: #bf0303"><del>mapping_t provides nested property types and objects as indicated below.</del></span> <span class="add" style="color: #006e28"><ins>Behavioural tag value types and objects are provided as described below.</ins></span></p>
<table>
<colgroup>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong><span class="rm" style="color: #bf0303"><del>Nested Property</del></span><span class="add" style="color: #006e28"><ins>Tag Value</ins></span> Type</strong>
</div></th>
<th><div style="text-align:center">
<strong><span class="rm" style="color: #bf0303"><del>Nested Property</del></span><span class="add" style="color: #006e28"><ins>Tag Value</ins></span> Object Name</strong>
</div></th>
<th><div style="text-align:center">
<strong>Requirements</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="rm" style="color: #bf0303"><del>mapping_t::thread_t</del></span> <span class="add" style="color: #006e28"><ins>thread_mapping_t</ins></span></td>
<td><span class="rm" style="color: #bf0303"><del>mapping.thread</del></span> <span class="add" style="color: #006e28"><ins>thread_mapping</ins></span></td>
<td>Execution agents are mapped onto threads of execution.</td>
</tr>
<tr class="even">
<td><span class="rm" style="color: #bf0303"><del>mapping_t::new_thread_t</del></span> <span class="add" style="color: #006e28"><ins>new_thread_mapping_t</ins></span></td>
<td><span class="rm" style="color: #bf0303"><del>mapping.new_thread</del></span> <span class="add" style="color: #006e28"><ins>new_thread_mapping</ins></span></td>
<td>Each execution agent is mapped onto a new thread of execution.</td>
</tr>
<tr class="odd">
<td><span class="rm" style="color: #bf0303"><del>mapping_t::other_t</del></span> <span class="add" style="color: #006e28"><ins>other_mapping_t</ins></span></td>
<td><span class="rm" style="color: #bf0303"><del>mapping.other</del></span> <span class="add" style="color: #006e28"><ins>other_mapping</ins></span></td>
<td>Mapping of each execution agent is implementation-defined.</td>
</tr>
</tbody>
</table>
<p><span class="note"><span>[ <em>Note:</em> </span>A mapping of an execution agent onto a thread of execution implies the execution agent runs as-if on a std::thread. Therefore, the facilities provided by std::thread, such as thread-local storage, are available. mapping_t::new_thread_t provides stronger guarantees, in particular that thread-local storage will not be shared between execution agents.<span> — <em>end note</em> ]</span></span></p>
<hr />
<h2 data-number="3.20" id="add-section-get-allocator-tag-function" data-number="3.20"><span class="header-section-number">3.20</span> Add section <em>? Get allocator tag function</em><a href="#add-section-get-allocator-tag-function" class="self-link"></a></h2>
<div class="add" style="color: #006e28">
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Get allocator tag function</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode default cpp"><code class="sourceCode default"><span id="cb28-1"><a href="#cb28-1"></a>inline constexpr struct get_allocator_t {</span>
<span id="cb28-2"><a href="#cb28-2"></a>  template&lt;typename T&gt;</span>
<span id="cb28-3"><a href="#cb28-3"></a>  auto constexpr operator()(const T&amp; t) const</span>
<span id="cb28-4"><a href="#cb28-4"></a>    noexcept(noexcept(</span>
<span id="cb28-5"><a href="#cb28-5"></a>      tbd::tag_invoke(*this, t)))</span>
<span id="cb28-6"><a href="#cb28-6"></a>    -&gt; decltype(</span>
<span id="cb28-7"><a href="#cb28-7"></a>      tbd::tag_invoke(*this, t)) {</span>
<span id="cb28-8"><a href="#cb28-8"></a>    return </span>
<span id="cb28-9"><a href="#cb28-9"></a>      tbd::tag_invoke(*this, t);</span>
<span id="cb28-10"><a href="#cb28-10"></a>  }</span>
<span id="cb28-11"><a href="#cb28-11"></a>} get_allocator{};</span></code></pre></div>
<p>The <code class="sourceCode default">get_allocator(e)</code> function returns the allocator in use by object <code class="sourceCode default">e</code>.</p>
<p>The value returned from <code class="sourceCode default">get_allocator(e)</code>, where <code class="sourceCode default">e</code> is an object, shall not change between invocations unless <code class="sourceCode default">e</code> is assigned another object with a different relationship tag value.</p>
<p>For some subexpression <code class="sourceCode default">e</code>, let <code class="sourceCode default">E</code> be a type such that <code class="sourceCode default">decltype((e))</code> is <code class="sourceCode default">E</code>. The expression <code class="sourceCode default">execution::get_allocator(e)</code> is expression-equivalent to:</p>
<ul>
<li><p><code class="sourceCode default">tbd::tag_invoke(get_allocator, e)</code>, if that expression is valid.</p></li>
<li><p>Otherwise, <code class="sourceCode default">execution::get_allocator(e)</code> is ill-formed.</p></li>
</ul>

</div>
<h2 data-number="3.21" id="add-section-change-allocator-tag-function" data-number="3.21"><span class="header-section-number">3.21</span> Add section <em>? Change allocator tag function</em><a href="#add-section-change-allocator-tag-function" class="self-link"></a></h2>
<div class="add" style="color: #006e28">
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Change allocator tag function</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode default cpp"><code class="sourceCode default"><span id="cb29-1"><a href="#cb29-1"></a>inline constexpr struct make_with_allocator_t {</span>
<span id="cb29-2"><a href="#cb29-2"></a>  template&lt;typename T, typename A&gt;</span>
<span id="cb29-3"><a href="#cb29-3"></a>  auto constexpr operator()(const T&amp; t, A&amp;&amp; a) const</span>
<span id="cb29-4"><a href="#cb29-4"></a>    noexcept(noexcept(</span>
<span id="cb29-5"><a href="#cb29-5"></a>      tbd::tag_invoke(*this, t, (A&amp;&amp;)a)))</span>
<span id="cb29-6"><a href="#cb29-6"></a>    -&gt; decltype(</span>
<span id="cb29-7"><a href="#cb29-7"></a>      tbd::tag_invoke(*this, t, (A&amp;&amp;)a)) {</span>
<span id="cb29-8"><a href="#cb29-8"></a>    return </span>
<span id="cb29-9"><a href="#cb29-9"></a>      tbd::tag_invoke(*this, t, (A&amp;&amp;)a);</span>
<span id="cb29-10"><a href="#cb29-10"></a>  }</span>
<span id="cb29-11"><a href="#cb29-11"></a>} make_with_allocator{};</span></code></pre></div>
<p>For some subexpressions <code class="sourceCode default">e</code> and <code class="sourceCode default">a</code>, let <code class="sourceCode default">E</code> be a type such that <code class="sourceCode default">decltype((e))</code> is <code class="sourceCode default">E</code>, and let <code class="sourceCode default">A</code> be a type such that <code class="sourceCode default">decltype((a))</code> is <code class="sourceCode default">A</code>. The expression <code class="sourceCode default">execution::make_with_allocator(e, a)</code> is expression-equivalent to:</p>
<ul>
<li><p><code class="sourceCode default">tbd::tag_invoke(make_with_allocator, e, a)</code>, if that expression is valid.</p></li>
<li><p>Otherwise, <code class="sourceCode default">execution::make_with_allocator(e, a)</code> is ill-formed.</p></li>
</ul>
<p><strong>Returns:</strong> A value <code class="sourceCode default">t1</code> of type <code class="sourceCode default">T1</code> that holds a copy of <code class="sourceCode default">t</code>. <code class="sourceCode default">T1</code> provides an overload of <code class="sourceCode default">tag_invoke</code> such that <code class="sourceCode default">make_with_allocator(t1, a)</code> returns a copy of <code class="sourceCode default">t1</code>, an overload of <code class="sourceCode default">tag_invoke</code> such that <code class="sourceCode default">get_allocator(t1)</code> returns <code class="sourceCode default">a</code>, and functions derived from <code class="sourceCode default">T1</code> shall use <code class="sourceCode default">a</code> when allocating.</p>
</div>
<h2 data-number="3.22" id="modify-section-2.5.2-class-static_thread_pool" data-number="3.22"><span class="header-section-number">3.22</span> Modify section <em>2.5.2 Class <code class="sourceCode default">static_thread_pool</code></em><a href="#modify-section-2.5.2-class-static_thread_pool" class="self-link"></a></h2>
<p><span class="marginalizedparent"><a class="marginalized">?</a></span> Class <code class="sourceCode default">static_thread_pool</code></p>
<ul>
<li>the number of existing executor objects associated with the <code class="sourceCode default">static_thread_pool</code> for which <span class="rm" style="color: #bf0303"><del>the <span><code class="sourceCode default">execution::outstanding_work.tracked</code></span> property</del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">execution::tracked_outstanding_work</code></span></ins></span> is established;</li>
</ul>
<h2 data-number="3.23" id="modify-section-2.5.2.4-scheduler-creation" data-number="3.23"><span class="header-section-number">3.23</span> Modify section <em>2.5.2.4 Scheduler creation</em><a href="#modify-section-2.5.2.4-scheduler-creation" class="self-link"></a></h2>
<div class="sourceCode" id="cb30"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb30-1"><a href="#cb30-1"></a><em>scheduler_type</em> scheduler() noexcept;</span></code></pre></div>
<p><em>Returns:</em> A scheduler that may be used to create sender objects that may be used to submit receiver objects to the thread pool. The returned scheduler <span class="rm" style="color: #bf0303"><del>has the following properties already established</del></span><span class="add" style="color: #006e28"><ins>supports the following <span><code class="sourceCode default">tag_invoke</code></span> functions</ins></span>:</p>
<div class="rm" style="color: #bf0303">

<ul>
<li><code class="sourceCode default">execution::allocator</code></li>
<li><code class="sourceCode default">execution::allocator(std::allocator&lt;void&gt;())</code></li>
</ul>

</div>
<div class="add" style="color: #006e28">

<ul>
<li><code class="sourceCode default">tbd::get_allocator() -&gt; <em>see-below</em></code></li>
</ul>

</div>
<h2 data-number="3.24" id="modify-section-2.5.2.5-executor-creation" data-number="3.24"><span class="header-section-number">3.24</span> Modify section <em>2.5.2.5 Executor creation</em><a href="#modify-section-2.5.2.5-executor-creation" class="self-link"></a></h2>
<div class="sourceCode" id="cb31"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb31-1"><a href="#cb31-1"></a><em>executor_type</em> executor() noexcept;</span></code></pre></div>
<p><em>Returns:</em> An executor that may be used to submit function objects to the thread pool. The returned executor <span class="rm" style="color: #bf0303"><del>has the following properties already established</del></span><span class="add" style="color: #006e28"><ins>supports the following <span><code class="sourceCode default">tag_invoke</code></span> functions</ins></span>:</p>
<div class="rm" style="color: #bf0303">

<ul>
<li><code class="sourceCode default">execution::blocking.possibly</code></li>
<li><code class="sourceCode default">execution::relationship.fork</code></li>
<li><code class="sourceCode default">execution::outstanding_work.untracked</code></li>
<li><code class="sourceCode default">execution::allocator</code></li>
<li><code class="sourceCode default">execution::allocator(std::allocator&lt;void&gt;())</code></li>
</ul>

</div>
<div class="add" style="color: #006e28">

<ul>
<li><code class="sourceCode default">execution::get_blocking() -&gt; execution::possibly_blocking_t</code></li>
<li><code class="sourceCode default">execution::get_relationship() -&gt; execution::fork_relationship_t</code></li>
<li><code class="sourceCode default">execution::get_outstanding_work() -&gt; execution::untracked_outstanding_work_t</code></li>
<li><code class="sourceCode default">tbd::get_allocator() -&gt; <em>see-below</em></code></li>
</ul>

</div>
<h2 data-number="3.25" id="modify-section-2.5.3-static_thread_pool-scheduler-types" data-number="3.25"><span class="header-section-number">3.25</span> Modify section <em>2.5.3 <code class="sourceCode default">static_thread_pool</code> scheduler types</em><a href="#modify-section-2.5.3-static_thread_pool-scheduler-types" class="self-link"></a></h2>
<p>All scheduler types accessible through <code class="sourceCode default">static_thread_pool::scheduler()</code><span class="rm" style="color: #bf0303"><del>, and subsequent invocations of the member function <span><code class="sourceCode default">require</code></span>,</del></span> conform to the following specification.</p>
<div>
<div class="sourceCode" id="cb32"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb32-1"><a href="#cb32-1"></a>class C</span>
<span id="cb32-2"><a href="#cb32-2"></a>{</span>
<span id="cb32-3"><a href="#cb32-3"></a>  public:</span>
<span id="cb32-4"><a href="#cb32-4"></a></span>
<span id="cb32-5"><a href="#cb32-5"></a>    // types:</span>
<span id="cb32-6"><a href="#cb32-6"></a></span>
<span id="cb32-7"><a href="#cb32-7"></a>    using sender_type = see-below;</span>
<span id="cb32-8"><a href="#cb32-8"></a></span>
<span id="cb32-9"><a href="#cb32-9"></a>    // construct / copy / destroy:</span>
<span id="cb32-10"><a href="#cb32-10"></a></span>
<span id="cb32-11"><a href="#cb32-11"></a>    C(const C&amp; other) noexcept;</span>
<span id="cb32-12"><a href="#cb32-12"></a>    C(C&amp;&amp; other) noexcept;</span>
<span id="cb32-13"><a href="#cb32-13"></a></span>
<span id="cb32-14"><a href="#cb32-14"></a>    C&amp; operator=(const C&amp; other) noexcept;</span>
<span id="cb32-15"><a href="#cb32-15"></a>    C&amp; operator=(C&amp;&amp; other) noexcept;</span>
<span id="cb32-16"><a href="#cb32-16"></a></span>
<span id="cb32-17"><a href="#cb32-17"></a>    // scheduler operations:</span>
<span id="cb32-18"><a href="#cb32-18"></a></span>
<span id="cb32-19"><a href="#cb32-19"></a><span class="st">-    <em>see-below</em> require(const execution::allocator_t&lt;void&gt;&amp; a) const;</span></span>
<span id="cb32-20"><a href="#cb32-20"></a><span class="st">-    template&lt;class ProtoAllocator&gt;</span></span>
<span id="cb32-21"><a href="#cb32-21"></a><span class="st">-    <em>see-below</em> require(const execution::allocator_t&lt;ProtoAllocator&gt;&amp; a) const;</span></span>
<span id="cb32-22"><a href="#cb32-22"></a><span class="st">-</span></span>
<span id="cb32-23"><a href="#cb32-23"></a><span class="st">-    <em>see-below</em> query(execution::context_t) const noexcept;</span></span>
<span id="cb32-24"><a href="#cb32-24"></a><span class="st">-    <em>see-below</em> query(execution::allocator_t&lt;void&gt;) const noexcept;</span></span>
<span id="cb32-25"><a href="#cb32-25"></a><span class="st">-    template&lt;class ProtoAllocator&gt;</span></span>
<span id="cb32-26"><a href="#cb32-26"></a><span class="st">-    <em>see-below</em> query(execution::allocator_t&lt;ProtoAllocator&gt;) const noexcept;</span></span>
<span id="cb32-27"><a href="#cb32-27"></a><span class="va">+    template&lt;class ProtoAllocator&gt;</span></span>
<span id="cb32-28"><a href="#cb32-28"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_allocator_t, const C&amp;, ProtoAllocator);</span></span>
<span id="cb32-29"><a href="#cb32-29"></a><span class="va">+</span></span>
<span id="cb32-30"><a href="#cb32-30"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_context_t, const C&amp;) noexcept;</span></span>
<span id="cb32-31"><a href="#cb32-31"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_allocator_t, const C&amp;) noexcept;</span></span>
<span id="cb32-32"><a href="#cb32-32"></a></span>
<span id="cb32-33"><a href="#cb32-33"></a>    bool running_in_this_thread() const noexcept;</span>
<span id="cb32-34"><a href="#cb32-34"></a>};</span>
<span id="cb32-35"><a href="#cb32-35"></a></span>
<span id="cb32-36"><a href="#cb32-36"></a>bool operator==(const C&amp; a, const C&amp; b) noexcept;</span>
<span id="cb32-37"><a href="#cb32-37"></a>bool operator!=(const C&amp; a, const C&amp; b) noexcept;</span></code></pre></div>
</div>
<h2 data-number="3.26" id="modify-section-2.5.3.3-operations" data-number="3.26"><span class="header-section-number">3.26</span> Modify section <em>2.5.3.3 Operations</em><a href="#modify-section-2.5.3.3-operations" class="self-link"></a></h2>
<div class="rm" style="color: #bf0303">

<div class="sourceCode" id="cb33"><pre class="sourceCode default default"><code class="sourceCode default"><span id="cb33-1"><a href="#cb33-1"></a><em>see-below</em> require(const execution::allocator_t&lt;void&gt;&amp; a) const;</span></code></pre></div>
<p><em>Returns:</em> <code class="sourceCode default">require(execution::allocator(x))</code>, where <code class="sourceCode default">x</code> is an implementation-defined default allocator.</p>
</div>
<div>
<div class="sourceCode" id="cb34"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb34-1"><a href="#cb34-1"></a>template&lt;class ProtoAllocator&gt;</span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="st">-  <em>see-below</em> require(const execution::allocator_t&lt;ProtoAllocator&gt;&amp; a) const;</span></span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="va">+  friend <em>see-below</em> tag_invoke(execution::make_with_allocator_t, const C&amp;, ProtoAllocator a);</span></span></code></pre></div>
</div>
<p><em>Returns:</em> An scheduler object of an unspecified type conforming to these specifications, associated with the same thread pool as <code class="sourceCode default">*this</code>, with the <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">execution::allocator_t&lt;ProtoAllocator&gt;</code></span> property established</del></span><span class="add" style="color: #006e28"><ins>function <span><code class="sourceCode default">execution::get_allocator() -&gt; ProtoAllocator</code></span>,</ins></span> such that allocation and deallocation associated with function submission will be performed using a copy of <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">a.alloc</code></span></del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">a</code></span></ins></span>. All other <span class="rm" style="color: #bf0303"><del>properties</del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">tag_invoke</code></span> functions</ins></span> of the returned scheduler object are identical to those of <code class="sourceCode default">*this</code>.</p>
<div>
<div class="sourceCode" id="cb35"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb35-1"><a href="#cb35-1"></a><span class="st">-static_thread_pool&amp; query(execution::context_t) const noexcept;</span></span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="va">+friend static_thread_pool&amp; tag_invoke(execution::get_context_t, const C&amp;) noexcept;</span></span></code></pre></div>
</div>
<p><em>Returns:</em> A reference to the associated <code class="sourceCode default">static_thread_pool</code> object.</p>
<div>
<div class="sourceCode" id="cb36"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb36-1"><a href="#cb36-1"></a><span class="st">-<em>see-below</em> query(execution::allocator_t&lt;void&gt;) const noexcept;</span></span>
<span id="cb36-2"><a href="#cb36-2"></a><span class="st">-<em>see-below</em> query(execution::allocator_t&lt;ProtoAllocator&gt;) const noexcept;</span></span>
<span id="cb36-3"><a href="#cb36-3"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::get_allocator_t, const C&amp;) noexcept;</span></span></code></pre></div>
</div>
<p><em>Returns:</em> The allocator object associated with the executor, with type and value as <span class="rm" style="color: #bf0303"><del>either previously established by the <span><code class="sourceCode default">execution::allocator_t&lt;ProtoAllocator&gt;</code></span> property</del></span> <span class="add" style="color: #006e28"><ins>specified in a previous call to <span><code class="sourceCode default">execution::make_with_allocator</code></span></ins></span> or the implementation defined default allocator <span class="rm" style="color: #bf0303"><del>established by the <span><code class="sourceCode default">execution::allocator_t&lt;void&gt;</code></span> property</del></span>.</p>
<h2 data-number="3.27" id="modify-section-2.5.3.4-comparisons" data-number="3.27"><span class="header-section-number">3.27</span> Modify section <em>2.5.3.4 Comparisons</em><a href="#modify-section-2.5.3.4-comparisons" class="self-link"></a></h2>
<div class="sourceCode" id="cb37"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb37-1"><a href="#cb37-1"></a>bool operator==(const C&amp; a, const C&amp; b) noexcept;</span></code></pre></div>
<div class="rm" style="color: #bf0303">
<p><em>Returns:</em> <code class="sourceCode default">true</code> if <code class="sourceCode default">&amp;a.query(execution::context) == &amp;b.query(execution::context)</code> and <code class="sourceCode default">a</code> and <code class="sourceCode default">b</code> have identical properties, otherwise <code class="sourceCode default">false</code>.</p>
</div>
<div class="add" style="color: #006e28">
<p><em>Returns:</em> <code class="sourceCode default">true</code> if</p>
<ul>
<li><code class="sourceCode default">&amp;execution::get_context(a) == &amp;execution::get_context(b)</code> and,</li>
<li><code class="sourceCode default">execution::get_allocator(a) == execution::get_allocator(b)</code>,</li>
<li>otherwise <code class="sourceCode default">false</code>.</li>
</ul>

</div>
<h2 data-number="3.28" id="modify-section-2.5.3.6-sender-creation" data-number="3.28"><span class="header-section-number">3.28</span> Modify section <em>2.5.3.6 Sender creation</em><a href="#modify-section-2.5.3.6-sender-creation" class="self-link"></a></h2>
<div class="sourceCode" id="cb38"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb38-1"><a href="#cb38-1"></a>  <em>sender_type</em> schedule() noexcept;</span></code></pre></div>
<p><em>Returns:</em> A sender that may be used to submit function objects to the thread pool. The returned sender <span class="rm" style="color: #bf0303"><del>has the following properties already established</del></span><span class="add" style="color: #006e28"><ins>supports the following <span><code class="sourceCode default">tag_invoke</code></span> functions</ins></span>:</p>
<div class="rm" style="color: #bf0303">

<ul>
<li><code class="sourceCode default">execution::blocking.possibly</code></li>
<li><code class="sourceCode default">execution::relationship.fork</code></li>
<li><code class="sourceCode default">execution::outstanding_work.untracked</code></li>
<li><code class="sourceCode default">execution::allocator</code></li>
<li><code class="sourceCode default">execution::allocator(std::allocator&lt;void&gt;())</code></li>
</ul>

</div>
<div class="add" style="color: #006e28">

<ul>
<li><code class="sourceCode default">execution::get_blocking() -&gt; execution::possibly_blocking_t</code></li>
<li><code class="sourceCode default">execution::get_relationship() -&gt; execution::fork_relationship_t</code></li>
<li><code class="sourceCode default">execution::get_outstanding_work() -&gt; execution::untracked_outstanding_work_t</code></li>
<li><code class="sourceCode default">tbd::get_allocator() -&gt; <em>see-below</em></code></li>
</ul>

</div>
<h2 data-number="3.29" id="modify-section-2.5.4-static_thread_pool-sender-types" data-number="3.29"><span class="header-section-number">3.29</span> Modify section <em>2.5.4 <code class="sourceCode default">static_thread_pool</code> sender types</em><a href="#modify-section-2.5.4-static_thread_pool-sender-types" class="self-link"></a></h2>
<p>All sender types accessible through <code class="sourceCode default">static_thread_pool::scheduler().schedule()</code><span class="rm" style="color: #bf0303"><del>, and subsequent invocations of the member function <span><code class="sourceCode default">require</code></span>,</del></span> conform to the following specification.</p>
<div>
<div class="sourceCode" id="cb39"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb39-1"><a href="#cb39-1"></a>class C</span>
<span id="cb39-2"><a href="#cb39-2"></a>{</span>
<span id="cb39-3"><a href="#cb39-3"></a>  public:</span>
<span id="cb39-4"><a href="#cb39-4"></a></span>
<span id="cb39-5"><a href="#cb39-5"></a>    // construct / copy / destroy:</span>
<span id="cb39-6"><a href="#cb39-6"></a></span>
<span id="cb39-7"><a href="#cb39-7"></a>    C(const C&amp; other) noexcept;</span>
<span id="cb39-8"><a href="#cb39-8"></a>    C(C&amp;&amp; other) noexcept;</span>
<span id="cb39-9"><a href="#cb39-9"></a></span>
<span id="cb39-10"><a href="#cb39-10"></a>    C&amp; operator=(const C&amp; other) noexcept;</span>
<span id="cb39-11"><a href="#cb39-11"></a>    C&amp; operator=(C&amp;&amp; other) noexcept;</span>
<span id="cb39-12"><a href="#cb39-12"></a></span>
<span id="cb39-13"><a href="#cb39-13"></a>    // sender operations:</span>
<span id="cb39-14"><a href="#cb39-14"></a></span>
<span id="cb39-15"><a href="#cb39-15"></a><span class="st">-    see-below require(execution::blocking_t::never_t) const;</span></span>
<span id="cb39-16"><a href="#cb39-16"></a><span class="st">-    see-below require(execution::blocking_t::possibly_t) const;</span></span>
<span id="cb39-17"><a href="#cb39-17"></a><span class="st">-    see-below require(execution::blocking_t::always_t) const;</span></span>
<span id="cb39-18"><a href="#cb39-18"></a><span class="st">-    see-below require(execution::relationship_t::continuation_t) const;</span></span>
<span id="cb39-19"><a href="#cb39-19"></a><span class="st">-    see-below require(execution::relationship_t::fork_t) const;</span></span>
<span id="cb39-20"><a href="#cb39-20"></a><span class="st">-    see-below require(execution::outstanding_work_t::tracked_t) const;</span></span>
<span id="cb39-21"><a href="#cb39-21"></a><span class="st">-    see-below require(execution::outstanding_work_t::untracked_t) const;</span></span>
<span id="cb39-22"><a href="#cb39-22"></a><span class="st">-    see-below require(const execution::allocator_t&lt;void&gt;&amp; a) const;</span></span>
<span id="cb39-23"><a href="#cb39-23"></a><span class="st">-    template&lt;class ProtoAllocator&gt;</span></span>
<span id="cb39-24"><a href="#cb39-24"></a><span class="st">-    see-below require(const execution::allocator_t&lt;ProtoAllocator&gt;&amp; a) const;</span></span>
<span id="cb39-25"><a href="#cb39-25"></a><span class="st">-</span></span>
<span id="cb39-26"><a href="#cb39-26"></a>    static constexpr execution::bulk_guarantee_t query(execution::bulk_guarantee_t) const;</span>
<span id="cb39-27"><a href="#cb39-27"></a><span class="st">-    static constexpr execution::mapping_t query(execution::mapping_t) const;</span></span>
<span id="cb39-28"><a href="#cb39-28"></a><span class="st">-    execution::blocking_t query(execution::blocking_t) const;</span></span>
<span id="cb39-29"><a href="#cb39-29"></a><span class="st">-    execution::relationship_t query(execution::relationship_t) const;</span></span>
<span id="cb39-30"><a href="#cb39-30"></a><span class="st">-    execution::outstanding_work_t query(execution::outstanding_work_t) const;</span></span>
<span id="cb39-31"><a href="#cb39-31"></a><span class="st">-    see-below query(execution::context_t) const noexcept;</span></span>
<span id="cb39-32"><a href="#cb39-32"></a><span class="st">-    see-below query(execution::allocator_t&lt;void&gt;) const noexcept;</span></span>
<span id="cb39-33"><a href="#cb39-33"></a><span class="st">-    template&lt;class ProtoAllocator&gt;</span></span>
<span id="cb39-34"><a href="#cb39-34"></a><span class="st">-    see-below query(execution::allocator_t&lt;ProtoAllocator&gt;) const noexcept;</span></span>
<span id="cb39-35"><a href="#cb39-35"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::never_blocking_t);</span></span>
<span id="cb39-36"><a href="#cb39-36"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::possibly_blocking_t);</span></span>
<span id="cb39-37"><a href="#cb39-37"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::always_blocking_t);</span></span>
<span id="cb39-38"><a href="#cb39-38"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_relationship_t, const C&amp;, execution::continuation_relationship_t);</span></span>
<span id="cb39-39"><a href="#cb39-39"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_relationship_t, const C&amp;, execution::fork_relationship_t);</span></span>
<span id="cb39-40"><a href="#cb39-40"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_outstanding_work_t, const C&amp;, execution::tracked_outstanding_work_t);</span></span>
<span id="cb39-41"><a href="#cb39-41"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_outstanding_work_t, const C&amp;, execution::untracked_outstanding_work_t);</span></span>
<span id="cb39-42"><a href="#cb39-42"></a><span class="va">+    template&lt;class ProtoAllocator&gt;</span></span>
<span id="cb39-43"><a href="#cb39-43"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_allocator_t, const C&amp;, ProtoAllocator);</span></span>
<span id="cb39-44"><a href="#cb39-44"></a><span class="va">+</span></span>
<span id="cb39-45"><a href="#cb39-45"></a><span class="va">+    friend constexpr execution::thread_mapping_t tag_invoke(execution::get_mapping_t, tbd::any_instance_of&lt;C&gt;) noexcept;</span></span>
<span id="cb39-46"><a href="#cb39-46"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_blocking_t, const C&amp;) noexcept;</span></span>
<span id="cb39-47"><a href="#cb39-47"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_relationship_t, const C&amp;) noexcept;</span></span>
<span id="cb39-48"><a href="#cb39-48"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_outstanding_work_t, const C&amp;) noexcept;</span></span>
<span id="cb39-49"><a href="#cb39-49"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_context_t, const C&amp;) noexcept;</span></span>
<span id="cb39-50"><a href="#cb39-50"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_allocator_t, const C&amp;) noexcept;</span></span>
<span id="cb39-51"><a href="#cb39-51"></a></span>
<span id="cb39-52"><a href="#cb39-52"></a>    bool running_in_this_thread() const noexcept;</span>
<span id="cb39-53"><a href="#cb39-53"></a>};</span>
<span id="cb39-54"><a href="#cb39-54"></a></span>
<span id="cb39-55"><a href="#cb39-55"></a>bool operator==(const C&amp; a, const C&amp; b) noexcept;</span>
<span id="cb39-56"><a href="#cb39-56"></a>bool operator!=(const C&amp; a, const C&amp; b) noexcept;</span></code></pre></div>
</div>
<h2 data-number="3.30" id="modify-section-2.5.4.3-operations" data-number="3.30"><span class="header-section-number">3.30</span> Modify section <em>2.5.4.3 Operations</em><a href="#modify-section-2.5.4.3-operations" class="self-link"></a></h2>
<div>
<div class="sourceCode" id="cb40"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb40-1"><a href="#cb40-1"></a><span class="st">-see-below require(execution::blocking_t::never_t) const;</span></span>
<span id="cb40-2"><a href="#cb40-2"></a><span class="st">-see-below require(execution::blocking_t::possibly_t) const;</span></span>
<span id="cb40-3"><a href="#cb40-3"></a><span class="st">-see-below require(execution::blocking_t::always_t) const;</span></span>
<span id="cb40-4"><a href="#cb40-4"></a><span class="st">-see-below require(execution::relationship_t::continuation_t) const;</span></span>
<span id="cb40-5"><a href="#cb40-5"></a><span class="st">-see-below require(execution::relationship_t::fork_t) const;</span></span>
<span id="cb40-6"><a href="#cb40-6"></a><span class="st">-see-below require(execution::outstanding_work_t::tracked_t) const;</span></span>
<span id="cb40-7"><a href="#cb40-7"></a><span class="st">-see-below require(execution::outstanding_work_t::untracked_t) const;</span></span>
<span id="cb40-8"><a href="#cb40-8"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::never_blocking_t);</span></span>
<span id="cb40-9"><a href="#cb40-9"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::possibly_blocking_t);</span></span>
<span id="cb40-10"><a href="#cb40-10"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::always_blocking_t);</span></span>
<span id="cb40-11"><a href="#cb40-11"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_relationship_t, const C&amp;, execution::continuation_relationship_t);</span></span>
<span id="cb40-12"><a href="#cb40-12"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_relationship_t, const C&amp;, execution::fork_relationship_t);</span></span>
<span id="cb40-13"><a href="#cb40-13"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_outstanding_work_t, const C&amp;, execution::tracked_outstanding_work_t);</span></span>
<span id="cb40-14"><a href="#cb40-14"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_outstanding_work_t, const C&amp;, execution::untracked_outstanding_work_t);</span></span>
<span id="cb40-15"><a href="#cb40-15"></a><span class="va">+template&lt;class ProtoAllocator&gt;</span></span>
<span id="cb40-16"><a href="#cb40-16"></a><span class="va">+  friend <em>see-below</em> tag_invoke(execution::make_with_allocator_t, const C&amp;, ProtoAllocator);</span></span></code></pre></div>
</div>
<p><em>Returns:</em> An sender object of an unspecified type conforming to these specifications, associated with the same thread pool as <code class="sourceCode default">*this</code>, and having the requested <span class="rm" style="color: #bf0303"><del>property established</del></span> <span class="add" style="color: #006e28"><ins>behaviour</ins></span>. <span class="rm" style="color: #bf0303"><del>When the requested property is part of a group that is defined as a mutually exclusive set, any other properties in the group are removed from the returned sender object.</del></span> All <span class="rm" style="color: #bf0303"><del>other properties of the returned sender object</del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">tag_invoke</code></span> functions on the returned sender object, which are not modified by the requested behaviour,</ins></span> are identical to those of <code class="sourceCode default">*this</code>.</p>
<div class="rm" style="color: #bf0303">

<div class="sourceCode" id="cb41"><pre class="sourceCode default default"><code class="sourceCode default"><span id="cb41-1"><a href="#cb41-1"></a>see-below require(const execution::allocator_t&lt;void&gt;&amp; a) const;</span></code></pre></div>
<p><em>Returns:</em> <code class="sourceCode default">require(execution::allocator(x))</code>, where <code class="sourceCode default">x</code> is an implementation-defined default allocator.</p>
</div>
<div>
<div class="sourceCode" id="cb42"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb42-1"><a href="#cb42-1"></a>template&lt;class ProtoAllocator&gt;</span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="st">-  see-below require(const execution::allocator_t&lt;ProtoAllocator&gt;&amp; a) const;</span></span>
<span id="cb42-3"><a href="#cb42-3"></a><span class="va">+  friend <em>see-below</em> tag_invoke(execution::make_with_allocator_t, const C&amp;, ProtoAllocator);</span></span></code></pre></div>
</div>
<p><em>Returns:</em> An sender object of an unspecified type conforming to these specifications, associated with the same thread pool as <code class="sourceCode default">*this</code>, with the <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">execution::allocator_t&lt;ProtoAllocator&gt;</code></span> property established</del></span><span class="add" style="color: #006e28"><ins>function <span><code class="sourceCode default">execution::get_allocator() -&gt; ProtoAllocator</code></span>,</ins></span> such that allocation and deallocation associated with function submission will be performed using a copy of <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">a.alloc</code></span></del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">a</code></span></ins></span>. All other <span class="rm" style="color: #bf0303"><del>properties</del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">tag_invoke</code></span> functions</ins></span> of the returned scheduler object are identical to those of <code class="sourceCode default">*this</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb43-1"><a href="#cb43-1"></a>static constexpr execution::bulk_guarantee_t query(execution::bulk_guarantee_t) const;</span></code></pre></div>
<p><em>Returns:</em> <code class="sourceCode default">execution::bulk_guarantee.parallel</code></p>
<div>
<div class="sourceCode" id="cb44"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb44-1"><a href="#cb44-1"></a><span class="st">-static constexpr execution::mapping_t query(execution::mapping_t) const;</span></span>
<span id="cb44-2"><a href="#cb44-2"></a><span class="va">+friend constexpr execution::thread_mapping_t tag_invoke(execution::get_mapping_t, tbd::any_instance_of&lt;C&gt;) noexcept;</span></span></code></pre></div>
</div>
<p><em>Returns:</em> <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">execution::mapping.thread</code></span></del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">execution::thread_mapping_t</code></span></ins></span>.</p>
<div>
<div class="sourceCode" id="cb45"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb45-1"><a href="#cb45-1"></a><span class="st">-execution::blocking_t query(execution::blocking_t) const;</span></span>
<span id="cb45-2"><a href="#cb45-2"></a><span class="st">-execution::relationship_t query(execution::relationship_t) const;</span></span>
<span id="cb45-3"><a href="#cb45-3"></a><span class="st">-execution::outstanding_work_t query(execution::outstanding_work_t) const;</span></span>
<span id="cb45-4"><a href="#cb45-4"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::get_blocking_t, const C&amp;) noexcept;</span></span>
<span id="cb45-5"><a href="#cb45-5"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::get_relationship_t, const C&amp;) noexcept;</span></span>
<span id="cb45-6"><a href="#cb45-6"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::get_outstanding_work_t, const C&amp;) noexcept;</span></span></code></pre></div>
</div>
<p><em>Returns:</em> The <span class="add" style="color: #006e28"><ins>type and</ins></span> value of the given <span class="rm" style="color: #bf0303"><del>property</del></span><span class="add" style="color: #006e28"><ins>behaviour</ins></span> of <code class="sourceCode default">*this</code>.</p>
<div>
<div class="sourceCode" id="cb46"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb46-1"><a href="#cb46-1"></a><span class="st">-static_thread_pool&amp; query(execution::context_t) const noexcept;</span></span>
<span id="cb46-2"><a href="#cb46-2"></a><span class="va">+friend static_thread_pool&amp; tag_invoke(execution::get_context_t, const C&amp;) noexcept;</span></span></code></pre></div>
</div>
<p><em>Returns:</em> A reference to the associated <code class="sourceCode default">static_thread_pool</code> object.</p>
<div>
<div class="sourceCode" id="cb47"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb47-1"><a href="#cb47-1"></a><span class="st">-<em>see-below</em> query(execution::allocator_t&lt;void&gt;) const noexcept;</span></span>
<span id="cb47-2"><a href="#cb47-2"></a><span class="st">-<em>see-below</em> query(execution::allocator_t&lt;ProtoAllocator&gt;) const noexcept;</span></span>
<span id="cb47-3"><a href="#cb47-3"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::get_allocator_t, const C&amp;) noexcept;</span></span></code></pre></div>
</div>
<p><em>Returns:</em> The allocator object associated with the executor, with type and value as <span class="rm" style="color: #bf0303"><del>either previously established by the <span><code class="sourceCode default">execution::allocator_t&lt;ProtoAllocator&gt;</code></span> property</del></span> <span class="add" style="color: #006e28"><ins>specified in a previous call to <span><code class="sourceCode default">execution::make_with_allocator</code></span></ins></span> or the implementation defined default allocator <span class="rm" style="color: #bf0303"><del>established by the <span><code class="sourceCode default">execution::allocator_t&lt;void&gt;</code></span> property</del></span>.</p>
<h2 data-number="3.31" id="modify-section-2.5.4.4-comparisons" data-number="3.31"><span class="header-section-number">3.31</span> Modify section <em>2.5.4.4 Comparisons</em><a href="#modify-section-2.5.4.4-comparisons" class="self-link"></a></h2>
<div class="sourceCode" id="cb48"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb48-1"><a href="#cb48-1"></a>bool operator==(const C&amp; a, const C&amp; b) noexcept;</span></code></pre></div>
<div class="rm" style="color: #bf0303">
<p><em>Returns:</em> <code class="sourceCode default">true</code> if <code class="sourceCode default">&amp;a.query(execution::context) == &amp;b.query(execution::context)</code> and <code class="sourceCode default">a</code> and <code class="sourceCode default">b</code> have identical properties, otherwise <code class="sourceCode default">false</code>.</p>
</div>
<div class="add" style="color: #006e28">
<p><em>Returns:</em> <code class="sourceCode default">true</code> if</p>
<ul>
<li><code class="sourceCode default">a.query(execution::bulk_guarantee) == b.query(execution::bulk_guarantee)</code> and,</li>
<li><code class="sourceCode default">execution::get_mapping(a) == execution::get_mapping(b)</code> and,</li>
<li><code class="sourceCode default">execution::get_blocking(a) == execution::get_blocking(b)</code> and,</li>
<li><code class="sourceCode default">execution::get_relationship(a) == execution::get_relationship(b)</code> and,</li>
<li><code class="sourceCode default">execution::get_outstanding_work(a) == execution::get_outstanding_work(b)</code> and,</li>
<li><code class="sourceCode default">&amp;execution::get_context(a) == &amp;execution::get_context(b)</code> and,</li>
<li><code class="sourceCode default">execution::get_allocator(a) == execution::get_allocator(b)</code>,</li>
<li>otherwise <code class="sourceCode default">false</code>.</li>
</ul>

</div>
<h2 data-number="3.32" id="modify-section-2.5.5-static_thread_pool-executor-types" data-number="3.32"><span class="header-section-number">3.32</span> Modify section <em>2.5.5 <code class="sourceCode default">static_thread_pool</code> executor types</em><a href="#modify-section-2.5.5-static_thread_pool-executor-types" class="self-link"></a></h2>
<p>All executor types accessible through <code class="sourceCode default">static_thread_pool::executor()</code><span class="rm" style="color: #bf0303"><del>, and subsequent invocations of the member function <span><code class="sourceCode default">require</code></span>,</del></span> conform to the following specification.</p>
<div>
<div class="sourceCode" id="cb49"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb49-1"><a href="#cb49-1"></a>class C</span>
<span id="cb49-2"><a href="#cb49-2"></a>{</span>
<span id="cb49-3"><a href="#cb49-3"></a>  public:</span>
<span id="cb49-4"><a href="#cb49-4"></a></span>
<span id="cb49-5"><a href="#cb49-5"></a>    // construct / copy / destroy:</span>
<span id="cb49-6"><a href="#cb49-6"></a></span>
<span id="cb49-7"><a href="#cb49-7"></a>    C(const C&amp; other) noexcept;</span>
<span id="cb49-8"><a href="#cb49-8"></a>    C(C&amp;&amp; other) noexcept;</span>
<span id="cb49-9"><a href="#cb49-9"></a></span>
<span id="cb49-10"><a href="#cb49-10"></a>    C&amp; operator=(const C&amp; other) noexcept;</span>
<span id="cb49-11"><a href="#cb49-11"></a>    C&amp; operator=(C&amp;&amp; other) noexcept;</span>
<span id="cb49-12"><a href="#cb49-12"></a></span>
<span id="cb49-13"><a href="#cb49-13"></a>    // sender operations:</span>
<span id="cb49-14"><a href="#cb49-14"></a></span>
<span id="cb49-15"><a href="#cb49-15"></a><span class="st">-    see-below require(execution::blocking_t::never_t) const;</span></span>
<span id="cb49-16"><a href="#cb49-16"></a><span class="st">-    see-below require(execution::blocking_t::possibly_t) const;</span></span>
<span id="cb49-17"><a href="#cb49-17"></a><span class="st">-    see-below require(execution::blocking_t::always_t) const;</span></span>
<span id="cb49-18"><a href="#cb49-18"></a><span class="st">-    see-below require(execution::relationship_t::continuation_t) const;</span></span>
<span id="cb49-19"><a href="#cb49-19"></a><span class="st">-    see-below require(execution::relationship_t::fork_t) const;</span></span>
<span id="cb49-20"><a href="#cb49-20"></a><span class="st">-    see-below require(execution::outstanding_work_t::tracked_t) const;</span></span>
<span id="cb49-21"><a href="#cb49-21"></a><span class="st">-    see-below require(execution::outstanding_work_t::untracked_t) const;</span></span>
<span id="cb49-22"><a href="#cb49-22"></a><span class="st">-    see-below require(const execution::allocator_t&lt;void&gt;&amp; a) const;</span></span>
<span id="cb49-23"><a href="#cb49-23"></a><span class="st">-    template&lt;class ProtoAllocator&gt;</span></span>
<span id="cb49-24"><a href="#cb49-24"></a><span class="st">-    see-below require(const execution::allocator_t&lt;ProtoAllocator&gt;&amp; a) const;</span></span>
<span id="cb49-25"><a href="#cb49-25"></a><span class="st">-</span></span>
<span id="cb49-26"><a href="#cb49-26"></a>    static constexpr execution::bulk_guarantee_t query(execution::bulk_guarantee_t) const;</span>
<span id="cb49-27"><a href="#cb49-27"></a><span class="st">-    static constexpr execution::mapping_t query(execution::mapping_t) const;</span></span>
<span id="cb49-28"><a href="#cb49-28"></a><span class="st">-    execution::blocking_t query(execution::blocking_t) const;</span></span>
<span id="cb49-29"><a href="#cb49-29"></a><span class="st">-    execution::relationship_t query(execution::relationship_t) const;</span></span>
<span id="cb49-30"><a href="#cb49-30"></a><span class="st">-    execution::outstanding_work_t query(execution::outstanding_work_t) const;</span></span>
<span id="cb49-31"><a href="#cb49-31"></a><span class="st">-    see-below query(execution::context_t) const noexcept;</span></span>
<span id="cb49-32"><a href="#cb49-32"></a><span class="st">-    see-below query(execution::allocator_t&lt;void&gt;) const noexcept;</span></span>
<span id="cb49-33"><a href="#cb49-33"></a><span class="st">-    template&lt;class ProtoAllocator&gt;</span></span>
<span id="cb49-34"><a href="#cb49-34"></a><span class="st">-    see-below query(execution::allocator_t&lt;ProtoAllocator&gt;) const noexcept;</span></span>
<span id="cb49-35"><a href="#cb49-35"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::never_blocking_t);</span></span>
<span id="cb49-36"><a href="#cb49-36"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::possibly_blocking_t);</span></span>
<span id="cb49-37"><a href="#cb49-37"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::always_blocking_t);</span></span>
<span id="cb49-38"><a href="#cb49-38"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_relationship_t, const C&amp;, execution::continuation_relationship_t);</span></span>
<span id="cb49-39"><a href="#cb49-39"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_relationship_t, const C&amp;, execution::fork_relationship_t);</span></span>
<span id="cb49-40"><a href="#cb49-40"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_outstanding_work_t, const C&amp;, execution::tracked_outstanding_work_t);</span></span>
<span id="cb49-41"><a href="#cb49-41"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_outstanding_work_t, const C&amp;, execution::untracked_outstanding_work_t);</span></span>
<span id="cb49-42"><a href="#cb49-42"></a><span class="va">+    template&lt;class ProtoAllocator&gt;</span></span>
<span id="cb49-43"><a href="#cb49-43"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::make_with_allocator_t, const C&amp;, ProtoAllocator);</span></span>
<span id="cb49-44"><a href="#cb49-44"></a><span class="va">+</span></span>
<span id="cb49-45"><a href="#cb49-45"></a><span class="va">+    friend constexpr execution::thread_mapping_t tag_invoke(execution::get_mapping_t, tbd::any_instance_of&lt;C&gt;) noexcept;</span></span>
<span id="cb49-46"><a href="#cb49-46"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_blocking_t, const C&amp;) noexcept;</span></span>
<span id="cb49-47"><a href="#cb49-47"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_relationship_t, const C&amp;) noexcept;</span></span>
<span id="cb49-48"><a href="#cb49-48"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_outstanding_work_t, const C&amp;) noexcept;</span></span>
<span id="cb49-49"><a href="#cb49-49"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_context_t, const C&amp;) noexcept;</span></span>
<span id="cb49-50"><a href="#cb49-50"></a><span class="va">+    friend <em>see-below</em> tag_invoke(execution::get_allocator_t, const C&amp;) noexcept;</span></span>
<span id="cb49-51"><a href="#cb49-51"></a></span>
<span id="cb49-52"><a href="#cb49-52"></a>    bool running_in_this_thread() const noexcept;</span>
<span id="cb49-53"><a href="#cb49-53"></a>};</span>
<span id="cb49-54"><a href="#cb49-54"></a></span>
<span id="cb49-55"><a href="#cb49-55"></a>bool operator==(const C&amp; a, const C&amp; b) noexcept;</span>
<span id="cb49-56"><a href="#cb49-56"></a>bool operator!=(const C&amp; a, const C&amp; b) noexcept;</span></code></pre></div>
</div>
<h2 data-number="3.33" id="modify-section-2.5.5.3-operations" data-number="3.33"><span class="header-section-number">3.33</span> Modify section <em>2.5.5.3 Operations</em><a href="#modify-section-2.5.5.3-operations" class="self-link"></a></h2>
<div>
<div class="sourceCode" id="cb50"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb50-1"><a href="#cb50-1"></a><span class="st">-see-below require(execution::blocking_t::never_t) const;</span></span>
<span id="cb50-2"><a href="#cb50-2"></a><span class="st">-see-below require(execution::blocking_t::possibly_t) const;</span></span>
<span id="cb50-3"><a href="#cb50-3"></a><span class="st">-see-below require(execution::blocking_t::always_t) const;</span></span>
<span id="cb50-4"><a href="#cb50-4"></a><span class="st">-see-below require(execution::relationship_t::continuation_t) const;</span></span>
<span id="cb50-5"><a href="#cb50-5"></a><span class="st">-see-below require(execution::relationship_t::fork_t) const;</span></span>
<span id="cb50-6"><a href="#cb50-6"></a><span class="st">-see-below require(execution::outstanding_work_t::tracked_t) const;</span></span>
<span id="cb50-7"><a href="#cb50-7"></a><span class="st">-see-below require(execution::outstanding_work_t::untracked_t) const;</span></span>
<span id="cb50-8"><a href="#cb50-8"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::never_blocking_t);</span></span>
<span id="cb50-9"><a href="#cb50-9"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::possibly_blocking_t);</span></span>
<span id="cb50-10"><a href="#cb50-10"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_blocking_t, const C&amp;, execution::always_blocking_t);</span></span>
<span id="cb50-11"><a href="#cb50-11"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_relationship_t, const C&amp;, execution::continuation_relationship_t);</span></span>
<span id="cb50-12"><a href="#cb50-12"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_relationship_t, const C&amp;, execution::fork_relationship_t);</span></span>
<span id="cb50-13"><a href="#cb50-13"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_outstanding_work_t, const C&amp;, execution::tracked_outstanding_work_t);</span></span>
<span id="cb50-14"><a href="#cb50-14"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::make_with_outstanding_work_t, const C&amp;, execution::untracked_outstanding_work_t);</span></span>
<span id="cb50-15"><a href="#cb50-15"></a><span class="va">+template&lt;class ProtoAllocator&gt;</span></span>
<span id="cb50-16"><a href="#cb50-16"></a><span class="va">+  friend <em>see-below</em> tag_invoke(execution::make_with_allocator_t, const C&amp;, ProtoAllocator);</span></span></code></pre></div>
</div>
<p><em>Returns:</em> An executor object of an unspecified type conforming to these specifications, associated with the same thread pool as <code class="sourceCode default">*this</code>, and having the requested <span class="rm" style="color: #bf0303"><del>property established</del></span> <span class="add" style="color: #006e28"><ins>behaviour</ins></span>. <span class="rm" style="color: #bf0303"><del>When the requested property is part of a group that is defined as a mutually exclusive set, any other properties in the group are removed from the returned executor object.</del></span> All <span class="rm" style="color: #bf0303"><del>other properties of the returned executor object</del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">tag_invoke</code></span> functions on the returned executor object, which are not modified by the requested behaviour,</ins></span> are identical to those of <code class="sourceCode default">*this</code>.</p>
<div class="rm" style="color: #bf0303">

<div class="sourceCode" id="cb51"><pre class="sourceCode default default"><code class="sourceCode default"><span id="cb51-1"><a href="#cb51-1"></a>see-below require(const execution::allocator_t&lt;void&gt;&amp; a) const;</span></code></pre></div>
<p><em>Returns:</em> <code class="sourceCode default">require(execution::allocator(x))</code>, where <code class="sourceCode default">x</code> is an implementation-defined default allocator.</p>
</div>
<div>
<div class="sourceCode" id="cb52"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb52-1"><a href="#cb52-1"></a>template&lt;class ProtoAllocator&gt;</span>
<span id="cb52-2"><a href="#cb52-2"></a><span class="st">-  see-below require(const execution::allocator_t&lt;ProtoAllocator&gt;&amp; a) const;</span></span>
<span id="cb52-3"><a href="#cb52-3"></a><span class="va">+  friend <em>see-below</em> tag_invoke(execution::make_with_allocator_t, const C&amp;, ProtoAllocator);</span></span></code></pre></div>
</div>
<p><em>Returns:</em> An executor object of an unspecified type conforming to these specifications, associated with the same thread pool as <code class="sourceCode default">*this</code>, with the <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">execution::allocator_t&lt;ProtoAllocator&gt;</code></span> property established</del></span><span class="add" style="color: #006e28"><ins>function <span><code class="sourceCode default">execution::get_allocator() -&gt; ProtoAllocator</code></span>,</ins></span> such that allocation and deallocation associated with function submission will be performed using a copy of <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">a.alloc</code></span></del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">a</code></span></ins></span>. All other <span class="rm" style="color: #bf0303"><del>properties</del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">tag_invoke</code></span> functions</ins></span> of the returned executor object are identical to those of <code class="sourceCode default">*this</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb53-1"><a href="#cb53-1"></a>static constexpr execution::bulk_guarantee_t query(execution::bulk_guarantee_t) const;</span></code></pre></div>
<p><em>Returns:</em> <code class="sourceCode default">execution::bulk_guarantee.parallel</code></p>
<div>
<div class="sourceCode" id="cb54"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb54-1"><a href="#cb54-1"></a><span class="st">-static constexpr execution::mapping_t query(execution::mapping_t) const;</span></span>
<span id="cb54-2"><a href="#cb54-2"></a><span class="va">+friend constexpr execution::thread_mapping_t tag_invoke(execution::get_mapping_t, tbd::any_instance_of&lt;C&gt;) noexcept;</span></span></code></pre></div>
</div>
<p><em>Returns:</em> <span class="rm" style="color: #bf0303"><del><span><code class="sourceCode default">execution::mapping.thread</code></span></del></span><span class="add" style="color: #006e28"><ins><span><code class="sourceCode default">execution::thread_mapping_t</code></span></ins></span>.</p>
<div>
<div class="sourceCode" id="cb55"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb55-1"><a href="#cb55-1"></a><span class="st">-execution::blocking_t query(execution::blocking_t) const;</span></span>
<span id="cb55-2"><a href="#cb55-2"></a><span class="st">-execution::relationship_t query(execution::relationship_t) const;</span></span>
<span id="cb55-3"><a href="#cb55-3"></a><span class="st">-execution::outstanding_work_t query(execution::outstanding_work_t) const;</span></span>
<span id="cb55-4"><a href="#cb55-4"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::get_blocking_t, const C&amp;) noexcept;</span></span>
<span id="cb55-5"><a href="#cb55-5"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::get_relationship_t, const C&amp;) noexcept;</span></span>
<span id="cb55-6"><a href="#cb55-6"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::get_outstanding_work_t, const C&amp;) noexcept;</span></span></code></pre></div>
</div>
<p><em>Returns:</em> The <span class="add" style="color: #006e28"><ins>type and</ins></span> value of the given <span class="rm" style="color: #bf0303"><del>property</del></span><span class="add" style="color: #006e28"><ins>behaviour</ins></span> of <code class="sourceCode default">*this</code>.</p>
<div>
<div class="sourceCode" id="cb56"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb56-1"><a href="#cb56-1"></a><span class="st">-static_thread_pool&amp; query(execution::context_t) const noexcept;</span></span>
<span id="cb56-2"><a href="#cb56-2"></a><span class="va">+friend static_thread_pool&amp; tag_invoke(execution::get_context_t, const C&amp;) noexcept;</span></span></code></pre></div>
</div>
<p><em>Returns:</em> A reference to the associated <code class="sourceCode default">static_thread_pool</code> object.</p>
<div>
<div class="sourceCode" id="cb57"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb57-1"><a href="#cb57-1"></a><span class="st">-<em>see-below</em> query(execution::allocator_t&lt;void&gt;) const noexcept;</span></span>
<span id="cb57-2"><a href="#cb57-2"></a><span class="st">-<em>see-below</em> query(execution::allocator_t&lt;ProtoAllocator&gt;) const noexcept;</span></span>
<span id="cb57-3"><a href="#cb57-3"></a><span class="va">+friend <em>see-below</em> tag_invoke(execution::get_allocator_t, const C&amp;) noexcept;</span></span></code></pre></div>
</div>
<p><em>Returns:</em> The allocator object associated with the executor, with type and value as <span class="rm" style="color: #bf0303"><del>either previously established by the <span><code class="sourceCode default">execution::allocator_t&lt;ProtoAllocator&gt;</code></span> property</del></span> <span class="add" style="color: #006e28"><ins>specified in a previous call to <span><code class="sourceCode default">execution::make_with_allocator</code></span></ins></span> or the implementation defined default allocator <span class="rm" style="color: #bf0303"><del>established by the <span><code class="sourceCode default">execution::allocator_t&lt;void&gt;</code></span> property</del></span>.</p>
<h2 data-number="3.34" id="modify-section-2.5.5.4-comparisons" data-number="3.34"><span class="header-section-number">3.34</span> Modify section <em>2.5.5.4 Comparisons</em><a href="#modify-section-2.5.5.4-comparisons" class="self-link"></a></h2>
<div class="sourceCode" id="cb58"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb58-1"><a href="#cb58-1"></a>bool operator==(const C&amp; a, const C&amp; b) noexcept;</span></code></pre></div>
<div class="rm" style="color: #bf0303">
<p><em>Returns:</em> <code class="sourceCode default">true</code> if <code class="sourceCode default">&amp;a.query(execution::context) == &amp;b.query(execution::context)</code> and <code class="sourceCode default">a</code> and <code class="sourceCode default">b</code> have identical properties, otherwise <code class="sourceCode default">false</code>.</p>
</div>
<div class="add" style="color: #006e28">
<p><em>Returns:</em> <code class="sourceCode default">true</code> if</p>
<ul>
<li><code class="sourceCode default">a.query(execution::bulk_guarantee) == b.query(execution::bulk_guarantee)</code> and,</li>
<li><code class="sourceCode default">execution::get_mapping(a) == execution::get_mapping(b)</code> and,</li>
<li><code class="sourceCode default">execution::get_blocking(a) == execution::get_blocking(b)</code> and,</li>
<li><code class="sourceCode default">execution::get_relationship(a) == execution::get_relationship(b)</code> and,</li>
<li><code class="sourceCode default">execution::get_outstanding_work(a) == execution::get_outstanding_work(b)</code> and,</li>
<li><code class="sourceCode default">&amp;execution::get_context(a) == &amp;execution::get_context(b)</code> and,</li>
<li><code class="sourceCode default">execution::get_allocator(a) == execution::get_allocator(b)</code>,</li>
<li>otherwise <code class="sourceCode default">false</code>.</li>
</ul>

</div>
<h2 data-number="3.35" id="modify-section-1.2-usage-example" data-number="3.35"><span class="header-section-number">3.35</span> Modify section <em>1.2 Usage Example</em><a href="#modify-section-1.2-usage-example" class="self-link"></a></h2>
<div>
<div class="sourceCode" id="cb59"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb59-1"><a href="#cb59-1"></a><span class="st">-execute(std::require(ex, blocking.always), foo);</span></span>
<span id="cb59-2"><a href="#cb59-2"></a><span class="va">+execute(</span></span>
<span id="cb59-3"><a href="#cb59-3"></a>  execution::make_with_blocking(</span>
<span id="cb59-4"><a href="#cb59-4"></a>    ex, execution::always_blocking), </span>
<span id="cb59-5"><a href="#cb59-5"></a>  foo);</span></code></pre></div>
</div>
<h2 data-number="3.36" id="modify-section-1.3-executors-execute-work" data-number="3.36"><span class="header-section-number">3.36</span> Modify section <em>1.3 Executors Execute Work</em><a href="#modify-section-1.3-executors-execute-work" class="self-link"></a></h2>
<p>Executors avoid this unscalable situation by <span class="add" style="color: #006e28"><ins>defining cpos in terms of <span><code class="sourceCode default">tag_invoke</code></span> from <span class="citation" data-cites="P1895R0">[<a href="#ref-P1895R0" role="doc-biblioref">P1895R0</a>]</span></ins></span> <span class="rm" style="color: #bf0303"><del>adopting <span class="citation" data-cites="P1393R0">[<a href="#ref-P1393R0" role="doc-biblioref">P1393R0</a>]</span>’s properties design based on require and prefer</del></span>:</p>
<div>
<div class="sourceCode" id="cb60"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb60-1"><a href="#cb60-1"></a>// require the execute operation to block</span>
<span id="cb60-2"><a href="#cb60-2"></a><span class="st">-executor auto blocking_ex = std::require(ex, execution::blocking.always);</span></span>
<span id="cb60-3"><a href="#cb60-3"></a><span class="va">+executor auto blocking_ex = execution::make_with_blocking(</span></span>
<span id="cb60-4"><a href="#cb60-4"></a><span class="va">+  ex, execution::always_blocking);</span></span>
<span id="cb60-5"><a href="#cb60-5"></a></span>
<span id="cb60-6"><a href="#cb60-6"></a>// prefer to execute with a particular priority p</span>
<span id="cb60-7"><a href="#cb60-7"></a><span class="st">-executor auto blocking_ex_with_priority = std::prefer(blocking_ex, execution::priority(p));</span></span>
<span id="cb60-8"><a href="#cb60-8"></a><span class="va">+executor auto blocking_ex_with_priority = tbd::prefer(</span></span>
<span id="cb60-9"><a href="#cb60-9"></a><span class="va">+  execution::make_with_blocking, blocking_ex, execution::always_blocking);</span></span></code></pre></div>
</div>
<div>
<div class="sourceCode" id="cb61"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb61-1"><a href="#cb61-1"></a>  // execute the nonblocking work on the given executor</span>
<span id="cb61-2"><a href="#cb61-2"></a><span class="st">-  execute(require(ex, blocking.never), move(work));</span></span>
<span id="cb61-3"><a href="#cb61-3"></a><span class="va">+  execute(make_with_blocking(ex, never_blocking), move(work));</span></span></code></pre></div>
</div>
<h2 data-number="3.37" id="modify-section-2.1.2-header-synopsis" data-number="3.37"><span class="header-section-number">3.37</span> Modify section <em>2.1.2 Header <execution> synopsis</em><a href="#modify-section-2.1.2-header-synopsis" class="self-link"></a></h2>
<div>
<div class="sourceCode" id="cb62"><pre class="sourceCode diff"><code class="sourceCode diff"><span id="cb62-1"><a href="#cb62-1"></a><span class="st">-  // Associated execution context property:</span></span>
<span id="cb62-2"><a href="#cb62-2"></a><span class="va">+  // Associated execution context functions:</span></span>
<span id="cb62-3"><a href="#cb62-3"></a></span>
<span id="cb62-4"><a href="#cb62-4"></a><span class="st">-  struct context_t;</span></span>
<span id="cb62-5"><a href="#cb62-5"></a><span class="st">-</span></span>
<span id="cb62-6"><a href="#cb62-6"></a><span class="st">-  constexpr context_t context;</span></span>
<span id="cb62-7"><a href="#cb62-7"></a><span class="va">+  inline constexpr get_context_t get_context = get_context_t{};</span></span>
<span id="cb62-8"><a href="#cb62-8"></a></span>
<span id="cb62-9"><a href="#cb62-9"></a><span class="st">-  // Blocking properties:</span></span>
<span id="cb62-10"><a href="#cb62-10"></a><span class="va">+  // Blocking behaviour:</span></span>
<span id="cb62-11"><a href="#cb62-11"></a></span>
<span id="cb62-12"><a href="#cb62-12"></a><span class="st">-  struct blocking_t;</span></span>
<span id="cb62-13"><a href="#cb62-13"></a><span class="st">-</span></span>
<span id="cb62-14"><a href="#cb62-14"></a><span class="st">-  constexpr blocking_t blocking;</span></span>
<span id="cb62-15"><a href="#cb62-15"></a><span class="st">-</span></span>
<span id="cb62-16"><a href="#cb62-16"></a><span class="va">+  // Blocking values</span></span>
<span id="cb62-17"><a href="#cb62-17"></a><span class="va">+</span></span>
<span id="cb62-18"><a href="#cb62-18"></a><span class="va">+  inline constexpr always_blocking_t always_blocking = always_blocking_t{};</span></span>
<span id="cb62-19"><a href="#cb62-19"></a><span class="va">+</span></span>
<span id="cb62-20"><a href="#cb62-20"></a><span class="va">+  inline constexpr never_blocking_t never_blocking = never_blocking_t{};</span></span>
<span id="cb62-21"><a href="#cb62-21"></a><span class="va">+</span></span>
<span id="cb62-22"><a href="#cb62-22"></a><span class="va">+  inline constexpr possibly_blocking_t possibly_blocking = possibly_blocking_t{};</span></span>
<span id="cb62-23"><a href="#cb62-23"></a><span class="va">+</span></span>
<span id="cb62-24"><a href="#cb62-24"></a><span class="va">+  // Blocking functions</span></span>
<span id="cb62-25"><a href="#cb62-25"></a><span class="va">+</span></span>
<span id="cb62-26"><a href="#cb62-26"></a><span class="va">+  inline constexpr get_context_t get_context = get_context_t{};</span></span>
<span id="cb62-27"><a href="#cb62-27"></a><span class="va">+</span></span>
<span id="cb62-28"><a href="#cb62-28"></a><span class="va">+  inline constexpr make_with_context_t make_with_context = make_with_context_t{};</span></span>
<span id="cb62-29"><a href="#cb62-29"></a></span>
<span id="cb62-30"><a href="#cb62-30"></a>  // Properties to allow adaptation of blocking and directionality:</span>
<span id="cb62-31"><a href="#cb62-31"></a></span>
<span id="cb62-32"><a href="#cb62-32"></a>  struct blocking_adaptation_t;</span>
<span id="cb62-33"><a href="#cb62-33"></a></span>
<span id="cb62-34"><a href="#cb62-34"></a>  constexpr blocking_adaptation_t blocking_adaptation;</span>
<span id="cb62-35"><a href="#cb62-35"></a></span>
<span id="cb62-36"><a href="#cb62-36"></a><span class="st">-  // Properties to indicate if submitted tasks represent continuations:</span></span>
<span id="cb62-37"><a href="#cb62-37"></a><span class="va">+  // Behaviour that indicates if submitted tasks represent continuations:</span></span>
<span id="cb62-38"><a href="#cb62-38"></a></span>
<span id="cb62-39"><a href="#cb62-39"></a><span class="st">-  struct relationship_t;</span></span>
<span id="cb62-40"><a href="#cb62-40"></a><span class="st">-</span></span>
<span id="cb62-41"><a href="#cb62-41"></a><span class="st">-  constexpr relationship_t relationship;</span></span>
<span id="cb62-42"><a href="#cb62-42"></a><span class="st">-</span></span>
<span id="cb62-43"><a href="#cb62-43"></a><span class="va">+  // Relationship values</span></span>
<span id="cb62-44"><a href="#cb62-44"></a><span class="va">+</span></span>
<span id="cb62-45"><a href="#cb62-45"></a><span class="va">+  inline constexpr fork_relationship_t fork_relationship = fork_relationship_t{};</span></span>
<span id="cb62-46"><a href="#cb62-46"></a><span class="va">+</span></span>
<span id="cb62-47"><a href="#cb62-47"></a><span class="va">+  inline constexpr continuation_relationship_t continuation_relationship = continuation_relationship_t{};</span></span>
<span id="cb62-48"><a href="#cb62-48"></a><span class="va">+</span></span>
<span id="cb62-49"><a href="#cb62-49"></a><span class="va">+  // Relationship functions</span></span>
<span id="cb62-50"><a href="#cb62-50"></a><span class="va">+</span></span>
<span id="cb62-51"><a href="#cb62-51"></a><span class="va">+  inline constexpr get_relationship_t get_relationship = get_relationship_t{};</span></span>
<span id="cb62-52"><a href="#cb62-52"></a><span class="va">+</span></span>
<span id="cb62-53"><a href="#cb62-53"></a><span class="va">+  inline constexpr make_with_relationship_t make_with_relationship = make_with_relationship_t{};</span></span>
<span id="cb62-54"><a href="#cb62-54"></a></span>
<span id="cb62-55"><a href="#cb62-55"></a><span class="st">-  // Properties to indicate likely task submission in the future:</span></span>
<span id="cb62-56"><a href="#cb62-56"></a><span class="va">+  // Behaviour that indicates likely task submission in the future:</span></span>
<span id="cb62-57"><a href="#cb62-57"></a></span>
<span id="cb62-58"><a href="#cb62-58"></a><span class="st">-  struct outstanding_work_t;</span></span>
<span id="cb62-59"><a href="#cb62-59"></a><span class="st">-</span></span>
<span id="cb62-60"><a href="#cb62-60"></a><span class="st">-  constexpr outstanding_work_t outstanding_work;</span></span>
<span id="cb62-61"><a href="#cb62-61"></a><span class="va">+  // OutstandingWork values</span></span>
<span id="cb62-62"><a href="#cb62-62"></a><span class="va">+</span></span>
<span id="cb62-63"><a href="#cb62-63"></a><span class="va">+  inline constexpr tracked_outstanding_work_t tracked_outstanding_work = tracked_outstanding_work_t{};</span></span>
<span id="cb62-64"><a href="#cb62-64"></a><span class="va">+</span></span>
<span id="cb62-65"><a href="#cb62-65"></a><span class="va">+  inline constexpr untracked_outstanding_work_t untracked_outstanding_work = untracked_outstanding_work_t{};</span></span>
<span id="cb62-66"><a href="#cb62-66"></a><span class="va">+</span></span>
<span id="cb62-67"><a href="#cb62-67"></a><span class="va">+  // OutstandingWork functions</span></span>
<span id="cb62-68"><a href="#cb62-68"></a><span class="va">+</span></span>
<span id="cb62-69"><a href="#cb62-69"></a><span class="va">+  inline constexpr get_outstanding_work_t get_outstanding_work = get_outstanding_work_t{};</span></span>
<span id="cb62-70"><a href="#cb62-70"></a><span class="va">+</span></span>
<span id="cb62-71"><a href="#cb62-71"></a><span class="va">+  inline constexpr make_with_outstanding_work_t make_with_outstanding_work = make_with_outstanding_work_t{};</span></span>
<span id="cb62-72"><a href="#cb62-72"></a></span>
<span id="cb62-73"><a href="#cb62-73"></a>  // Properties for bulk execution guarantees:</span>
<span id="cb62-74"><a href="#cb62-74"></a></span>
<span id="cb62-75"><a href="#cb62-75"></a>  struct bulk_guarantee_t;</span>
<span id="cb62-76"><a href="#cb62-76"></a></span>
<span id="cb62-77"><a href="#cb62-77"></a>  constexpr bulk_guarantee_t bulk_guarantee;</span>
<span id="cb62-78"><a href="#cb62-78"></a></span>
<span id="cb62-79"><a href="#cb62-79"></a><span class="st">-  // Properties for mapping of execution on to threads:</span></span>
<span id="cb62-80"><a href="#cb62-80"></a><span class="va">+  // Behaviour for mapping of execution on to threads:</span></span>
<span id="cb62-81"><a href="#cb62-81"></a></span>
<span id="cb62-82"><a href="#cb62-82"></a><span class="st">-  struct mapping_t;</span></span>
<span id="cb62-83"><a href="#cb62-83"></a><span class="st">-</span></span>
<span id="cb62-84"><a href="#cb62-84"></a><span class="st">-  constexpr mapping_t mapping;</span></span>
<span id="cb62-85"><a href="#cb62-85"></a><span class="va">+  // Mapping values</span></span>
<span id="cb62-86"><a href="#cb62-86"></a><span class="va">+</span></span>
<span id="cb62-87"><a href="#cb62-87"></a><span class="va">+  inline constexpr thread_mapping_t thread_mapping = thread_mapping_t{};</span></span>
<span id="cb62-88"><a href="#cb62-88"></a><span class="va">+</span></span>
<span id="cb62-89"><a href="#cb62-89"></a><span class="va">+  inline constexpr new_thread_mapping_t new_thread_mapping = new_thread_mapping_t{};</span></span>
<span id="cb62-90"><a href="#cb62-90"></a><span class="va">+</span></span>
<span id="cb62-91"><a href="#cb62-91"></a><span class="va">+  inline constexpr other_mapping_t other_mapping = other_mapping_t{};</span></span>
<span id="cb62-92"><a href="#cb62-92"></a><span class="va">+</span></span>
<span id="cb62-93"><a href="#cb62-93"></a><span class="va">+  // Mapping functions</span></span>
<span id="cb62-94"><a href="#cb62-94"></a><span class="va">+</span></span>
<span id="cb62-95"><a href="#cb62-95"></a><span class="va">+  inline constexpr get_mapping_t get_mapping = get_mapping_t{};</span></span>
<span id="cb62-96"><a href="#cb62-96"></a><span class="va">+</span></span>
<span id="cb62-97"><a href="#cb62-97"></a><span class="va">+  inline constexpr make_with_mapping_t make_with_mapping = make_with_mapping_t{};</span></span>
<span id="cb62-98"><a href="#cb62-98"></a></span>
<span id="cb62-99"><a href="#cb62-99"></a><span class="st">-  // Memory allocation properties:</span></span>
<span id="cb62-100"><a href="#cb62-100"></a><span class="va">+  // Associated memory allocator functions:</span></span>
<span id="cb62-101"><a href="#cb62-101"></a></span>
<span id="cb62-102"><a href="#cb62-102"></a><span class="st">-  template &lt;typename ProtoAllocator&gt;</span></span>
<span id="cb62-103"><a href="#cb62-103"></a><span class="st">-  struct allocator_t;</span></span>
<span id="cb62-104"><a href="#cb62-104"></a><span class="st">-</span></span>
<span id="cb62-105"><a href="#cb62-105"></a><span class="st">-  constexpr allocator_t&lt;void&gt; allocator;</span></span>
<span id="cb62-106"><a href="#cb62-106"></a><span class="va">+  inline constexpr get_allocator_t get_allocator = get_allocator_t{};</span></span>
<span id="cb62-107"><a href="#cb62-107"></a><span class="va">+</span></span>
<span id="cb62-108"><a href="#cb62-108"></a><span class="va">+  inline constexpr make_with_allocator_t make_with_allocator = make_with_allocator_t{};</span></span></code></pre></div>
</div>
<h1 data-number="4" id="bibliography" data-number="4"><span class="header-section-number">4</span> References<a href="#bibliography" class="self-link"></a></h1>
<div id="refs" class="references hanging-indent" role="doc-bibliography">
<div id="ref-P0443R13">
<p>[P0443R13] Jared Hoberock, Michael Garland, Chris Kohlhoff, Chris Mysen, Carter Edwards, Gordon Brown, D. S. Hollman, Lee Howes, Kirk Shoop, Lewis Baker, Eric Niebler. 2020. A Unified Executors Proposal for C++. <br />
<a href="https://wg21.link/p0443r13">https://wg21.link/p0443r13</a></p>
</div>
<div id="ref-P0737R0">
<p>[P0737R0] H. Carter Edwards, Daniel Sunderland, Michael Wong, Thomas Rodgers, Gordon Brown. 2017. Execution Context of Execution Agents. <br />
<a href="https://wg21.link/p0737r0">https://wg21.link/p0737r0</a></p>
</div>
<div id="ref-P1393R0">
<p>[P1393R0] D. S. Hollman, Chris Kohlhoff, Bryce Lelbach, Jared Hoberock, Gordon Brown, Michał Dominiak. 2019. A General Property Customization Mechanism. <br />
<a href="https://wg21.link/p1393r0">https://wg21.link/p1393r0</a></p>
</div>
<div id="ref-P1895R0">
<p>[P1895R0] Lewis Baker, Eric Niebler, Kirk Shoop. 2019. tag_invoke: A general pattern for supporting customisable functions. <br />
<a href="https://wg21.link/p1895r0">https://wg21.link/p1895r0</a></p>
</div>
</div>
</div>
</div>
</body>
</html>
